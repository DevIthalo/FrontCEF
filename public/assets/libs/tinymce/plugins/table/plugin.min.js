!function(){"use strict";var e,t=tinymce.util.Tools.resolve("tinymce.PluginManager");let o=e=>t=>(e=>{var t,o;let l=typeof e;return null===e?"null":"object"===l&&Array.isArray(e)?"array":"object"===l&&((t=String).prototype.isPrototypeOf(e)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name)?"string":l})(t)===e,l=e=>t=>typeof t===e,r=o("string"),n=o("array"),a=l("boolean"),s=e=>void 0===e,i=e=>null!=e,c=l("function"),m=l("number"),d=()=>{},u=e=>()=>e,p=e=>e,b=(e,t)=>e===t;function g(e,...t){return(...o)=>{let l=t.concat(o);return e.apply(null,l)}}let h=e=>{e()},f=u(!1),y=u(!0);class w{constructor(e,t){this.tag=e,this.value=t}static some(e){return new w(!0,e)}static none(){return w.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?w.some(e(this.value)):w.none()}bind(e){return this.tag?e(this.value):w.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:w.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return i(e)?w.some(e):w.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}w.singletonNone=new w(!1);let S=Object.keys,C=Object.hasOwnProperty,v=(e,t)=>{let o=S(e);for(let l=0,r=o.length;l<r;l++){let r=o[l];t(e[r],r)}},T=(e,t)=>{var o;let l={};return o=(e,t)=>{l[t]=e},v(e,(e,l)=>{(t(e,l)?o:d)(e,l)}),l},x=e=>S(e).length,A=(e,t)=>R(e,t)?w.from(e[t]):w.none(),R=(e,t)=>C.call(e,t),O=(e,t)=>R(e,t)&&void 0!==e[t]&&null!==e[t],_=Array.prototype.indexOf,D=Array.prototype.push,N=(e,t)=>_.call(e,t)>-1,I=(e,t)=>{for(let o=0,l=e.length;o<l;o++)if(t(e[o],o))return!0;return!1},M=(e,t)=>{let o=[];for(let l=0;l<e;l++)o.push(t(l));return o},P=(e,t)=>{let o=e.length,l=Array(o);for(let r=0;r<o;r++){let o=e[r];l[r]=t(o,r)}return l},k=(e,t)=>{for(let o=0,l=e.length;o<l;o++)t(e[o],o)},E=(e,t)=>{let o=[];for(let l=0,r=e.length;l<r;l++){let r=e[l];t(r,l)&&o.push(r)}return o},B=(e,t,o)=>(k(e,(e,l)=>{o=t(o,e,l)}),o),F=(e,t)=>((e,t,o)=>{for(let l=0,r=e.length;l<r;l++){let r=e[l];if(t(r,l))return w.some(r);if(o(r,l))break}return w.none()})(e,t,f),q=(e,t)=>(e=>{let t=[];for(let o=0,l=e.length;o<l;++o){if(!n(e[o]))throw Error("Arr.flatten item "+o+" was not an array, input: "+e);D.apply(t,e[o])}return t})(P(e,t)),L=(e,t)=>{for(let o=0,l=e.length;o<l;++o)if(!0!==t(e[o],o))return!1;return!0},H=(e,t)=>t>=0&&t<e.length?w.some(e[t]):w.none(),j=(e,t)=>{for(let o=0;o<e.length;o++){let l=t(e[o],o);if(l.isSome())return l}return w.none()},V=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},$={fromHtml:(e,t)=>{let o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return V(o.childNodes[0])},fromTag:(e,t)=>{let o=(t||document).createElement(e);return V(o)},fromText:(e,t)=>{let o=(t||document).createTextNode(e);return V(o)},fromDom:V,fromPoint:(e,t,o)=>w.from(e.dom.elementFromPoint(t,o)).map(V)},z=(e,t)=>{let o=e.dom;if(1!==o.nodeType)return!1;if(void 0!==o.matches)return o.matches(t);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(t);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},W=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,U=(e,t)=>e.dom===t.dom;"undefined"!=typeof window?window:Function("return this;")();let G=e=>e.dom.nodeName.toLowerCase(),K=e=>e.dom.nodeType,J=e=>t=>K(t)===e,Q=J(1),X=J(3),Y=J(9),Z=J(11),ee=e=>t=>Q(t)&&G(t)===e,et=e=>Y(e)?e:$.fromDom(e.dom.ownerDocument),eo=e=>w.from(e.dom.parentNode).map($.fromDom),el=e=>w.from(e.dom.nextSibling).map($.fromDom),er=e=>P(e.dom.childNodes,$.fromDom),en=c(Element.prototype.attachShadow)&&c(Node.prototype.getRootNode)?e=>$.fromDom(e.dom.getRootNode()):et,ea=e=>$.fromDom(e.dom.host),es=e=>{let t=X(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let o=t.ownerDocument;return(e=>{let t=en(e);return Z(t)&&i(t.dom.host)?w.some(t):w.none()})($.fromDom(t)).fold(()=>o.body.contains(t),e=>es(ea(e)))};var ei=(e,t,o,l,r)=>e(o,l)?w.some(o):c(r)&&r(o)?w.none():t(o,l,r);let ec=(e,t,o)=>{let l=e.dom,r=c(o)?o:f;for(;l.parentNode;){l=l.parentNode;let e=$.fromDom(l);if(t(e))return w.some(e);if(r(e))break}return w.none()},em=(e,t,o)=>ec(e,e=>z(e,t),o),ed=(e,t)=>F(e.dom.childNodes,e=>z($.fromDom(e),t)).map($.fromDom),eu=(e,t)=>((e,t)=>{let o=void 0===t?document:t.dom;return W(o)?w.none():w.from(o.querySelector(e)).map($.fromDom)})(t,e),ep=(e,t,o)=>ei((e,t)=>z(e,t),em,e,t,o),eb=(e,t=!1)=>es(e)?e.dom.isContentEditable:ep(e,"[contenteditable]").fold(u(t),e=>"true"===eg(e)),eg=e=>e.dom.contentEditable,eh=e=>t=>U(t,$.fromDom(e.getBody())),ef=e=>/^\d+(\.\d+)?$/.test(e)?e+"px":e,ey=e=>$.fromDom(e.selection.getStart()),ew=(e,t)=>{let o=[];return k(er(e),e=>{t(e)&&(o=o.concat([e])),o=o.concat(ew(e,t))}),o},eS=(e,t)=>E(er(e),e=>z(e,t)),eC=(e,t)=>((e,t)=>{let o=void 0===t?document:t.dom;return W(o)?[]:P(o.querySelectorAll(e),$.fromDom)})(t,e),ev=(e,t,o)=>{if(!(r(o)||a(o)||m(o)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),Error("Attribute value was not simple");e.setAttribute(t,o+"")},eT=(e,t)=>{let o=e.dom.getAttribute(t);return null===o?void 0:o},ex=(e,t)=>w.from(eT(e,t)),eA=(e,t)=>{e.dom.removeAttribute(t)},eR=(e,t,o=b)=>e.exists(e=>o(e,t)),eO=(e,t,o)=>e.isSome()&&t.isSome()?w.some(o(e.getOrDie(),t.getOrDie())):w.none(),e_=(e,t)=>""===t||e.length>=t.length&&e.substr(0,0+t.length)===t,eD=(e=/^\s+|\s+$/g,t=>t.replace(e,"")),eN=e=>e.length>0,eI=(e,t=10)=>{let o=parseInt(e,t);return isNaN(o)?w.none():w.some(o)},eM=e=>void 0!==e.style&&c(e.style.getPropertyValue),eP=(e,t)=>{let o=e.dom,l=window.getComputedStyle(o).getPropertyValue(t);return""!==l||es(e)?l:ek(o,t)},ek=(e,t)=>eM(e)?e.style.getPropertyValue(t):"",eE=(e,t)=>{let o=e.dom,l=ek(o,t);return w.from(l).filter(e=>e.length>0)},eB=(e,t,o=0)=>ex(e,t).map(e=>parseInt(e,10)).getOr(o),eF=(e,t)=>eq(e,t,y),eq=(e,t,o)=>q(er(e),e=>z(e,t)?o(e)?[e]:[]:eq(e,t,o)),eL=["tfoot","thead","tbody","colgroup"],eH=(e,t,o)=>({element:e,rowspan:t,colspan:o}),ej=(e,t,o)=>({element:e,cells:t,section:o}),eV=(e,t)=>ep(e,"table",t),e$=e=>eF(e,"tr"),ez=e=>eV(e).fold(u([]),e=>eS(e,"colgroup")),eW=e=>eo(e).map(e=>{let t=G(e);return N(eL,t)?t:"tbody"}).getOr("tbody"),eU=e=>ex(e,"data-snooker-locked-cols").bind(e=>w.from(e.match(/\d+/g))).map(e=>((e,t)=>{let o={};for(let l=0,r=e.length;l<r;l++){let r=e[l];o[String(r)]=t(r,l)}return o})(e,y)),eG=(e,t)=>e+","+t,eK=e=>{let t={},o=[],l=H(e,0).map(e=>e.element).bind(eV).bind(eU).getOr({}),r=0,n=0,a=0,{pass:s,fail:i}=((e,t)=>{let o=[],l=[];for(let t=0,r=e.length;t<r;t++){let r=e[t];("colgroup"===r.section?o:l).push(r)}return{pass:o,fail:l}})(e);k(i,e=>{let s=[];k(e.cells,e=>{var o,r;let i=0;for(;void 0!==t[eG(a,i)];)i++;let c=O(l,i.toString()),m=(o=e.element,r=e.rowspan,{element:o,rowspan:r,colspan:e.colspan,row:a,column:i,isLocked:c});for(let o=0;o<e.colspan;o++)for(let l=0;l<e.rowspan;l++){let e=i+o,r=eG(a+l,e);t[r]=m,n=Math.max(n,e+1)}s.push(m)}),r++,o.push(ej(e.element,s,e.section)),a++});let{columns:c,colgroups:m}=H(s,s.length-1).map(e=>{let t=(e=>{let t={},o=0;return k(e.cells,e=>{let l=e.colspan;M(l,r=>{let n=o+r;t[n]={element:e.element,colspan:l,column:n}}),o+=l}),t})(e),o={element:e.element,columns:((e,t)=>{let o=[];return v(e,(e,l)=>{o.push(t(e,l))}),o})(t,p)};return{colgroups:[o],columns:t}}).getOrThunk(()=>({colgroups:[],columns:{}})),d={rows:r,columns:n};return{grid:d,access:t,all:o,columns:c,colgroups:m}},eJ=e=>{let t=(e=>{var t;let o=e$(e);return t=[...ez(e),...o],P(t,e=>{if("colgroup"===G(e)){let t=P(z(e,"colgroup")?eS(e,"col"):q(ez(e),e=>eS(e,"col")),e=>{let t=eB(e,"span",1);return eH(e,1,t)});return ej(e,t,"colgroup")}{let t=P(eF(e,"th,td"),e=>{let t=eB(e,"rowspan",1),o=eB(e,"colspan",1);return eH(e,t,o)});return ej(e,t,eW(e))}})})(e);return eK(t)},eQ=(e,t,o)=>w.from(e.access[eG(t,o)]),eX=(e,t,o)=>{let l=((e,t)=>{let o=q(e.all,e=>e.cells);return E(o,t)})(e,e=>o(t,e.element));return l.length>0?w.some(l[0]):w.none()},eY=(e,t)=>w.from(e.columns[t]);var eZ=tinymce.util.Tools.resolve("tinymce.util.Tools");let e0=(e,t,o)=>{let l;let r=e.select("td,th",t);for(let t=0;t<r.length;t++){let n=e.getStyle(r[t],o);if(s(l)&&(l=n),l!==n)return""}return l},e1=(e,t,o)=>{eZ.each("left center right".split(" "),l=>{l!==o&&e.formatter.remove("align"+l,{},t)}),o&&e.formatter.apply("align"+o,{},t)},e2=(e,t,o)=>{e.dispatch("TableModified",{...o,table:t})},e3=(e,t,o)=>(e=>{let t=parseFloat(e);return isNaN(t)?w.none():w.some(t)})(eP(e,t)).getOr(o),e4=e=>((e,t)=>{var o,l;let r=e.dom,n=r.getBoundingClientRect().width||r.offsetWidth;return"border-box"===t?n:(l="right",n-e3(e,`padding-${o="left"}`,0)-e3(e,`padding-${l}`,0)-e3(e,`border-${o}-width`,0)-e3(e,`border-${l}-width`,0))})(e,"content-box");var e5=tinymce.util.Tools.resolve("tinymce.Env");let e6=M(5,e=>{let t=`${e+1}px`;return{title:t,value:t}}),e9=P(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],e=>({title:e,value:e.toLowerCase()})),e8="100%",e7=e=>{var t;let o=e.dom,l=null!==(t=o.getParent(e.selection.getStart(),o.isBlock))&&void 0!==t?t:e.getBody();return e4($.fromDom(l))+"px"},te=e=>t=>t.options.get(e),tt=te("table_sizing_mode"),to=te("table_border_widths"),tl=te("table_border_styles"),tr=te("table_cell_advtab"),tn=te("table_row_advtab"),ta=te("table_advtab"),ts=te("table_appearance_options"),ti=te("table_grid"),tc=te("table_style_by_css"),tm=te("table_cell_class_list"),td=te("table_row_class_list"),tu=te("table_class_list"),tp=te("table_toolbar"),tb=te("table_background_color_map"),tg=te("table_border_color_map"),th=e=>"fixed"===tt(e),tf=e=>"responsive"===tt(e),ty=e=>{let t=e.options,o=t.get("table_default_styles");return t.isSet("table_default_styles")?o:tf(e)||!tc(e)?o:th(e)?{...o,width:e7(e)}:{...o,width:e8}},tw=e=>{let t=e.options,o=t.get("table_default_attributes");return t.isSet("table_default_attributes")?o:tf(e)||tc(e)?o:th(e)?{...o,width:e7(e)}:{...o,width:e8}},tS=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,tC=(e,t,o)=>((e,t,o)=>{let l=eX(e,t,U),r=eX(e,o,U);return l.bind(e=>r.map(t=>({startRow:Math.min(e.row,t.row),startCol:Math.min(e.column,t.column),finishRow:Math.max(e.row+e.rowspan-1,t.row+t.rowspan-1),finishCol:Math.max(e.column+e.colspan-1,t.column+t.colspan-1)})))})(e,t,o).bind(t=>((e,t)=>{let o=!0,l=g(tS,t);for(let r=t.startRow;r<=t.finishRow;r++)for(let n=t.startCol;n<=t.finishCol;n++)o=o&&eQ(e,r,n).exists(l);return o?w.some(t):w.none()})(e,t)),tv=(e,t)=>{eo(e).each(o=>{o.dom.insertBefore(t.dom,e.dom)})},tT=(e,t)=>{el(e).fold(()=>{eo(e).each(e=>{tx(e,t)})},e=>{tv(e,t)})},tx=(e,t)=>{e.dom.appendChild(t.dom)},tA=(e,t)=>{k(t,(o,l)=>{let r=0===l?e:t[l-1];tT(r,o)})},tR=e=>{let t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},tO=((e,t)=>{let o=t=>e(t)?w.from(t.dom.nodeValue):w.none();return{get:t=>{if(!e(t))throw Error("Can only get text value of a text node");return o(t).getOr("")},getOption:o,set:(t,o)=>{if(!e(t))throw Error("Can only set raw text value of a text node");t.dom.nodeValue=o}}})(X);var t_=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];let tD=(e,t,o,l)=>{var r,n;let a=t(e,o);return r=(o,l)=>{let r=t(e,l);return tN(e,o,r)},n=a,((e,t)=>{for(let o=e.length-1;o>=0;o--)t(e[o],o)})(l,(e,t)=>{n=r(n,e)}),n},tN=(e,t,o)=>t.bind(t=>o.filter(g(e.eq,t))),tI={up:u({selector:em,closest:ep,predicate:ec,all:(e,t)=>{let o=c(t)?t:f,l=e.dom,r=[];for(;null!==l.parentNode&&void 0!==l.parentNode;){let e=l.parentNode,t=$.fromDom(e);if(r.push(t),!0===o(t))break;l=e}return r}}),down:u({selector:eC,predicate:ew}),styles:u({get:eP,getRaw:eE,set:(e,t,o)=>{((e,t,o)=>{if(!r(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),Error("CSS value must be a string: "+o);eM(e)&&e.style.setProperty(t,o)})(e.dom,t,o)},remove:(e,t)=>{var o;eM(o=e.dom)&&o.style.removeProperty(t),eR(ex(e,"style").map(eD),"")&&eA(e,"style")}}),attrs:u({get:eT,set:(e,t,o)=>{ev(e.dom,t,o)},remove:eA,copyTo:(e,t)=>{((e,t)=>{let o=e.dom;v(t,(e,t)=>{ev(o,t,e)})})(t,B(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}))}}),insert:u({before:tv,after:tT,afterAll:tA,append:tx,appendAll:(e,t)=>{k(t,t=>{tx(e,t)})},prepend:(e,t)=>{w.from(e.dom.childNodes[0]).map($.fromDom).fold(()=>{tx(e,t)},o=>{e.dom.insertBefore(t.dom,o.dom)})},wrap:(e,t)=>{tv(e,t),tx(t,e)}}),remove:u({unwrap:e=>{let t=er(e);t.length>0&&tA(e,t),tR(e)},remove:tR}),create:u({nu:$.fromTag,clone:e=>$.fromDom(e.dom.cloneNode(!1)),text:$.fromText}),query:u({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:e=>w.from(e.dom.previousSibling).map($.fromDom),nextSibling:el}),property:u({children:er,name:G,parent:eo,document:e=>et(e).dom,isText:X,isComment:e=>8===K(e)||"#comment"===G(e),isElement:Q,isSpecial:e=>{let t=G(e);return N(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>Q(e)?ex(e,"lang"):w.none(),getText:e=>tO.get(e),setText:(e,t)=>tO.set(e,t),isBoundary:e=>!!Q(e)&&("body"===G(e)||N(t_,G(e))),isEmptyTag:e=>!!Q(e)&&N(["br","img","hr","input"],G(e)),isNonEditable:e=>Q(e)&&"false"===eT(e,"contenteditable")}),eq:U,is:z},tM=e=>em(e,"table"),tP=(e,t,o)=>eu(e,t).bind(t=>eu(e,o).bind(e=>{var o;return((o=[t,e]).length>0?tD(tI,(e,t)=>tM(t),o[0],o.slice(1)):w.none()).map(o=>({first:t,last:e,table:o}))})),tk=e=>P(e,$.fromDom),tE="data-mce-selected",tB="data-mce-first-selected",tF="data-mce-last-selected",tq={selected:tE,selectedSelector:"td["+tE+"],th["+tE+"]",firstSelected:tB,firstSelectedSelector:"td["+tB+"],th["+tB+"]",lastSelected:tF,lastSelectedSelector:"td["+tF+"],th["+tF+"]"},tL=e=>(t,o)=>{let l=G(t),r="col"===l||"colgroup"===l?eV(t).bind(e=>((e,t)=>{let o=eC(e,t);return o.length>0?w.some(o):w.none()})(e,tq.firstSelectedSelector)).fold(u(t),e=>e[0]):t;return ep(r,e,o)},tH=tL("th,td,caption"),tj=tL("th,td"),tV=e=>tk(e.model.table.getSelectedCells()),t$=(e,t)=>{let o=tj(e),l=o.bind(e=>eV(e)).map(e=>e$(e));return eO(o,l,(e,o)=>E(o,o=>I(tk(o.dom.cells),o=>"1"===eT(o,t)||U(o,e)))).getOr([])},tz=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],tW=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,tU=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,tG=e=>(e_(e,"#")?e.substring(1):e).toUpperCase(),tK=e=>{let t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},tJ=e=>({value:tG(tK(e.red)+tK(e.green)+tK(e.blue))}),tQ=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,tX=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,tY=(e,t,o,l)=>({red:e,green:t,blue:o,alpha:l}),tZ=(e,t,o,l)=>{let r=parseInt(e,10),n=parseInt(t,10),a=parseInt(o,10),s=parseFloat(l);return tY(r,n,a,s)},t0=e=>{if("transparent"===e)return w.some(tY(0,0,0,0));let t=tQ.exec(e);if(null!==t)return w.some(tZ(t[1],t[2],t[3],"1"));let o=tX.exec(e);return null!==o?w.some(tZ(o[1],o[2],o[3],o[4])):w.none()},t1=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},t2=(e,t,o)=>l=>{let r=(e=>{let t=t1(w.none()),o=()=>t.get().each(e);return{clear:()=>{o(),t.set(w.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{o(),t.set(w.some(e))}}})(e=>e.unbind()),n=!eN(o),a=()=>{let a=tV(e),s=l=>e.formatter.match(t,{value:o},l.dom,n);n?(l.setActive(!I(a,s)),r.set(e.formatter.formatChanged(t,e=>l.setActive(!e),!0))):(l.setActive(L(a,s)),r.set(e.formatter.formatChanged(t,l.setActive,!1,{value:o})))};return e.initialized?a():e.on("init",a),r.clear},t3=e=>O(e,"menu"),t4=e=>P(e,e=>{let t=e.text||e.title||"";return t3(e)?{text:t,items:t4(e.menu)}:{text:t,value:e.value}}),t5=(e,t,o,l)=>P(t,t=>{let r=t.text||t.title;return t3(t)?{type:"nestedmenuitem",text:r,getSubmenuItems:()=>t5(e,t.menu,o,l)}:{text:r,type:"togglemenuitem",onAction:()=>l(t.value),onSetup:t2(e,o,t.value)}}),t6=(e,t)=>o=>{e.execCommand("mceTableApplyCellStyle",!1,{[t]:o})},t9=e=>q(e,e=>t3(e)?[{...e,menu:t9(e.menu)}]:eN(e.value)?[e]:[]),t8=(e,t,o,l)=>r=>r(t5(e,t,o,l)),t7=(e,t,o)=>{let l=P(t,e=>{var t,o;return{text:e.title,value:"#"+((o=t=e.value,tW.test(o)||tU.test(o))?w.some({value:tG(t)}):w.none()).orThunk(()=>t0(t).map(tJ)).getOrThunk(()=>{let e=document.createElement("canvas");e.height=1,e.width=1;let o=e.getContext("2d");o.clearRect(0,0,e.width,e.height),o.fillStyle="#FFFFFF",o.fillStyle=t,o.fillRect(0,0,1,1);let l=o.getImageData(0,0,1,1).data,r=l[0],n=l[1],a=l[2],s=l[3];return tJ(tY(r,n,a,s))}).value,type:"choiceitem"}});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:l.length>0?l:void 0,allowCustomColors:!1},onAction:t=>{let l="remove"===t.value?"":t.value;e.execCommand("mceTableApplyCellStyle",!1,{[o]:l})}}]},oe=e=>()=>{let t="header"===e.queryCommandValue("mceTableRowType")?"body":"header";e.execCommand("mceTableRowType",!1,{type:t})},ot=e=>()=>{let t="th"===e.queryCommandValue("mceTableColType")?"td":"th";e.execCommand("mceTableColType",!1,{type:t})},oo=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:tz}],ol=e=>oo.concat((e=>{let t=t4(tm(e));return t.length>0?w.some({name:"class",type:"listbox",label:"Class",items:t}):w.none()})(e).toArray()),or=(e,t)=>{let o=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(t4(tl(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===t?[{name:"borderwidth",type:"input",label:"Border width"}].concat(o):o}},on=(e,t)=>{let o=e.dom;return{setAttrib:(e,l)=>{o.setAttrib(t,e,l)},setStyle:(e,l)=>{o.setStyle(t,e,l)},setFormat:(o,l)=>{""===l?e.formatter.remove(o,{value:null},t,!0):e.formatter.apply(o,{value:l},t)}}},oa=ee("th"),os=(e,t)=>e&&t?"sectionCells":e?"section":"cells",oi=e=>{let t=P(e,e=>(e=>{let t="thead"===e.section,o=eR((e=>{let t=E(e,e=>oa(e.element));return 0===t.length?w.some("td"):t.length===e.length?w.some("th"):w.none()})(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||o?{type:"header",subType:os(t,o)}:{type:"body"}})(e).type),o=N(t,"header"),l=N(t,"footer");if(o||l){let e=N(t,"body");return!o||e||l?o||e||!l?w.none():w.some("footer"):w.some("header")}return w.some("body")},oc=(e,t)=>j(e.all,e=>F(e.cells,e=>U(t,e.element))),om=(e,t,o)=>{let l=(e=>{let t=[],o=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(o);return t})(P(t.selection,t=>((e,t,o=f)=>o(t)?w.none():N(e,G(t))?w.some(t):em(t,e.join(","),e=>z(e,"table")||o(e)))(["td","th"],t,void 0).bind(t=>oc(e,t)).filter(o)));return l.length>0?w.some(l):w.none()},od=(e,t)=>om(e,t,y),ou=(e,t)=>L(t,t=>oc(e,t).exists(e=>!e.isLocked)),op=(e,t)=>(0,t.mergable).filter(t=>ou(e,t.cells)),ob=(e,t)=>(0,t.unmergable).filter(t=>ou(e,t)),og=((e=>{if(!n(e))throw Error("cases must be an array");if(0===e.length)throw Error("there must be at least one case");let t=[],o={};k(e,(l,r)=>{let a=S(l);if(1!==a.length)throw Error("one and only one name per case");let s=a[0],i=l[s];if(void 0!==o[s])throw Error("duplicate key detected:"+s);if("cata"===s)throw Error("cannot have a case named cata (sorry)");if(!n(i))throw Error("case arguments must be an array");t.push(s),o[s]=(...o)=>{let l=o.length;if(l!==i.length)throw Error("Wrong number of arguments to case "+s+". Expected "+i.length+" ("+i+"), got "+l);return{fold:(...t)=>{if(t.length!==e.length)throw Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[r].apply(null,o)},match:e=>{let l=S(e);if(t.length!==l.length)throw Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+l.join(","));if(!L(t,e=>N(l,e)))throw Error("Not all branches were specified when using match. Specified: "+l.join(", ")+"\nRequired: "+t.join(", "));return e[s].apply(null,o)},log:e=>{console.log(e,{constructors:t,constructor:s,params:o})}}}})})([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),(e,t)=>{let o=eJ(e);return od(o,t).bind(e=>{let t=e[e.length-1],l=e[0].row,r=t.row+t.rowspan,n=o.all.slice(l,r);return oi(n)}).getOr("")}),oh=e=>e_(e,"rgb")?t0(e).map(tJ).map(e=>"#"+e.value).getOr(e):e,of=e=>{let t=$.fromDom(e);return{borderwidth:eE(t,"border-width").getOr(""),borderstyle:eE(t,"border-style").getOr(""),bordercolor:eE(t,"border-color").map(oh).getOr(""),backgroundcolor:eE(t,"background-color").map(oh).getOr("")}},oy=e=>{let t=e[0],o=e.slice(1);return k(o,e=>{k(S(t),o=>{v(e,(e,l)=>{let r=t[o];""!==r&&o===l&&r!==e&&(t[o]="")})})}),t},ow=(e,t,o,l)=>F(e,e=>!s(o.formatter.matchNode(l,t+e))).getOr(""),oS=g(ow,["left","center","right"],"align"),oC=g(ow,["top","middle","bottom"],"valign"),ov=e=>eV($.fromDom(e)).map(t=>{let o={selection:tk(e.cells)};return og(t,o)}).getOr(""),oT=(e,t)=>{let o=eJ(e),l=q(o.all,e=>e.cells),r=E(l,e=>I(t,t=>U(e.element,t)));return P(r,e=>({element:e.element.dom,column:eY(o,e.column).map(e=>e.element.dom)}))},ox=(e,t,o,l)=>{let r=l.getData();l.close(),e.undoManager.transact(()=>{((e,t,o,l)=>{let r=T(l,(e,t)=>o[t]!==e);x(r)>0&&t.length>=1&&eV(t[0]).each(o=>{let n=oT(o,t),a=x(T(r,(e,t)=>"scope"!==t&&"celltype"!==t))>0,s=R(r,"celltype");(a||R(r,"scope"))&&((e,t,o,l)=>{let r=1===t.length;k(t,t=>{var n,a;let s=t.element,i=r?y:l,c=on(e,s);n=t.column.map(t=>on(e,t)).getOr(c),i("scope")&&c.setAttrib("scope",o.scope),i("class")&&c.setAttrib("class",o.class),i("height")&&c.setStyle("height",ef(o.height)),i("width")&&n.setStyle("width",ef(o.width)),tr(e)&&(i("backgroundcolor")&&c.setFormat("tablecellbackgroundcolor",o.backgroundcolor),i("bordercolor")&&c.setFormat("tablecellbordercolor",o.bordercolor),i("borderstyle")&&c.setFormat("tablecellborderstyle",o.borderstyle),i("borderwidth")&&c.setFormat("tablecellborderwidth",ef(o.borderwidth))),l("halign")&&e1(e,s,o.halign),l("valign")&&(a=o.valign,eZ.each("top middle bottom".split(" "),t=>{t!==a&&e.formatter.remove("valign"+t,{},s)}),a&&e.formatter.apply("valign"+a,{},s))})})(e,n,l,g(R,r)),s&&((e,t)=>{e.execCommand("mceTableCellType",!1,{type:t.celltype,no_events:!0})})(e,l),e2(e,o.dom,{structure:s,style:a})})})(e,t,o,r),e.focus()})},oA=e=>{let t=tV(e);if(0===t.length)return;let o=((e,t)=>{let o=eV(t[0]).map(o=>P(oT(o,t),t=>((e,t,o,l)=>{let r=e.dom,n=(e,t)=>r.getStyle(e,t)||r.getAttrib(e,t);return{width:n(l.getOr(t),"width"),height:n(t,"height"),scope:r.getAttrib(t,"scope"),celltype:t.nodeName.toLowerCase(),class:r.getAttrib(t,"class",""),halign:oS(e,t),valign:oC(e,t),...o?of(t):{}}})(e,t.element,tr(e),t.column)));return oy(o.getOrDie())})(e,t),l={type:"tabpanel",tabs:[{title:"General",name:"general",items:ol(e)},or(e,"cell")]},r={type:"panel",items:[{type:"grid",columns:2,items:ol(e)}]};e.windowManager.open({title:"Cell Properties",size:"normal",body:tr(e)?l:r,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onSubmit:g(ox,e,t,o)})},oR=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],oO=e=>oR.concat((e=>{let t=t4(td(e));return t.length>0?w.some({name:"class",type:"listbox",label:"Class",items:t}):w.none()})(e).toArray()),o_=(e,t,o,l)=>{let r=l.getData();l.close(),e.undoManager.transact(()=>{((e,t,o,l)=>{let r=T(l,(e,t)=>o[t]!==e);if(x(r)>0){let o=R(r,"type"),n=!o||x(r)>1;n&&((e,t,o,l)=>{let r=1===t.length?y:l;k(t,t=>{let n=on(e,t);r("class")&&n.setAttrib("class",o.class),r("height")&&n.setStyle("height",ef(o.height)),tn(e)&&(r("backgroundcolor")&&n.setStyle("background-color",o.backgroundcolor),r("bordercolor")&&n.setStyle("border-color",o.bordercolor),r("borderstyle")&&n.setStyle("border-style",o.borderstyle)),l("align")&&e1(e,t,o.align)})})(e,t,l,g(R,r)),o&&((e,t)=>{e.execCommand("mceTableRowType",!1,{type:t.type,no_events:!0})})(e,l),eV($.fromDom(t[0])).each(t=>e2(e,t.dom,{structure:o,style:n}))}})(e,t,o,r),e.focus()})},oD=e=>{let t=t$(ey(e),tq.selected);if(0===t.length)return;let o=P(t,t=>((e,t,o)=>{let l=e.dom;return{height:l.getStyle(t,"height")||l.getAttrib(t,"height"),class:l.getAttrib(t,"class",""),type:ov(t),align:oS(e,t),...o?of(t):{}}})(e,t.dom,tn(e))),l=oy(o),r={type:"tabpanel",tabs:[{title:"General",name:"general",items:oO(e)},or(e,"row")]},n={type:"panel",items:[{type:"grid",columns:2,items:oO(e)}]};e.windowManager.open({title:"Row Properties",size:"normal",body:tn(e)?r:n,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:l,onSubmit:g(o_,e,P(t,e=>e.dom),l)})},oN=(e,t,o)=>{let l=ts(e)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],r=t.length>0?[{type:"listbox",name:"class",label:"Class",items:t}]:[];return(o?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[]).concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(l).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(r)},oI=(e,t,o,l)=>{if("TD"===t.tagName||"TH"===t.tagName)r(o)&&i(l)?e.setStyle(t,o,l):e.setStyles(t,o);else if(t.children)for(let r=0;r<t.children.length;r++)oI(e,t.children[r],o,l)},oM=(e,t,o,l)=>{let r=e.dom,n=l.getData(),a=T(n,(e,t)=>o[t]!==e);l.close(),""===n.class&&delete n.class,e.undoManager.transact(()=>{if(!t){let o=eI(n.cols).getOr(1),l=eI(n.rows).getOr(1);e.execCommand("mceInsertTable",!1,{rows:l,columns:o}),t=tj(ey(e),eh(e)).bind(t=>eV(t,eh(e))).map(e=>e.dom).getOrDie()}if(x(a)>0){let o={border:R(a,"border"),bordercolor:R(a,"bordercolor"),cellpadding:R(a,"cellpadding")};((e,t,o,l)=>{var r;let n=e.dom,a={},i={},c=tc(e),m=ta(e);if(s(o.class)||(a.class=o.class),i.height=ef(o.height),c?i.width=ef(o.width):n.getAttrib(t,"width")&&(a.width=(r=o.width)?r.replace(/px$/,""):""),c?(i["border-width"]=ef(o.border),i["border-spacing"]=ef(o.cellspacing)):(a.border=o.border,a.cellpadding=o.cellpadding,a.cellspacing=o.cellspacing),c&&t.children){let e={};if(l.border&&(e["border-width"]=ef(o.border)),l.cellpadding&&(e.padding=ef(o.cellpadding)),m&&l.bordercolor&&(e["border-color"]=o.bordercolor),!(e=>{for(let t in e)if(C.call(e,t))return!1;return!0})(e))for(let o=0;o<t.children.length;o++)oI(n,t.children[o],e)}m&&(i["background-color"]=o.backgroundcolor,i["border-color"]=o.bordercolor,i["border-style"]=o.borderstyle),a.style=n.serializeStyle({...ty(e),...i}),n.setAttribs(t,{...tw(e),...a})})(e,t,n,o);let l=r.select("caption",t)[0];(l&&!n.caption||!l&&n.caption)&&e.execCommand("mceTableToggleCaption"),e1(e,t,n.align)}if(e.focus(),e.addVisual(),x(a)>0){let o=R(a,"caption"),l=!o||x(a)>1;e2(e,t,{structure:o,style:l})}})},oP=(e,t)=>{let o=e.dom,l,r=((e,t)=>{let o=ty(e),l=tw(e),r=t?{borderstyle:A(o,"border-style").getOr(""),bordercolor:oh(A(o,"border-color").getOr("")),backgroundcolor:oh(A(o,"background-color").getOr(""))}:{};return{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:"",...o,...l,...r,...(()=>{let t=o["border-width"];return tc(e)&&t?{border:t}:A(l,"border").fold(()=>({}),e=>({border:e}))})(),...{...A(o,"border-spacing").or(A(l,"cellspacing")).fold(()=>({}),e=>({cellspacing:e})),...A(o,"border-padding").or(A(l,"cellpadding")).fold(()=>({}),e=>({cellpadding:e}))}}})(e,ta(e));t?(r.cols="1",r.rows="1",ta(e)&&(r.borderstyle="",r.bordercolor="",r.backgroundcolor="")):(l=o.getParent(e.selection.getStart(),"table",e.getBody()))?r=((e,t,o)=>{let l=e.dom,r=tc(e)?l.getStyle(t,"border-spacing")||l.getAttrib(t,"cellspacing"):l.getAttrib(t,"cellspacing")||l.getStyle(t,"border-spacing"),n=tc(e)?e0(l,t,"padding")||l.getAttrib(t,"cellpadding"):l.getAttrib(t,"cellpadding")||e0(l,t,"padding");return{width:l.getStyle(t,"width")||l.getAttrib(t,"width"),height:l.getStyle(t,"height")||l.getAttrib(t,"height"),cellspacing:null!=r?r:"",cellpadding:null!=n?n:"",border:((t,o)=>{let l=eE($.fromDom(o),"border-width");return tc(e)&&l.isSome()?l.getOr(""):t.getAttrib(o,"border")||e0(e.dom,o,"border-width")||e0(e.dom,o,"border")||""})(l,t),caption:!!l.select("caption",t)[0],class:l.getAttrib(t,"class",""),align:oS(e,t),...o?of(t):{}}})(e,l,ta(e)):ta(e)&&(r.borderstyle="",r.bordercolor="",r.backgroundcolor="");let n=t4(tu(e));n.length>0&&r.class&&(r.class=r.class.replace(/\s*mce\-item\-table\s*/g,""));let a={type:"grid",columns:2,items:oN(e,n,t)},s=ta(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[a]},or(e,"table")]}:{type:"panel",items:[a]};e.windowManager.open({title:"Table Properties",size:"normal",body:s,onSubmit:g(oM,e,l,r),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r})},ok=e=>{v({mceTableProps:g(oP,e,!1),mceTableRowProps:g(oD,e),mceTableCellProps:g(oA,e),mceInsertTableDialog:g(oP,e,!0)},(t,o)=>e.addCommand(o,()=>{ei((e,t)=>t(e),ec,ey(e),ee("table"),void 0).forall(eb)&&t()}))},oE=e=>{let t=(e,t)=>ex(e,t).exists(e=>parseInt(e,10)>1);return e.length>0&&L(e,e=>t(e,"rowspan")||t(e,"colspan"))?w.some(e):w.none()},oB=(e,t,o)=>t.length<=1?w.none():tP(e,o.firstSelectedSelector,o.lastSelectedSelector).bind(t=>{let o=t=>U(e,t),l="thead,tfoot,tbody,table",r=em(t.first,l,o),n=em(t.last,l,o);return r.bind(e=>n.bind(o=>U(e,o)?((e,t,o)=>{let l=eJ(e);return tC(l,t,o)})(t.table,t.first,t.last):w.none()))}).map(e=>({bounds:e,cells:t})),oF=e=>{let t=t1(w.none()),o=t1([]),l=w.none(),r=ee("caption"),n=e=>l.forall(t=>!t[e]),a=()=>tH(ey(e),eh(e)).bind(t=>eO(eV(t),tH($.fromDom(e.selection.getEnd()),eh(e)).bind(eV),(o,l)=>{var n;return U(o,l)?r(t)?w.some({element:t,mergable:w.none(),unmergable:w.none(),selection:[t]}):w.some({element:t,mergable:oB(o,n=tV(e),tq),unmergable:oE(n),selection:p(n)}):w.none()}).bind(p)),s=e=>eV(e.element).map(t=>{let o=eJ(t),l=od(o,e).getOr([]),r=B(l,(e,t)=>(t.isLocked&&(e.onAny=!0,0===t.column?e.onFirst=!0:t.column+t.colspan>=o.grid.columns&&(e.onLast=!0)),e),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:op(o,e).isSome(),unmergeable:ob(o,e).isSome(),locked:r}}),i=()=>{let e,r;t.set((r=!1,(...t)=>(r||(r=!0,e=a.apply(null,t)),e))()),l=t.get().bind(s),k(o.get(),h)},c=e=>(e(),o.set(o.get().concat([e])),()=>{o.set(E(o.get(),t=>t!==e))}),m=(o,l)=>c(()=>t.get().fold(()=>{o.setEnabled(!1)},t=>{o.setEnabled(!l(t)&&e.selection.isEditable())})),d=(o,l,r)=>c(()=>t.get().fold(()=>{o.setEnabled(!1),o.setActive(!1)},t=>{o.setEnabled(!l(t)&&e.selection.isEditable()),o.setActive(r(t))})),u=e=>l.exists(t=>t.locked[e]),b=(t,o)=>l=>d(l,e=>r(e.element),()=>e.queryCommandValue(t)===o),g=b("mceTableRowType","header"),y=b("mceTableColType","th");return e.on("NodeChange ExecCommand TableSelectorChange",i),{onSetupTable:e=>m(e,e=>!1),onSetupCellOrRow:e=>m(e,e=>r(e.element)),onSetupColumn:e=>t=>m(t,t=>r(t.element)||u(e)),onSetupPasteable:e=>t=>m(t,t=>r(t.element)||e().isNone()),onSetupPasteableColumn:(e,t)=>o=>m(o,o=>r(o.element)||e().isNone()||u(t)),onSetupMergeable:e=>m(e,e=>n("mergeable")),onSetupUnmergeable:e=>m(e,e=>n("unmergeable")),resetTargets:i,onSetupTableWithCaption:t=>d(t,f,t=>eV(t.element,eh(e)).exists(e=>ed(e,"caption").isSome())),onSetupTableRowHeaders:g,onSetupTableColumnHeaders:y,targets:t.get}};var oq=tinymce.util.Tools.resolve("tinymce.FakeClipboard");let oL="x-tinymce/dom-table-",oH=oL+"rows",oj=oL+"columns",oV=e=>{var t;let o=null!==(t=oq.read())&&void 0!==t?t:[];return j(o,t=>w.from(t.getType(e)))},o$=()=>oV(oH),oz=()=>oV(oj),oW=e=>t=>{let o=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",o),o(),()=>{e.off("NodeChange",o)}},oU=e=>t=>{let o=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",o),o(),()=>{e.off("NodeChange",o)}};t.add("table",e=>{let t=oF(e);(e=>{let t=e.options.register;t("table_border_widths",{processor:"object[]",default:e6}),t("table_border_styles",{processor:"object[]",default:e9}),t("table_cell_advtab",{processor:"boolean",default:!0}),t("table_row_advtab",{processor:"boolean",default:!0}),t("table_advtab",{processor:"boolean",default:!0}),t("table_appearance_options",{processor:"boolean",default:!0}),t("table_grid",{processor:"boolean",default:!e5.deviceType.isTouch()}),t("table_cell_class_list",{processor:"object[]",default:[]}),t("table_row_class_list",{processor:"object[]",default:[]}),t("table_class_list",{processor:"object[]",default:[]}),t("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),t("table_background_color_map",{processor:"object[]",default:[]}),t("table_border_color_map",{processor:"object[]",default:[]})})(e),ok(e),((e,t)=>{let o=t=>()=>e.execCommand(t),l=(t,l)=>!!e.queryCommandSupported(l.command)&&(e.ui.registry.addMenuItem(t,{...l,onAction:c(l.onAction)?l.onAction:o(l.command)}),!0),r=(t,l)=>{e.queryCommandSupported(l.command)&&e.ui.registry.addToggleMenuItem(t,{...l,onAction:c(l.onAction)?l.onAction:o(l.command)})},n=t=>{e.execCommand("mceInsertTable",!1,{rows:t.numRows,columns:t.numColumns})},a=[l("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:t.onSetupCellOrRow}),l("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:t.onSetupCellOrRow}),l("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:t.onSetupCellOrRow}),l("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:t.onSetupCellOrRow}),l("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:t.onSetupCellOrRow}),l("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:t.onSetupCellOrRow}),l("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:t.onSetupPasteable(o$)}),l("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:t.onSetupPasteable(o$)})],s=[l("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:t.onSetupColumn("onFirst")}),l("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:t.onSetupColumn("onLast")}),l("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:t.onSetupColumn("onAny")}),l("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:t.onSetupColumn("onAny")}),l("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:t.onSetupColumn("onAny")}),l("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:t.onSetupPasteableColumn(oz,"onFirst")}),l("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:t.onSetupPasteableColumn(oz,"onLast")})],i=[l("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:t.onSetupCellOrRow}),l("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:t.onSetupMergeable}),l("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:t.onSetupUnmergeable})];ti(e)?e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:n}],onSetup:oU(e)}):e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTableDialog"),onSetup:oU(e)}),e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTableDialog"),onSetup:oU(e)}),l("tableprops",{text:"Table properties",onSetup:t.onSetupTable,command:"mceTableProps"}),l("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,command:"mceTableDelete"}),N(a,!0)&&e.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:u("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),N(s,!0)&&e.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:u("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),N(i,!0)&&e.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:u("tablecellprops tablemergecells tablesplitcells")}),e.ui.registry.addContextMenu("table",{update:()=>(t.resetTargets(),t.targets().fold(u(""),e=>"caption"===G(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});let m=t9(tu(e));0!==m.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>t5(e,m,"tableclass",t=>e.execCommand("mceTableToggleClass",!1,t)),onSetup:t.onSetupTable});let d=t9(tm(e));0!==d.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>t5(e,d,"tablecellclass",t=>e.execCommand("mceTableCellToggleClass",!1,t)),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>t5(e,tz,"tablecellverticalalign",t6(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>t5(e,to(e),"tablecellborderwidth",t6(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>t5(e,tl(e),"tablecellborderstyle",t6(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>t7(e,tb(e),"background-color"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>t7(e,tg(e),"border-color"),onSetup:t.onSetupCellOrRow})),r("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),r("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:oe(e),onSetup:t.onSetupTableRowHeaders}),r("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:ot(e),onSetup:t.onSetupTableRowHeaders})})(e,t),((e,t)=>{e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:oW(e),fetch:e=>e("inserttable | cell row column | advtablesort | tableprops deletetable")});let o=t=>()=>e.execCommand(t),l=(t,l)=>{e.queryCommandSupported(l.command)&&e.ui.registry.addButton(t,{...l,onAction:c(l.onAction)?l.onAction:o(l.command)})},r=(t,l)=>{e.queryCommandSupported(l.command)&&e.ui.registry.addToggleButton(t,{...l,onAction:c(l.onAction)?l.onAction:o(l.command)})};l("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:t.onSetupTable}),l("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:t.onSetupTable}),l("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),l("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:t.onSetupMergeable}),l("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),l("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),l("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),l("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),l("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),l("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:t.onSetupColumn("onFirst")}),l("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:t.onSetupColumn("onLast")}),l("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:t.onSetupColumn("onAny")}),l("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:t.onSetupCellOrRow}),l("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:t.onSetupCellOrRow}),l("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:t.onSetupPasteable(o$)}),l("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:t.onSetupPasteable(o$)}),l("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:t.onSetupColumn("onAny")}),l("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:t.onSetupColumn("onAny")}),l("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:t.onSetupPasteableColumn(oz,"onFirst")}),l("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:t.onSetupPasteableColumn(oz,"onLast")}),l("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:oW(e)});let n=t9(tu(e));0!==n.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:t8(e,n,"tableclass",t=>e.execCommand("mceTableToggleClass",!1,t)),onSetup:t.onSetupTable});let a=t9(tm(e));0!==a.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:t8(e,a,"tablecellclass",t=>e.execCommand("mceTableCellToggleClass",!1,t)),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:t8(e,tz,"tablecellverticalalign",t6(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:t8(e,to(e),"tablecellborderwidth",t6(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:t8(e,tl(e),"tablecellborderstyle",t6(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:t=>t(t7(e,tb(e),"background-color")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:t=>t(t7(e,tg(e),"border-color")),onSetup:t.onSetupCellOrRow})),r("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),r("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:oe(e),onSetup:t.onSetupTableRowHeaders}),r("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:ot(e),onSetup:t.onSetupTableColumnHeaders})})(e,t),(e=>{let t=tp(e);t.length>0&&e.ui.registry.addContextToolbar("table",{predicate:t=>e.dom.is(t,"table")&&e.getBody().contains(t)&&e.dom.isEditable(t.parentNode),items:t,scope:"node",position:"node"})})(e)})}();