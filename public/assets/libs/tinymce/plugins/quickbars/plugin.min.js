!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");let t=e=>t=>typeof t===e,r=e=>"string"===(e=>{var t,r;let o=typeof e;return null===e?"null":"object"===o&&Array.isArray(e)?"array":"object"===o&&((t=String).prototype.isPrototypeOf(e)||(null===(r=e.constructor)||void 0===r?void 0:r.name)===t.name)?"string":o})(e),o=t("boolean"),i=t("function"),n=e=>t=>t.options.get(e),a=n("quickbars_selection_toolbar"),l=n("quickbars_insert_toolbar"),s=n("quickbars_image_toolbar"),u=0;var c=tinymce.util.Tools.resolve("tinymce.util.Delay");let d=e=>{e.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:()=>{new Promise(t=>{let r=!1,o=document.createElement("input");o.type="file",o.accept="image/*",o.style.position="fixed",o.style.left="0",o.style.top="0",o.style.opacity="0.001",document.body.appendChild(o);let i=e=>{var i;r||(null===(i=o.parentNode)||void 0===i||i.removeChild(o),r=!0,t(e))},n=e=>{i(Array.prototype.slice.call(e.target.files))};o.addEventListener("input",n),o.addEventListener("change",n);let a=t=>{let o=()=>{i([])};r||("focusin"===t.type?c.setEditorTimeout(e,o,1e3):o()),e.off("focusin remove",a)};e.on("focusin remove",a),o.click()}).then(t=>{if(t.length>0){let r=t[0];new Promise(e=>{let t=new FileReader;t.onloadend=()=>{e(t.result.split(",")[1])},t.readAsDataURL(r)}).then(t=>{((e,t,r)=>{let o=e.editorUpload.blobCache,i=o.create((e=>{let t=(new Date).getTime();return"mceu_"+Math.floor(1e9*Math.random())+ ++u+String(t)})(),r,t);o.add(i),e.insertContent(e.dom.createHTML("img",{src:i.blobUri()}))})(e,t,r)})}})}}),e.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:()=>{((e,t,r)=>{e.execCommand("mceInsertTable",!1,{rows:2,columns:2})})(e)}})},m=()=>!1;class h{constructor(e,t){this.tag=e,this.value=t}static some(e){return new h(!0,e)}static none(){return h.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?h.some(e(this.value)):h.none()}bind(e){return this.tag?e(this.value):h.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:h.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return null==e?h.none():h.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}h.singletonNone=new h(!1),"undefined"!=typeof window?window:Function("return this;")();var g=(e,t,r,o,n)=>e(r,o)?h.some(r):i(n)&&n(r)?h.none():t(r,o,n);let b=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},p=(e,t)=>{let r=e.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},v=(e,t,r)=>{let o=e.dom,n=i(r)?r:m;for(;o.parentNode;){o=o.parentNode;let e=b(o);if(t(e))return h.some(e);if(n(e))break}return h.none()},f=(e,t,r)=>v(e,e=>p(e,t),r),y=e=>{let t=l(e);t.length>0&&e.ui.registry.addContextToolbar("quickblock",{predicate:t=>{let r=b(t),o=e.schema.getTextBlockElements(),i=t=>t.dom===e.getBody();return!((e,t)=>{let r=e.dom;return!(!r||!r.hasAttribute)&&r.hasAttribute("data-mce-bogus")})(r)&&g((e,t)=>p(e,t),f,r,'table,[data-mce-bogus="all"]',i).fold(()=>g((e,t)=>t(e),v,r,t=>t.dom.nodeName.toLowerCase() in o&&e.dom.isEmpty(t.dom),i).isSome(),m)},items:t,position:"line",scope:"editor"})};e.add("quickbars",e=>{(e=>{let t=e.options.register,i=e=>t=>{let i=o(t)||r(t);return i?o(t)?{value:t?e:"",valid:i}:{value:t.trim(),valid:i}:{valid:!1,message:"Must be a boolean or string."}},n="bold italic | quicklink h2 h3 blockquote";t("quickbars_selection_toolbar",{processor:i(n),default:n});let a="quickimage quicktable";t("quickbars_insert_toolbar",{processor:i(a),default:a});let l="alignleft aligncenter alignright";t("quickbars_image_toolbar",{processor:i(l),default:l})})(e),d(e),y(e),(e=>{let t=t=>e.dom.isEditable(t),r=e=>"IMG"===e.nodeName||"FIGURE"===e.nodeName&&/image/i.test(e.className)&&t(e.parentElement),o=s(e);o.length>0&&e.ui.registry.addContextToolbar("imageselection",{predicate:r,items:o,position:"node"});let i=a(e);i.length>0&&e.ui.registry.addContextToolbar("textselection",{predicate:o=>!r(o)&&!e.selection.isCollapsed()&&t(o),items:i,position:"selection",scope:"editor"})})(e)})}();