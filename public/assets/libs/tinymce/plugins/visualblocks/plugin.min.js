!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");let t=(e,t,o)=>{e.dom.toggleClass(e.getBody(),"mce-visualblocks"),o.set(!o.get()),((e,t)=>{e.dispatch("VisualBlocks",{state:t})})(e,o.get())},o=e=>e.options.get("visualblocks_default_state"),s=(e,t)=>o=>{o.setActive(t.get());let s=e=>o.setActive(e.state);return e.on("VisualBlocks",s),()=>e.off("VisualBlocks",s)};e.add("visualblocks",(e,l)=>{let i;(e=>{(0,e.options.register)("visualblocks_default_state",{processor:"boolean",default:!1})})(e);let a=(i=!1,{get:()=>i,set:e=>{i=e}});((e,o,s)=>{e.addCommand("mceVisualBlocks",()=>{t(e,0,s)})})(e,0,a),((e,t)=>{let o=()=>e.execCommand("mceVisualBlocks");e.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:o,onSetup:s(e,t)}),e.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:o,onSetup:s(e,t)})})(e,a),e.on("PreviewFormats AfterPreviewFormats",t=>{a.get()&&e.dom.toggleClass(e.getBody(),"mce-visualblocks","afterpreviewformats"===t.type)}),e.on("init",()=>{o(e)&&t(e,0,a)})})}();