!function(){"use strict";let e=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}};var t=tinymce.util.Tools.resolve("tinymce.PluginManager");let s=(e,t)=>{e.dispatch("VisualBlocks",{state:t})},o=(e,t,o)=>{let l=e.dom;l.toggleClass(e.getBody(),"mce-visualblocks"),o.set(!o.get()),s(e,o.get())},l=(e,t,s)=>{e.addCommand("mceVisualBlocks",()=>{o(e,t,s)})},i=e=>{let t=e.options.register;t("visualblocks_default_state",{processor:"boolean",default:!1})},a=e=>e.options.get("visualblocks_default_state"),c=(e,t,s)=>{e.on("PreviewFormats AfterPreviewFormats",t=>{s.get()&&e.dom.toggleClass(e.getBody(),"mce-visualblocks","afterpreviewformats"===t.type)}),e.on("init",()=>{a(e)&&o(e,t,s)})},u=(e,t)=>s=>{s.setActive(t.get());let o=e=>s.setActive(e.state);return e.on("VisualBlocks",o),()=>e.off("VisualBlocks",o)},r=(e,t)=>{let s=()=>e.execCommand("mceVisualBlocks");e.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:s,onSetup:u(e,t)}),e.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:s,onSetup:u(e,t)})};t.add("visualblocks",(t,s)=>{i(t);let o=e(!1);l(t,s,o),r(t,o),c(t,s,o)})}();