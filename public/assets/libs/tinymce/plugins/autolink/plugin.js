!function(){"use strict";var e,t=tinymce.util.Tools.resolve("tinymce.PluginManager");let n=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,r=e=>t=>t.options.get(e),o=e=>{let t=e.options.register;t("autolink_pattern",{processor:"regexp",default:RegExp("^"+n().source+"$","i")}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"})},l=r("autolink_pattern"),a=r("link_default_target"),i=r("link_default_protocol"),s=r("allow_unsafe_link_target"),d=(e,t,n)=>{var r;return!!n(e,t.prototype)||(null===(r=e.constructor)||void 0===r?void 0:r.name)===t.name},u=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&d(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},c=e=>"string"===u(e),g=(e=void 0,t=>e===t),f=e=>null==e,k=e=>!f(e),p=e=>t=>!e(t),m=Object.hasOwnProperty,y=(e,t)=>m.call(e,t),h=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,w=(e,t,n=0,r)=>{let o=e.indexOf(t,n);return -1!==o&&(!!g(r)||o+t.length<=r)},v=(e,t)=>h(e,t,0),_=e=>"\uFEFF"===e,A=e=>e.replace(/\uFEFF/g,"");var C=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");let b=e=>3===e.nodeType,E=e=>1===e.nodeType,$=e=>/^[(\[{ \u00a0]$/.test(e),x=e=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(e),P=e=>/[?!,.;:]/.test(e),z=(e,t,n)=>{for(let r=t-1;r>=0;r--){let t=e.charAt(r);if(!_(t)&&n(t))return r}return -1},F=(e,t)=>{let n=e,r=t;for(;E(n)&&n.childNodes[r];)r=b(n=n.childNodes[r])?n.data.length:n.childNodes.length;return{container:n,offset:r}},N=(e,t)=>{var n;let r=e.schema.getVoidElements(),o=l(e),{dom:a,selection:s}=e;if(null!==a.getParent(s.getNode(),"a[href]"))return null;let d=s.getRng(),u=C(a,e=>a.isBlock(e)||y(r,e.nodeName.toLowerCase())||"false"===a.getContentEditable(e)),{container:c,offset:g}=F(d.endContainer,d.endOffset),f=null!==(n=a.getParent(c,a.isBlock))&&void 0!==n?n:a.getRoot(),k=u.backwards(c,g+t,(e,t)=>{let n=e.data,r=z(n,t,p($));return -1===r||P(n[r])?r:r+1},f);if(!k)return null;let m=k.container,h=u.backwards(k.container,k.offset,(e,t)=>{m=e;let n=z(e.data,t,$);return -1===n?n:n+1},f),_=a.createRng();h?_.setStart(h.container,h.offset):_.setStart(m,0),_.setEnd(k.container,k.offset);let b=A(_.toString()),E=b.match(o);if(!E)return null;{let t=E[0];if(v(t,"www.")){let n=i(e);t=n+"://"+t}else w(t,"@")&&!x(t)&&(t="mailto:"+t);return{rng:_,url:t}}},T=(e,t)=>{let{dom:n,selection:r}=e,{rng:o,url:l}=t,i=r.getBookmark();r.setRng(o);let d="createlink",u={command:d,ui:!1,value:l},g=e.dispatch("BeforeExecCommand",u);if(!g.isDefaultPrevented()){e.getDoc().execCommand(d,!1,l),e.dispatch("ExecCommand",u);let t=a(e);if(c(t)){let o=r.getNode();n.setAttrib(o,"target",t),"_blank"!==t||s(e)||n.setAttrib(o,"rel","noopener")}}r.moveToBookmark(i),e.nodeChanged()},Z=e=>{let t=N(e,-1);k(t)&&T(e,t)},B=e=>{let t=N(e,0);k(t)&&T(e,t)},O=e=>{e.on("keydown",t=>{13!==t.keyCode||t.isDefaultPrevented()||B(e)}),e.on("keyup",t=>{32===t.keyCode?Z(e):(48===t.keyCode&&t.shiftKey||221===t.keyCode)&&Z(e)})};t.add("autolink",e=>{o(e),O(e)})}();