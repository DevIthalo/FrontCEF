!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");let t=(e,t,r)=>{var o;return!!r(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},r=e=>{let r=typeof e;return null===e?"null":"object"===r&&Array.isArray(e)?"array":"object"===r&&t(e,String,(e,t)=>t.isPrototypeOf(e))?"string":r},o=e=>t=>typeof t===e,n=e=>"string"===r(e),l=o("boolean"),i=e=>null==e,s=e=>!i(e),a=o("function"),u=o("number"),d=(e,t)=>r=>e(t(r)),m=()=>!1;class c{constructor(e,t){this.tag=e,this.value=t}static some(e){return new c(!0,e)}static none(){return c.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?c.some(e(this.value)):c.none()}bind(e){return this.tag?e(this.value):c.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:c.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return s(e)?c.some(e):c.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}c.singletonNone=new c(!1);let h=(e,t)=>{let r=e.length,o=Array(r);for(let n=0;n<r;n++){let r=e[n];o[n]=t(r,n)}return o},g=(e,t)=>{for(let r=0,o=e.length;r<o;r++){let o=e[r];t(o,r)}},f=(e,t)=>{let r=[];for(let o=0,n=e.length;o<n;o++){let n=e[o];t(n,o)&&r.push(n)}return r},v=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},y={fromHtml:(e,t)=>{let r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return v(r.childNodes[0])},fromTag:(e,t)=>{let r=(t||document).createElement(e);return v(r)},fromText:(e,t)=>{let r=(t||document).createTextNode(e);return v(r)},fromDom:v,fromPoint:(e,t,r)=>c.from(e.dom.elementFromPoint(t,r)).map(v)},p=(e,t)=>{let r=e.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw Error("Browser lacks native selectors")};"undefined"!=typeof window?window:Function("return this;")();let w=e=>{let t=e.dom.nodeName;return t.toLowerCase()},N=e=>e.dom.nodeType,b=e=>t=>N(t)===e,D=b(1),S=b(3),T=b(9),E=b(11),A=e=>y.fromDom(e.dom.ownerDocument),C=e=>c.from(e.dom.parentNode).map(y.fromDom),M=e=>h(e.dom.childNodes,y.fromDom),L=(e,t,r)=>{if(n(r)||l(r)||u(r))e.setAttribute(t,r+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),Error("Attribute value was not simple")},O=(e,t,r)=>{L(e.dom,t,r)},k=(e,t)=>{e.dom.removeAttribute(t)},P=e=>E(e)&&s(e.dom.host),R=a(Element.prototype.attachShadow)&&a(Node.prototype.getRootNode),x=R?e=>y.fromDom(e.dom.getRootNode()):e=>T(e)?e:A(e),B=e=>{let t=x(e);return P(t)?c.some(t):c.none()},V=e=>y.fromDom(e.dom.host),H=e=>{let t=S(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return B(y.fromDom(t)).fold(()=>r.body.contains(t),d(H,V))},j=(e,t,r)=>{let o=e.dom,n=a(r)?r:m;for(;o.parentNode;){o=o.parentNode;let e=y.fromDom(o);if(t(e))return c.some(e);if(n(e))break}return c.none()},z=(e,t,r)=>j(e,e=>p(e,t),r),F=e=>void 0!==e.style&&a(e.style.getPropertyValue),I=(e,t)=>{let r=e.dom,o=window.getComputedStyle(r),n=o.getPropertyValue(t);return""!==n||H(e)?n:K(r,t)},K=(e,t)=>F(e)?e.style.getPropertyValue(t):"",U=e=>"rtl"===I(e,"direction")?"rtl":"ltr",$=(e,t)=>f(M(e),t),q=(e,t)=>$(e,e=>p(e,t)),G=e=>C(e).filter(D),J=(e,t)=>{let r=t?z(e,"ol,ul"):c.some(e);return r.getOr(e)},Q=e=>D(e)&&"li"===w(e),W=(e,t,r)=>{g(t,t=>{let o=y.fromDom(t),n=Q(o),l=J(o,n),i=G(l);i.each(t=>{e.setStyle(l.dom,"direction",null);let o=U(t);if(o===r?k(l,"dir"):O(l,"dir",r),U(l)!==r&&e.setStyle(l.dom,"direction",r),n){let t=q(l,"li[dir],li[style]");g(t,t=>{k(t,"dir"),e.setStyle(t.dom,"direction",null)})}})})},X=(e,t)=>{e.selection.isEditable()&&(W(e.dom,e.selection.getSelectedBlocks(),t),e.nodeChanged())},Y=e=>{e.addCommand("mceDirectionLTR",()=>{X(e,"ltr")}),e.addCommand("mceDirectionRTL",()=>{X(e,"rtl")})},Z=(e,t)=>r=>{let o=o=>{let n=y.fromDom(o.element);r.setActive(U(n)===t),r.setEnabled(e.selection.isEditable())};return e.on("NodeChange",o),r.setEnabled(e.selection.isEditable()),()=>e.off("NodeChange",o)},_=e=>{e.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>e.execCommand("mceDirectionLTR"),onSetup:Z(e,"ltr")}),e.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>e.execCommand("mceDirectionRTL"),onSetup:Z(e,"rtl")})};e.add("directionality",e=>{Y(e),_(e)})}();