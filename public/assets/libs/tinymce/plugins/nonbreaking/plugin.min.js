!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");let n=e=>n=>typeof n===e,a=n("boolean"),o=n("number"),t=e=>n=>n.options.get(e),i=t("nonbreaking_force_tab"),r=t("nonbreaking_wrap"),s=(e,n)=>{let a="";for(let o=0;o<n;o++)a+=e;return a},l=(e,n)=>{let a=r(e)||e.plugins.visualchars?`<span class="${e.plugins.visualchars&&e.plugins.visualchars.isEnabled()?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap"}" contenteditable="false">${s("&nbsp;",n)}</span>`:s("&nbsp;",n);e.undoManager.transact(()=>e.insertContent(a))};var u=tinymce.util.Tools.resolve("tinymce.util.VK");let c=e=>n=>{let a=()=>{n.setEnabled(e.selection.isEditable())};return e.on("NodeChange",a),a(),()=>{e.off("NodeChange",a)}};e.add("nonbreaking",e=>{(e=>{let n=e.options.register;n("nonbreaking_force_tab",{processor:e=>a(e)?{value:e?3:0,valid:!0}:o(e)?{value:e,valid:!0}:{valid:!1,message:"Must be a boolean or number."},default:!1}),n("nonbreaking_wrap",{processor:"boolean",default:!0})})(e),(e=>{e.addCommand("mceNonBreaking",()=>{l(e,1)})})(e),(e=>{let n=()=>e.execCommand("mceNonBreaking");e.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:n,onSetup:c(e)}),e.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:n,onSetup:c(e)})})(e),(e=>{let n=i(e);n>0&&e.on("keydown",a=>{a.keyCode!==u.TAB||a.isDefaultPrevented()||a.shiftKey||(a.preventDefault(),a.stopImmediatePropagation(),l(e,n))})})(e)})}();