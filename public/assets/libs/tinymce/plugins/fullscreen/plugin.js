!function(){"use strict";let e,t;let r=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}};var n,o=tinymce.util.Tools.resolve("tinymce.PluginManager");let l=e=>({isFullscreen:()=>null!==e.get()}),i=(e,t,r)=>{var n;return!!r(e,t.prototype)||(null===(n=e.constructor)||void 0===n?void 0:n.name)===t.name},s=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&i(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},a=e=>t=>s(t)===e,u=e=>t=>typeof t===e,m=e=>t=>e===t,d=a("string"),c=a("array"),h=m(null),f=u("boolean"),g=m(void 0),p=e=>null==e,v=e=>!p(e),w=u("function"),b=u("number"),y=()=>{},S=(e,t)=>(...r)=>e(t.apply(null,r)),x=(e,t)=>r=>e(t(r)),E=e=>()=>e,F=E(!1),T=E(!0);class O{constructor(e,t){this.tag=e,this.value=t}static some(e){return new O(!0,e)}static none(){return O.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?O.some(e(this.value)):O.none()}bind(e){return this.tag?e(this.value):O.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:O.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return v(e)?O.some(e):O.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}O.singletonNone=new O(!1);let k=e=>{let t=r(O.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(O.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{n(),t.set(O.some(e))}}},C=()=>k(e=>e.unbind()),D=()=>{let e=k(y);return{...e,on:t=>e.get().each(t)}},A=(e,t)=>{let r=null;return{cancel:()=>{h(r)||(clearTimeout(r),r=null)},throttle:(...n)=>{h(r)&&(r=setTimeout(()=>{r=null,e.apply(null,n)},t))}}},R=Array.prototype.push,N=(e,t)=>{let r=e.length,n=Array(r);for(let o=0;o<r;o++){let r=e[o];n[o]=t(r,o)}return n},L=(e,t)=>{for(let r=0,n=e.length;r<n;r++){let n=e[r];t(n,r)}},M=(e,t)=>{let r=[];for(let n=0,o=e.length;n<o;n++){let o=e[n];t(o,n)&&r.push(o)}return r},P=(e,t,r)=>{for(let n=0,o=e.length;n<o;n++){let o=e[n];if(t(o,n))return O.some(o);if(r(o,n))break}return O.none()},H=(e,t)=>P(e,t,F),W=e=>{let t=[];for(let r=0,n=e.length;r<n;++r){if(!c(e[r]))throw Error("Arr.flatten item "+r+" was not an array, input: "+e);R.apply(t,e[r])}return t},q=(e,t)=>W(N(e,t)),I=(e,t)=>t>=0&&t<e.length?O.some(e[t]):O.none(),B=e=>I(e,0),V=(e,t)=>{for(let r=0;r<e.length;r++){let n=t(e[r],r);if(n.isSome())return n}return O.none()},_=Object.keys,j=(e,t)=>{let r=_(e);for(let n=0,o=r.length;n<o;n++){let o=r[n],l=e[o];t(l,o)}},z=(e,t,r=0,n)=>{let o=e.indexOf(t,r);return -1!==o&&(!!g(n)||o+t.length<=n)},$=e=>void 0!==e.style&&w(e.style.getPropertyValue),U=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},K={fromHtml:(e,t)=>{let r=t||document,n=r.createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return U(n.childNodes[0])},fromTag:(e,t)=>{let r=t||document,n=r.createElement(e);return U(n)},fromText:(e,t)=>{let r=t||document,n=r.createTextNode(e);return U(n)},fromDom:U,fromPoint:(e,t,r)=>O.from(e.dom.elementFromPoint(t,r)).map(U)};"undefined"!=typeof window?window:Function("return this;")();let X=e=>e.dom.nodeType,Y=e=>t=>X(t)===e,G=Y(1),J=Y(3),Q=Y(9),Z=Y(11),ee=(e,t)=>{let r=e.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},et=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,er=(e,t)=>{let r=void 0===t?document:t.dom;return et(r)?[]:N(r.querySelectorAll(e),K.fromDom)},en=(e,t)=>e.dom===t.dom,eo=e=>K.fromDom(e.dom.ownerDocument),el=e=>O.from(e.dom.parentNode).map(K.fromDom),ei=(e,t)=>{let r=w(t)?t:F,n=e.dom,o=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){let e=n.parentNode,t=K.fromDom(e);if(o.push(t),!0===r(t))break;n=e}return o},es=e=>el(e).map(ea).map(t=>M(t,t=>!en(e,t))).getOr([]),ea=e=>N(e.dom.childNodes,K.fromDom),eu=e=>Z(e)&&v(e.dom.host),em=w(Element.prototype.attachShadow)&&w(Node.prototype.getRootNode),ed=E(em),ec=em?e=>K.fromDom(e.dom.getRootNode()):e=>Q(e)?e:eo(e),eh=e=>{let t=ec(e);return eu(t)?O.some(t):O.none()},ef=e=>K.fromDom(e.dom.host),eg=e=>{if(ed()&&v(e.target)){let t=K.fromDom(e.target);if(G(t)&&ep(t)&&e.composed&&e.composedPath){let t=e.composedPath();if(t)return B(t)}}return O.from(e.target)},ep=e=>v(e.dom.shadowRoot),ev=e=>{let t=J(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return eh(K.fromDom(t)).fold(()=>r.body.contains(t),x(ev,ef))},ew=e=>{let t=e.dom.body;if(null==t)throw Error("Body is not available yet");return K.fromDom(t)},eb=(e,t,r)=>{if(d(r)||f(r)||b(r))e.setAttribute(t,r+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),Error("Attribute value was not simple")},ey=(e,t,r)=>{eb(e.dom,t,r)},eS=(e,t)=>{let r=e.dom.getAttribute(t);return null===r?void 0:r},ex=(e,t)=>{e.dom.removeAttribute(t)},eE=(e,t,r)=>{if(!d(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),Error("CSS value must be a string: "+r);$(e)&&e.style.setProperty(t,r)},eF=(e,t)=>{let r=e.dom;j(t,(e,t)=>{eE(r,t,e)})},eT=(e,t)=>{let r=e.dom,n=window.getComputedStyle(r),o=n.getPropertyValue(t);return""!==o||ev(e)?o:eO(r,t)},eO=(e,t)=>$(e)?e.style.getPropertyValue(t):"",ek=(e,t,r,n,o,l,i)=>({target:e,x:t,y:r,stop:n,prevent:o,kill:l,raw:i}),eC=e=>{let t=K.fromDom(eg(e).getOr(e.target)),r=()=>e.stopPropagation(),n=()=>e.preventDefault(),o=S(n,r);return ek(t,e.clientX,e.clientY,r,n,o,e)},eD=(e,t)=>r=>{e(r)&&t(eC(r))},eA=(e,t,r,n,o)=>{let l=eD(r,n);return e.dom.addEventListener(t,l,o),{unbind:function(e,...t){return(...r)=>{let n=t.concat(r);return e.apply(null,n)}}(eN,e,t,l,o)}},eR=(e,t,r,n)=>eA(e,t,r,n,!1),eN=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},eL=(e,t,r)=>eR(e,t,T,r),eM=(e,t,r,n)=>{let o=e.isiOS()&&!0===/ipad/i.test(r),l=e.isiOS()&&!o,i=e.isiOS()||e.isAndroid(),s=i||n("(pointer:coarse)"),a=o||!l&&i&&n("(min-device-width:768px)"),u=l||i&&!a,m=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r),d=!u&&!a&&!m;return{isiPad:E(o),isiPhone:E(l),isTablet:E(a),isPhone:E(u),isTouch:E(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:E(m),isDesktop:E(d)}},eP=(e,t)=>{for(let r=0;r<e.length;r++){let n=e[r];if(n.test(t))return n}},eH=(e,t)=>{let r=eP(e,t);if(!r)return{major:0,minor:0};let n=e=>Number(t.replace(r,"$"+e));return eq(n(1),n(2))},eW=()=>eq(0,0),eq=(e,t)=>({major:e,minor:t}),eI={nu:eq,detect:(e,t)=>{let r=String(t).toLowerCase();return 0===e.length?eW():eH(e,r)},unknown:eW},eB=(e,t)=>V(t.brands,t=>{let r=t.brand.toLowerCase();return H(e,e=>{var t;return r===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:eI.nu(parseInt(t.version,10),0)}))}),eV=(e,t)=>{let r=String(t).toLowerCase();return H(e,e=>e.search(r))},e_=(e,t)=>eV(e,t).map(e=>{let r=eI.detect(e.versionRegexes,t);return{current:e.name,version:r}}),ej=(e,t)=>eV(e,t).map(e=>{let r=eI.detect(e.versionRegexes,t);return{current:e.name,version:r}}),ez=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,e$=e=>t=>z(t,e),eU=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>z(e,"edge/")&&z(e,"chrome")&&z(e,"safari")&&z(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ez],search:e=>z(e,"chrome")&&!z(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>z(e,"msie")||z(e,"trident")},{name:"Opera",versionRegexes:[ez,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:e$("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:e$("firefox")},{name:"Safari",versionRegexes:[ez,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(z(e,"safari")||z(e,"mobile/"))&&z(e,"applewebkit")}],eK=[{name:"Windows",search:e$("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>z(e,"iphone")||z(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:e$("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:e$("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:e$("linux"),versionRegexes:[]},{name:"Solaris",search:e$("sunos"),versionRegexes:[]},{name:"FreeBSD",search:e$("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:e$("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],eX={browsers:E(eU),oses:E(eK)},eY="Edge",eG="Chromium",eJ="Opera",eQ="Firefox",eZ="Safari",e0=e=>{let t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isEdge:n(eY),isChromium:n(eG),isIE:n("IE"),isOpera:n(eJ),isFirefox:n(eQ),isSafari:n(eZ)}},e9={unknown:()=>e0({current:void 0,version:eI.unknown()}),nu:e0,edge:E(eY),chromium:E(eG),ie:E("IE"),opera:E(eJ),firefox:E(eQ),safari:E(eZ)},e1="Windows",e5="Android",e2="Linux",e3="macOS",e6="Solaris",e7="FreeBSD",e8="ChromeOS",e4=e=>{let t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isWindows:n(e1),isiOS:n("iOS"),isAndroid:n(e5),isMacOS:n(e3),isLinux:n(e2),isSolaris:n(e6),isFreeBSD:n(e7),isChromeOS:n(e8)}},te={unknown:()=>e4({current:void 0,version:eI.unknown()}),nu:e4,windows:E(e1),ios:E("iOS"),android:E(e5),linux:E(e2),macos:E(e3),solaris:E(e6),freebsd:E(e7),chromeos:E(e8)},tt={detect:(e,t,r)=>{let n=eX.browsers(),o=eX.oses(),l=t.bind(e=>eB(n,e)).orThunk(()=>e_(n,e)).fold(e9.unknown,e9.nu),i=ej(o,e).fold(te.unknown,te.nu),s=eM(i,l,e,r);return{browser:l,os:i,deviceType:s}}},tr=e=>window.matchMedia(e).matches,tn=(n=()=>tt.detect(navigator.userAgent,O.from(navigator.userAgentData),tr),t=!1,(...r)=>(t||(t=!0,e=n.apply(null,r)),e)),to=()=>tn(),tl=(e,t)=>({left:e,top:t,translate:(r,n)=>tl(e+r,t+n)}),ti=e=>{let t=void 0!==e?e.dom:document,r=t.body.scrollLeft||t.documentElement.scrollLeft,n=t.body.scrollTop||t.documentElement.scrollTop;return tl(r,n)},ts=e=>{let t=void 0===e?window:e;return to().browser.isFirefox()?O.none():O.from(t.visualViewport)},ta=(e,t,r,n)=>({x:e,y:t,width:r,height:n,right:e+r,bottom:t+n}),tu=e=>{let t=void 0===e?window:e,r=t.document,n=ti(K.fromDom(r));return ts(t).fold(()=>{let e=t.document.documentElement,r=e.clientWidth,o=e.clientHeight;return ta(n.left,n.top,r,o)},e=>ta(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height))},tm=(e,t,r)=>ts(r).map(r=>{let n=e=>t(eC(e));return r.addEventListener(e,n),{unbind:()=>r.removeEventListener(e,n)}}).getOrThunk(()=>({unbind:y}));var td=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),tc=tinymce.util.Tools.resolve("tinymce.Env");let th=(e,t)=>{e.dispatch("FullscreenStateChanged",{state:t}),e.dispatch("ResizeEditor")},tf=e=>{let t=e.options.register;t("fullscreen_native",{processor:"boolean",default:!1})},tg=e=>e.options.get("fullscreen_native"),tp=e=>{let t=K.fromDom(e.getElement());return eh(t).map(ef).getOrThunk(()=>ew(eo(t)))},tv=e=>void 0!==e.fullscreenElement?e.fullscreenElement:void 0!==e.msFullscreenElement?e.msFullscreenElement:void 0!==e.webkitFullscreenElement?e.webkitFullscreenElement:null,tw=()=>void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",tb=e=>{let t=e.dom;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()},ty=e=>{let t=e.dom;t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitCancelFullScreen&&t.webkitCancelFullScreen()},tS=e=>e.dom===tv(eo(e).dom),tx=(e,t,r)=>M(ei(e,r),t),tE=(e,t)=>M(es(e),t),tF=e=>er(e),tT=(e,t,r)=>tx(e,e=>ee(e,t),r),tO=(e,t)=>tE(e,e=>ee(e,t)),tk="data-ephox-mobile-fullscreen-style",tC="position:absolute!important;",tD="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",tA=tc.os.isAndroid(),tR=e=>{let t=eT(e,"background-color");return void 0!==t&&""!==t?"background-color:"+t+"!important":"background-color:rgb(255,255,255)!important;"},tN=(e,t,r)=>{let n=t=>r=>{let n=eS(r,"style"),o=void 0===n?"no-styles":n.trim();o!==t&&(ey(r,tk,o),eF(r,e.parseStyle(t)))},o=tT(t,"*"),l=q(o,e=>tO(e,"*:not(.tox-silver-sink)")),i=tR(r);L(l,n("display:none!important;")),L(o,n(tC+tD+i));let s=!0===tA?"":tC;n(s+tD+i)(t)},tL=e=>{let t=tF("["+tk+"]");L(t,t=>{let r=eS(t,tk);r&&"no-styles"!==r?eF(t,e.parseStyle(r)):ex(t,"style"),ex(t,tk)})},tM=td.DOM,tP=()=>tu(window),tH=e=>window.scrollTo(e.x,e.y),tW=ts().fold(()=>({bind:y,unbind:y}),e=>{let t=D(),r=C(),n=C(),o=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},l=()=>{window.requestAnimationFrame(()=>{t.on(t=>eF(t,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"}))})},i=A(()=>{o(),l()},50);return{bind:e=>{t.set(e),i.throttle(),r.set(tm("resize",i.throttle)),n.set(tm("scroll",i.throttle))},unbind:()=>{t.on(()=>{r.clear(),n.clear()}),t.clear()}}}),tq=(e,t)=>{let r=document.body,n=document.documentElement,o=e.getContainer(),l=K.fromDom(o),i=tp(e),s=t.get(),a=K.fromDom(e.getBody()),u=tc.deviceType.isTouch(),m=o.style,d=e.iframeElement,c=null==d?void 0:d.style,h=e=>{e(r,"tox-fullscreen"),e(n,"tox-fullscreen"),e(o,"tox-fullscreen"),eh(l).map(e=>ef(e).dom).each(t=>{e(t,"tox-fullscreen"),e(t,"tox-shadowhost")})},f=()=>{u&&tL(e.dom),h(tM.removeClass),tW.unbind(),O.from(t.get()).each(e=>e.fullscreenChangeHandler.unbind())};if(s)s.fullscreenChangeHandler.unbind(),tg(e)&&tS(i)&&ty(eo(i)),c.width=s.iframeWidth,c.height=s.iframeHeight,m.width=s.containerWidth,m.height=s.containerHeight,m.top=s.containerTop,m.left=s.containerLeft,f(),tH(s.scrollPos),t.set(null),th(e,!1),e.off("remove",f);else{let r=eL(eo(i),tw(),r=>{tg(e)&&!tS(i)&&null!==t.get()&&tq(e,t)}),n={scrollPos:tP(),containerWidth:m.width,containerHeight:m.height,containerTop:m.top,containerLeft:m.left,iframeWidth:c.width,iframeHeight:c.height,fullscreenChangeHandler:r};u&&tN(e.dom,l,a),c.width=c.height="100%",m.width=m.height="",h(tM.addClass),tW.bind(l),e.on("remove",f),t.set(n),tg(e)&&tb(i),th(e,!0)}},tI=(e,t)=>{e.addCommand("mceFullScreen",()=>{tq(e,t)})},tB=(e,t)=>r=>{r.setActive(null!==t.get());let n=e=>r.setActive(e.state);return e.on("FullscreenStateChanged",n),()=>e.off("FullscreenStateChanged",n)},tV=(e,t)=>{let r=()=>e.execCommand("mceFullScreen");e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:r,onSetup:tB(e,t)}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:r,onSetup:tB(e,t)})};o.add("fullscreen",e=>{let t=r(null);return e.inline||(tf(e),tI(e,t),tV(e,t),e.addShortcut("Meta+Shift+F","","mceFullScreen")),l(t)})}();