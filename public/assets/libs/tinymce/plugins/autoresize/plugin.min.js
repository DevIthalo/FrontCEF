!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env");let i=e=>t=>t.options.get(e),o=i("min_height"),s=i("max_height"),n=i("autoresize_overflow_padding"),l=i("autoresize_bottom_margin"),r=(e,t)=>{let i=e.getBody();i&&(i.style.overflowY=t?"":"hidden",t||(i.scrollTop=0))},g=(e,t,i,o)=>{var s;let n=parseInt(null!==(s=e.getStyle(t,i,o))&&void 0!==s?s:"",10);return isNaN(n)?0:n},a=(e,i,l,d)=>{var f;let u=e.dom,m=e.getDoc();if(!m)return;if(e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen())return void r(e,!0);let h=m.documentElement,c=d?d():n(e),p=null!==(f=o(e))&&void 0!==f?f:e.getElement().offsetHeight,y=p,S=g(u,h,"margin-top",!0),v=g(u,h,"margin-bottom",!0),C=h.offsetHeight+S+v+c;C<0&&(C=0);let b=e.getContainer().offsetHeight-e.getContentAreaContainer().offsetHeight;C+b>p&&(y=C+b);let w=s(e);if(w&&y>w?(y=w,r(e,!0)):r(e,!1),y!==i.get()){let o=y-i.get();if(u.setStyle(e.getContainer(),"height",y+"px"),i.set(y),(e=>{e.dispatch("ResizeEditor")})(e),t.browser.isSafari()&&(t.os.isMacOS()||t.os.isiOS())){let t=e.getWin();t.scrollTo(t.pageXOffset,t.pageYOffset)}e.hasFocus()&&"setcontent"===(null==l?void 0:l.type.toLowerCase())&&(!0===l.selection||!0===l.paste)&&e.selection.scrollIntoView(),(t.browser.isSafari()||t.browser.isChromium())&&o<0&&a(e,i,l,d)}};e.add("autoresize",e=>{if((e=>{let t=e.options.register;t("autoresize_overflow_padding",{processor:"number",default:1}),t("autoresize_bottom_margin",{processor:"number",default:50})})(e),e.options.isSet("resize")||e.options.set("resize",!1),!e.inline){let i,o,s,r;let g=(i=0,{get:()=>i,set:e=>{i=e}});((e,t)=>{e.addCommand("mceAutoResize",()=>{a(e,t)})})(e,g),r=()=>l(e),e.on("init",i=>{o=0;let s=n(e),l=e.dom;l.setStyles(e.getDoc().documentElement,{height:"auto"}),t.browser.isEdge()||t.browser.isIE()?l.setStyles(e.getBody(),{paddingLeft:s,paddingRight:s,"min-height":0}):l.setStyles(e.getBody(),{paddingLeft:s,paddingRight:s}),a(e,g,i,r),o+=1}),e.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",t=>{if(1===o)s=e.getContainer().offsetHeight,a(e,g,t,r),o+=1;else if(2===o){let t=s<e.getContainer().offsetHeight;if(t){let t=e.dom,i=e.getDoc();t.setStyles(i.documentElement,{"min-height":0}),t.setStyles(e.getBody(),{"min-height":"inherit"})}r=t?()=>0:r,o+=1}else a(e,g,t,r)})}})}();