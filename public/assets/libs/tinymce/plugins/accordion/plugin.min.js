!function(){"use strict";var e,t=tinymce.util.Tools.resolve("tinymce.PluginManager");let o=0,r=e=>t=>typeof t===e,n=e=>"string"===(e=>{var t,o;let r=typeof e;return null===e?"null":"object"===r&&Array.isArray(e)?"array":"object"===r&&((t=String).prototype.isPrototypeOf(e)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name)?"string":r})(e),l=r("boolean"),i=e=>null==e,a=e=>!i(e),d=r("function"),s=r("number"),m=e=>()=>e,c=(e,t)=>e===t,u=m(!1);class p{constructor(e,t){this.tag=e,this.value=t}static some(e){return new p(!0,e)}static none(){return p.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?p.some(e(this.value)):p.none()}bind(e){return this.tag?e(this.value):p.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:p.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return a(e)?p.some(e):p.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}p.singletonNone=new p(!1);let g=Array.prototype.indexOf,h=(e,t)=>g.call(e,t)>-1,f=(e,t)=>{let o=e.length,r=Array(o);for(let n=0;n<o;n++){let o=e[n];r[n]=t(o,n)}return r},y=(e,t)=>{for(let o=0,r=e.length;o<r;o++)t(e[o],o)},v=Object.keys;"undefined"!=typeof window?window:Function("return this;")();let b=e=>e.dom.nodeName.toLowerCase(),N=e=>e.dom.nodeType,w=e=>t=>N(t)===e,T=w(1),A=w(3),C=w(9),S=w(11),x=(e,t,o)=>{if(!(n(o)||l(o)||s(o)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),Error("Attribute value was not simple");e.setAttribute(t,o+"")},D=(e,t)=>{let o=e.dom.getAttribute(t);return null===o?void 0:o},E=(e,t)=>p.from(D(e,t)),M=(e,t)=>{e.dom.removeAttribute(t)},P=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},k={fromHtml:(e,t)=>{let o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return P(o.childNodes[0])},fromTag:(e,t)=>{let o=(t||document).createElement(e);return P(o)},fromText:(e,t)=>{let o=(t||document).createTextNode(e);return P(o)},fromDom:P,fromPoint:(e,t,o)=>p.from(e.dom.elementFromPoint(t,o)).map(P)},O=(e,t)=>{let o=e.dom;if(1!==o.nodeType)return!1;if(void 0!==o.matches)return o.matches(t);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(t);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},B=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,L=(e=/^\s+|\s+$/g,t=>t.replace(e,"")),R=e=>void 0!==e.style&&d(e.style.getPropertyValue),$=e=>C(e)?e:k.fromDom(e.dom.ownerDocument),I=e=>p.from(e.dom.parentNode).map(k.fromDom),V=e=>p.from(e.dom.nextSibling).map(k.fromDom),j=e=>f(e.dom.childNodes,k.fromDom),q=d(Element.prototype.attachShadow)&&d(Node.prototype.getRootNode)?e=>k.fromDom(e.dom.getRootNode()):$,F=e=>k.fromDom(e.dom.host),H=e=>{let t=A(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let o=t.ownerDocument;return(e=>{let t=q(e);return S(t)&&a(t.dom.host)?p.some(t):p.none()})(k.fromDom(t)).fold(()=>o.body.contains(t),e=>H(F(e)))},z=(e,t)=>R(e)?e.style.getPropertyValue(t):"",K=(e,t)=>{I(e).each(o=>{o.dom.insertBefore(t.dom,e.dom)})},U=(e,t)=>{V(e).fold(()=>{I(e).each(e=>{Y(e,t)})},e=>{K(e,t)})},Y=(e,t)=>{e.dom.appendChild(t.dom)},_=(e,t)=>{y(t,(o,r)=>{let n=0===r?e:t[r-1];U(n,o)})},G=(e,t)=>{let o=[];return y(j(e),e=>{t(e)&&(o=o.concat([e])),o=o.concat(G(e,t))}),o},J=(e,t,o)=>{let r=e.dom,n=d(o)?o:u;for(;r.parentNode;){r=r.parentNode;let e=k.fromDom(r);if(t(e))return p.some(e);if(n(e))break}return p.none()},Q=e=>{let t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},W=(e,t,o)=>J(e,e=>O(e,t),o),X=(e,t)=>((e,t)=>{let o=void 0===t?document:t.dom;return B(o)?p.none():p.from(o.querySelector(e)).map(k.fromDom)})(t,e),Z=((e,t)=>{let o=t=>e(t)?p.from(t.dom.nodeValue):p.none();return{get:t=>{if(!e(t))throw Error("Can only get text value of a text node");return o(t).getOr("")},getOption:o,set:(t,o)=>{if(!e(t))throw Error("Can only set raw text value of a text node");t.dom.nodeValue=o}}})(A);var ee=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];let et=(e,t)=>({element:e,offset:t}),eo=(e,t,o)=>e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?o(t).bind(t=>eo(e,t,o).orThunk(()=>p.some(t))):p.none(),er=(e,t)=>e.property().isText(t)?e.property().getText(t).length:e.property().children(t).length,en=(e,t)=>{let o=eo(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(o))return et(o,er(e,o));let r=e.property().children(o);return r.length>0?en(e,r[r.length-1]):et(o,er(e,o))},el={up:m({selector:W,closest:(e,t,o)=>O(e,t)?p.some(e):d(o)&&o(e)?p.none():W(e,t,o),predicate:J,all:(e,t)=>{let o=d(t)?t:u,r=e.dom,n=[];for(;null!==r.parentNode&&void 0!==r.parentNode;){let e=r.parentNode,t=k.fromDom(e);if(n.push(t),!0===o(t))break;r=e}return n}}),down:m({selector:(e,t)=>((e,t)=>{let o=void 0===t?document:t.dom;return B(o)?[]:f(o.querySelectorAll(e),k.fromDom)})(t,e),predicate:G}),styles:m({get:(e,t)=>{let o=e.dom,r=window.getComputedStyle(o).getPropertyValue(t);return""!==r||H(e)?r:z(o,t)},getRaw:(e,t)=>{let o=e.dom,r=z(o,t);return p.from(r).filter(e=>e.length>0)},set:(e,t,o)=>{((e,t,o)=>{if(!n(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),Error("CSS value must be a string: "+o);R(e)&&e.style.setProperty(t,o)})(e.dom,t,o)},remove:(e,t)=>{var o;R(o=e.dom)&&o.style.removeProperty(t),((e,t,o=c)=>e.exists(e=>o(e,"")))(E(e,"style").map(L),0)&&M(e,"style")}}),attrs:m({get:D,set:(e,t,o)=>{x(e.dom,t,o)},remove:M,copyTo:(e,t)=>{var o,r,n;let l=(o=e.dom.attributes,r=(e,t)=>(e[t.name]=t.value,e),n={},y(o,(e,t)=>{n=r(n,e)}),n);((e,t)=>{let o=e.dom;((e,t)=>{let o=v(e);for(let r=0,n=o.length;r<n;r++){let n=o[r];t(e[n],n)}})(t,(e,t)=>{x(o,t,e)})})(t,l)}}),insert:m({before:K,after:U,afterAll:_,append:Y,appendAll:(e,t)=>{y(t,t=>{Y(e,t)})},prepend:(e,t)=>{p.from(e.dom.childNodes[0]).map(k.fromDom).fold(()=>{Y(e,t)},o=>{e.dom.insertBefore(t.dom,o.dom)})},wrap:(e,t)=>{K(e,t),Y(t,e)}}),remove:m({unwrap:e=>{let t=j(e);t.length>0&&_(e,t),Q(e)},remove:Q}),create:m({nu:k.fromTag,clone:e=>k.fromDom(e.dom.cloneNode(!1)),text:k.fromText}),query:m({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:e=>p.from(e.dom.previousSibling).map(k.fromDom),nextSibling:V}),property:m({children:j,name:b,parent:I,document:e=>$(e).dom,isText:A,isComment:e=>8===N(e)||"#comment"===b(e),isElement:T,isSpecial:e=>{let t=b(e);return h(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>T(e)?E(e,"lang"):p.none(),getText:e=>Z.get(e),setText:(e,t)=>Z.set(e,t),isBoundary:e=>!!T(e)&&("body"===b(e)||h(ee,b(e))),isEmptyTag:e=>!!T(e)&&h(["br","img","hr","input"],b(e)),isNonEditable:e=>T(e)&&"false"===D(e,"contenteditable")}),eq:(e,t)=>e.dom===t.dom,is:O},ei="details",ea="mce-accordion",ed="mce-accordion-summary",es="mce-accordion-body";var em=tinymce.util.Tools.resolve("tinymce.util.Tools");let ec=e=>"SUMMARY"===(null==e?void 0:e.nodeName),eu=e=>"DETAILS"===(null==e?void 0:e.nodeName),ep=e=>e.hasAttribute("open"),eg=e=>{let t=e.selection.getNode();return ec(t)||!!e.dom.getParent(t,ec)},eh=e=>!eg(e)&&e.dom.isEditable(e.selection.getNode()),ef=e=>p.from(e.dom.getParent(e.selection.getNode(),eu)),ey=e=>(e.innerHTML='<br data-mce-bogus="1" />',e),ev=e=>ey(e.dom.create("p")),eb=e=>t=>{((e,t)=>{if(ec(null==t?void 0:t.lastChild)){let o=ev(e);t.appendChild(o),e.selection.setCursorLocation(o,0)}})(e,t),((e,t)=>{if(!ec(null==t?void 0:t.firstChild)){let o=ey(e.dom.create("summary"));t.prepend(o),e.selection.setCursorLocation(o,0)}})(e,t)},eN=(e,t)=>{let o=null!=t?t:!ep(e);return o?e.setAttribute("open","open"):e.removeAttribute("open"),o},ew=e=>{e.addCommand("InsertAccordion",()=>(e=>{if(!eh(e))return;let t=k.fromDom(e.getBody()),r=(e=>{let t=(new Date).getTime();return"acc_"+Math.floor(1e9*Math.random())+ ++o+String(t)})(),n=e.dom.encode(e.selection.getRng().toString()||e.translate("Accordion summary...")),l=e.dom.encode(e.translate("Accordion body...")),i=`<summary class="${ed}">${n}</summary>`,a=`<div class="${es}"><p>${l}</p></div>`;e.undoManager.transact(()=>{e.insertContent([`<details data-mce-id="${r}" class="${ea}" open="open">`,i,a,"</details>"].join("")),X(t,`[data-mce-id="${r}"]`).each(t=>{M(t,"data-mce-id"),X(t,"summary").each(t=>{let o=e.dom.createRng(),r=en(el,t);o.setStart(r.element.dom,r.offset),o.setEnd(r.element.dom,r.offset),e.selection.setRng(o)})})})})(e)),e.addCommand("ToggleAccordion",(t,o)=>((e,t)=>{ef(e).each(o=>{((e,t,o)=>{e.dispatch("ToggledAccordion",{element:t,state:o})})(e,o,eN(o,t))})})(e,o)),e.addCommand("ToggleAllAccordions",(t,o)=>((e,t)=>{let o=Array.from(e.getBody().querySelectorAll("details"));0!==o.length&&(y(o,e=>eN(e,null!=t?t:!ep(e))),((e,t,o)=>{e.dispatch("ToggledAllAccordions",{elements:t,state:o})})(e,o,t))})(e,o)),e.addCommand("RemoveAccordion",()=>(e=>{ef(e).each(t=>{let{nextSibling:o}=t;o?(e.selection.select(o,!0),e.selection.collapse(!0)):((e,t)=>{let o=ev(e);t.insertAdjacentElement("afterend",o),e.selection.setCursorLocation(o,0)})(e,t),t.remove()})})(e))};var eT=tinymce.util.Tools.resolve("tinymce.html.Node");let eA=e=>{var t,o;return null!==(o=null===(t=e.attr("class"))||void 0===t?void 0:t.split(" "))&&void 0!==o?o:[]},eC=(e,t)=>{let o=new Set([...eA(e),...t]),r=Array.from(o);r.length>0&&e.attr("class",r.join(" "))},eS=(e,t)=>{let o=((e,o)=>{let r=[];for(let o=0,n=e.length;o<n;o++){let n=e[o];t.has(n)||r.push(n)}return r})(eA(e));e.attr("class",o.length>0?o.join(" "):null)},ex=e=>e.name===ei&&h(eA(e),ea),eD=e=>{let t,o;let r=e.children(),n=[];for(let e=0;e<r.length;e++){let l=r[e];"summary"===l.name&&i(t)?t=l:"div"===l.name&&h(eA(l),es)&&i(o)?o=l:n.push(l)}return{summaryNode:t,wrapperNode:o,otherNodes:n}},eE=e=>{let t=new eT("br",1);t.attr("data-mce-bogus","1"),e.empty(),e.append(t)};var eM=tinymce.util.Tools.resolve("tinymce.util.VK");let eP=e=>t=>{let o=()=>t.setEnabled(eh(e));return e.on("NodeChange",o),()=>e.off("NodeChange",o)};t.add("accordion",e=>{(e=>{let t=()=>e.execCommand("InsertAccordion");e.ui.registry.addButton("accordion",{icon:"accordion",tooltip:"Insert accordion",onSetup:eP(e),onAction:t}),e.ui.registry.addMenuItem("accordion",{icon:"accordion",text:"Accordion",onSetup:eP(e),onAction:t}),e.ui.registry.addToggleButton("accordiontoggle",{icon:"accordion-toggle",tooltip:"Toggle accordion",onAction:()=>e.execCommand("ToggleAccordion")}),e.ui.registry.addToggleButton("accordionremove",{icon:"remove",tooltip:"Delete accordion",onAction:()=>e.execCommand("RemoveAccordion")}),e.ui.registry.addContextToolbar("accordion",{predicate:t=>e.dom.is(t,"details")&&e.getBody().contains(t)&&e.dom.isEditable(t.parentNode),items:"accordiontoggle accordionremove",scope:"node",position:"node"})})(e),ew(e),(e=>{e.on("keydown",t=>{!t.shiftKey&&t.keyCode===eM.ENTER&&eg(e)&&(t.preventDefault(),e.execCommand("ToggleAccordion"))})})(e),e.on("ExecCommand",t=>{let o=t.command.toLowerCase();("delete"===o||"forwarddelete"===o)&&ef(e).isSome()&&em.each(em.grep(e.dom.select("details",e.getBody())),eb(e))}),(e=>{e.on("PreInit",()=>{let{serializer:t,parser:o}=e;o.addNodeFilter(ei,e=>{for(let t=0;t<e.length;t++){let o=e[t];if(ex(o)){let{summaryNode:e,wrapperNode:t,otherNodes:r}=eD(o),n=a(e),l=n?e:new eT("summary",1);i(l.firstChild)&&eE(l),eC(l,[ed]),n||(a(o.firstChild)?o.insert(l,o.firstChild,!0):o.append(l));let d=a(t),s=d?t:new eT("div",1);if(eC(s,[es]),r.length>0)for(let e=0;e<r.length;e++){let t=r[e];s.append(t)}if(i(s.firstChild)){let e=new eT("p",1);eE(e),s.append(e)}d||o.append(s)}}}),t.addNodeFilter(ei,e=>{let t=new Set([ed]);for(let o=0;o<e.length;o++){let r=e[o];if(ex(r)){let{summaryNode:e,wrapperNode:o}=eD(r);a(e)&&eS(e,t),a(o)&&o.unwrap()}}})})})(e)})}();