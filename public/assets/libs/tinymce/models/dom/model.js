!function(){"use strict";var e,t=tinymce.util.Tools.resolve("tinymce.ModelManager");let r=(e,t,r)=>{var l;return!!r(e,t.prototype)||(null===(l=e.constructor)||void 0===l?void 0:l.name)===t.name},l=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&r(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},o=e=>t=>l(t)===e,n=e=>t=>typeof t===e,s=e=>t=>e===t,a=o("string"),i=o("object"),m=o("array"),c=s(null),d=n("boolean"),u=s(void 0),f=e=>null==e,g=e=>!f(e),h=n("function"),p=n("number"),b=()=>{},w=(e,t)=>(...r)=>e(t.apply(null,r)),v=(e,t)=>r=>e(t(r)),y=e=>()=>e,C=e=>e,T=(e,t)=>e===t;function x(e,...t){return(...r)=>{let l=t.concat(r);return e.apply(null,l)}}let S=e=>t=>!e(t),R=e=>()=>{throw Error(e)},D=e=>e(),O=y(!1),k=y(!0);class E{constructor(e,t){this.tag=e,this.value=t}static some(e){return new E(!0,e)}static none(){return E.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?E.some(e(this.value)):E.none()}bind(e){return this.tag?e(this.value):E.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:E.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return g(e)?E.some(e):E.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}E.singletonNone=new E(!1);let A=Array.prototype.slice,B=Array.prototype.indexOf,N=Array.prototype.push,z=(e,t)=>B.call(e,t),_=(e,t)=>z(e,t)>-1,j=(e,t)=>{for(let r=0,l=e.length;r<l;r++){let l=e[r];if(t(l,r))return!0}return!1},W=(e,t)=>{let r=[];for(let l=0;l<e;l++)r.push(t(l));return r},L=(e,t)=>{let r=e.length,l=Array(r);for(let o=0;o<r;o++){let r=e[o];l[o]=t(r,o)}return l},M=(e,t)=>{for(let r=0,l=e.length;r<l;r++){let l=e[r];t(l,r)}},I=(e,t)=>{for(let r=e.length-1;r>=0;r--){let l=e[r];t(l,r)}},P=(e,t)=>{let r=[],l=[];for(let o=0,n=e.length;o<n;o++){let n=e[o],s=t(n,o)?r:l;s.push(n)}return{pass:r,fail:l}},F=(e,t)=>{let r=[];for(let l=0,o=e.length;l<o;l++){let o=e[l];t(o,l)&&r.push(o)}return r},H=(e,t,r)=>(I(e,(e,l)=>{r=t(r,e,l)}),r),$=(e,t,r)=>(M(e,(e,l)=>{r=t(r,e,l)}),r),V=(e,t,r)=>{for(let l=0,o=e.length;l<o;l++){let o=e[l];if(t(o,l))return E.some(o);if(r(o,l))break}return E.none()},q=(e,t)=>V(e,t,O),U=(e,t)=>{for(let r=0,l=e.length;r<l;r++){let l=e[r];if(t(l,r))return E.some(r)}return E.none()},G=e=>{let t=[];for(let r=0,l=e.length;r<l;++r){if(!m(e[r]))throw Error("Arr.flatten item "+r+" was not an array, input: "+e);N.apply(t,e[r])}return t},K=(e,t)=>G(L(e,t)),Y=(e,t)=>{for(let r=0,l=e.length;r<l;++r){let l=e[r];if(!0!==t(l,r))return!1}return!0},J=e=>{let t=A.call(e,0);return t.reverse(),t},Q=(e,t)=>{let r={};for(let l=0,o=e.length;l<o;l++){let o=e[l];r[String(o)]=t(o,l)}return r},X=(e,t)=>{let r=A.call(e,0);return r.sort(t),r},Z=(e,t)=>t>=0&&t<e.length?E.some(e[t]):E.none(),ee=e=>Z(e,0),et=e=>Z(e,e.length-1),er=(e,t)=>{for(let r=0;r<e.length;r++){let l=t(e[r],r);if(l.isSome())return l}return E.none()},el=Object.keys,eo=Object.hasOwnProperty,en=(e,t)=>{let r=el(e);for(let l=0,o=r.length;l<o;l++){let o=r[l],n=e[o];t(n,o)}},es=(e,t)=>ea(e,(e,r)=>({k:r,v:t(e,r)})),ea=(e,t)=>{let r={};return en(e,(e,l)=>{let o=t(e,l);r[o.k]=o.v}),r},ei=e=>(t,r)=>{e[r]=t},em=(e,t,r,l)=>{en(e,(e,o)=>{(t(e,o)?r:l)(e,o)})},ec=(e,t)=>{let r={};return em(e,t,ei(r),b),r},ed=(e,t)=>{let r=[];return en(e,(e,l)=>{r.push(t(e,l))}),r},eu=e=>ed(e,C),ef=(e,t)=>eg(e,t)?E.from(e[t]):E.none(),eg=(e,t)=>eo.call(e,t),eh=(e,t)=>eg(e,t)&&void 0!==e[t]&&null!==e[t],ep=e=>{for(let t in e)if(eo.call(e,t))return!1;return!0},eb="undefined"!=typeof window?window:Function("return this;")(),ew=(e,t)=>{let r=null!=t?t:eb;for(let t=0;t<e.length&&null!=r;++t)r=r[e[t]];return r},ev=(e,t)=>{let r=e.split(".");return ew(r,t)},ey=(e,t)=>ev(e,t),eC=(e,t)=>{let r=ey(e,t);if(null==r)throw Error(e+" not available on this browser");return r},eT=Object.getPrototypeOf,ex=e=>eC("HTMLElement",e),eS=e=>{let t=ev("ownerDocument.defaultView",e);return i(e)&&(ex(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(eT(e).constructor.name))},eR=e=>{let t=e.dom.nodeName;return t.toLowerCase()},eD=e=>e.dom.nodeType,eO=e=>t=>eD(t)===e,ek=e=>8===eD(e)||"#comment"===eR(e),eE=e=>eA(e)&&eS(e.dom),eA=eO(1),eB=eO(3),eN=eO(9),ez=eO(11),e_=e=>t=>eA(t)&&eR(t)===e,ej=(e,t,r)=>{if(a(r)||d(r)||p(r))e.setAttribute(t,r+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),Error("Attribute value was not simple")},eW=(e,t,r)=>{ej(e.dom,t,r)},eL=(e,t)=>{let r=e.dom;en(t,(e,t)=>{ej(r,t,e)})},eM=(e,t)=>{en(t,(t,r)=>{t.fold(()=>{eF(e,r)},t=>{ej(e.dom,r,t)})})},eI=(e,t)=>{let r=e.dom.getAttribute(t);return null===r?void 0:r},eP=(e,t)=>E.from(eI(e,t)),eF=(e,t)=>{e.dom.removeAttribute(t)},eH=e=>$(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),e$=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},eV={fromHtml:(e,t)=>{let r=t||document,l=r.createElement("div");if(l.innerHTML=e,!l.hasChildNodes()||l.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return e$(l.childNodes[0])},fromTag:(e,t)=>{let r=t||document,l=r.createElement(e);return e$(l)},fromText:(e,t)=>{let r=t||document,l=r.createTextNode(e);return e$(l)},fromDom:e$,fromPoint:(e,t,r)=>E.from(e.dom.elementFromPoint(t,r)).map(e$)},eq=(e,t)=>{let r=e.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},eU=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,eG=(e,t)=>{let r=void 0===t?document:t.dom;return eU(r)?[]:L(r.querySelectorAll(e),eV.fromDom)},eK=(e,t)=>{let r=void 0===t?document:t.dom;return eU(r)?E.none():E.from(r.querySelector(e)).map(eV.fromDom)},eY=(e,t)=>e.dom===t.dom,eJ=(e,t)=>{let r=e.dom,l=t.dom;return r!==l&&r.contains(l)},eQ=e=>eV.fromDom(e.dom.ownerDocument),eX=e=>eN(e)?e:eQ(e),eZ=e=>eV.fromDom(eX(e).dom.documentElement),e0=e=>eV.fromDom(eX(e).dom.defaultView),e1=e=>E.from(e.dom.parentNode).map(eV.fromDom),e9=e=>E.from(e.dom.parentElement).map(eV.fromDom),e3=(e,t)=>{let r=h(t)?t:O,l=e.dom,o=[];for(;null!==l.parentNode&&void 0!==l.parentNode;){let e=l.parentNode,t=eV.fromDom(e);if(o.push(t),!0===r(t))break;l=e}return o},e2=e=>E.from(e.dom.previousSibling).map(eV.fromDom),e5=e=>E.from(e.dom.nextSibling).map(eV.fromDom),e7=e=>L(e.dom.childNodes,eV.fromDom),e4=(e,t)=>E.from(e.dom.childNodes[t]).map(eV.fromDom),e6=e=>e4(e,0),e8=(e,t)=>{let r=e1(e);r.each(r=>{r.dom.insertBefore(t.dom,e.dom)})},te=(e,t)=>{let r=e5(e);r.fold(()=>{let r=e1(e);r.each(e=>{tr(e,t)})},e=>{e8(e,t)})},tt=(e,t)=>{let r=e6(e);r.fold(()=>{tr(e,t)},r=>{e.dom.insertBefore(t.dom,r.dom)})},tr=(e,t)=>{e.dom.appendChild(t.dom)},tl=(e,t,r)=>{e4(e,r).fold(()=>{tr(e,t)},e=>{e8(e,t)})},to=(e,t)=>{e8(e,t),tr(t,e)},tn=(e,t)=>{M(t,(r,l)=>{let o=0===l?e:t[l-1];te(o,r)})},ts=(e,t)=>{M(t,t=>{tr(e,t)})},ta=e=>{e.dom.textContent="",M(e7(e),e=>{ti(e)})},ti=e=>{let t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},tm=e=>{let t=e7(e);t.length>0&&tn(e,t),ti(e)},tc=(e,t)=>eV.fromDom(e.dom.cloneNode(t)),td=e=>tc(e,!1),tu=e=>tc(e,!0),tf=(e,t)=>{let r=eV.fromTag(t),l=eH(e);return eL(r,l),r},tg=(e,t)=>{let r=tf(e,t),l=e7(tu(e));return ts(r,l),r},th=(e,t)=>{let r=tf(e,t);te(e,r);let l=e7(e);return ts(r,l),ti(e),r},tp=["tfoot","thead","tbody","colgroup"],tb=e=>_(tp,e),tw=(e,t)=>({rows:e,columns:t}),tv=(e,t)=>({row:e,column:t}),ty=(e,t,r)=>({element:e,rowspan:t,colspan:r}),tC=(e,t,r,l)=>({element:e,rowspan:t,colspan:r,isNew:l}),tT=(e,t,r,l,o,n)=>({element:e,rowspan:t,colspan:r,row:l,column:o,isLocked:n}),tx=(e,t,r)=>({element:e,cells:t,section:r}),tS=(e,t,r,l)=>({element:e,cells:t,section:r,isNew:l}),tR=(e,t,r)=>({element:e,isNew:t,isLocked:r}),tD=(e,t,r,l)=>({element:e,cells:t,section:r,isNew:l}),tO=(e,t,r,l)=>({startRow:e,startCol:t,finishRow:r,finishCol:l}),tk=(e,t,r)=>({element:e,colspan:t,column:r}),tE=(e,t)=>({element:e,columns:t}),tA=e=>ez(e)&&g(e.dom.host),tB=h(Element.prototype.attachShadow)&&h(Node.prototype.getRootNode),tN=y(tB),tz=tB?e=>eV.fromDom(e.dom.getRootNode()):eX,t_=e=>{let t=tz(e);return tA(t)?E.some(t):E.none()},tj=e=>eV.fromDom(e.dom.host),tW=e=>{if(tN()&&g(e.target)){let t=eV.fromDom(e.target);if(eA(t)&&tL(t)&&e.composed&&e.composedPath){let t=e.composedPath();if(t)return ee(t)}}return E.from(e.target)},tL=e=>g(e.dom.shadowRoot),tM=e=>{let t=eB(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return t_(eV.fromDom(t)).fold(()=>r.body.contains(t),v(tM,tj))},tI=()=>tP(eV.fromDom(document)),tP=e=>{let t=e.dom.body;if(null==t)throw Error("Body is not available yet");return eV.fromDom(t)},tF=(e,t,r)=>F(e3(e,r),t),tH=(e,t)=>F(e7(e),t),t$=(e,t)=>{let r=[];return M(e7(e),e=>{t(e)&&(r=r.concat([e])),r=r.concat(t$(e,t))}),r},tV=(e,t,r)=>tF(e,e=>eq(e,t),r),tq=(e,t)=>tH(e,e=>eq(e,t)),tU=(e,t)=>eG(t,e);var tG=(e,t,r,l,o)=>e(r,l)?E.some(r):h(o)&&o(r)?E.none():t(r,l,o);let tK=(e,t,r)=>{let l=e.dom,o=h(r)?r:O;for(;l.parentNode;){l=l.parentNode;let e=eV.fromDom(l);if(t(e))return E.some(e);if(o(e))break}return E.none()},tY=(e,t,r)=>tG((e,t)=>t(e),tK,e,t,r),tJ=(e,t)=>{let r=q(e.dom.childNodes,e=>t(eV.fromDom(e)));return r.map(eV.fromDom)},tQ=(e,t)=>{let r=e=>{for(let l=0;l<e.childNodes.length;l++){let o=eV.fromDom(e.childNodes[l]);if(t(o))return E.some(o);let n=r(e.childNodes[l]);if(n.isSome())return n}return E.none()};return r(e.dom)},tX=(e,t,r)=>tK(e,e=>eq(e,t),r),tZ=(e,t)=>tJ(e,e=>eq(e,t)),t0=(e,t)=>eK(t,e),t1=(e,t,r)=>tG((e,t)=>eq(e,t),tX,e,t,r),t9=(e,t,r=T)=>e.exists(e=>r(e,t)),t3=e=>{let t=[],r=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(r);return t},t2=(e,t)=>null!=e?t(e):E.none(),t5=(e,t)=>e?E.some(t):E.none(),t7=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,t4=(e,t,r=0,l)=>{let o=e.indexOf(t,r);return -1!==o&&(!!u(l)||o+t.length<=l)},t6=(e,t)=>t7(e,t,0),t8=(e,t)=>t7(e,t,e.length-t.length),re=(e=/^\s+|\s+$/g,t=>t.replace(e,"")),rt=e=>e.length>0,rr=e=>{let t=parseFloat(e);return isNaN(t)?E.none():E.some(t)},rl=e=>void 0!==e.style&&h(e.style.getPropertyValue),ro=(e,t,r)=>{if(!a(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),Error("CSS value must be a string: "+r);rl(e)&&e.style.setProperty(t,r)},rn=(e,t)=>{rl(e)&&e.style.removeProperty(t)},rs=(e,t,r)=>{let l=e.dom;ro(l,t,r)},ra=(e,t)=>{let r=e.dom;en(t,(e,t)=>{ro(r,t,e)})},ri=(e,t)=>{let r=e.dom,l=window.getComputedStyle(r),o=l.getPropertyValue(t);return""!==o||tM(e)?o:rm(r,t)},rm=(e,t)=>rl(e)?e.style.getPropertyValue(t):"",rc=(e,t)=>{let r=e.dom,l=rm(r,t);return E.from(l).filter(e=>e.length>0)},rd=(e,t)=>{let r=e.dom;rn(r,t),t9(eP(e,"style").map(re),"")&&eF(e,"style")},ru=(e,t)=>{let r=e.dom,l=t.dom;rl(r)&&rl(l)&&(l.style.cssText=r.style.cssText)},rf=(e,t,r=0)=>eP(e,t).map(e=>parseInt(e,10)).getOr(r),rg=(e,t)=>rf(e,t,1),rh=e=>e_("col")(e)?rf(e,"span",1)>1:rg(e,"colspan")>1,rp=e=>rg(e,"rowspan")>1,rb=(e,t)=>parseInt(ri(e,t),10),rw=y(10),rv=y(10),ry=(e,t)=>rC(e,t,k),rC=(e,t,r)=>K(e7(e),e=>eq(e,t)?r(e)?[e]:[]:rC(e,t,r)),rT=(e,t,r=O)=>r(t)?E.none():_(e,eR(t))?E.some(t):tX(t,e.join(","),e=>eq(e,"table")||r(e)),rx=(e,t)=>rT(["td","th"],e,t),rS=e=>ry(e,"th,td"),rR=e=>eq(e,"colgroup")?tq(e,"col"):K(rk(e),e=>tq(e,"col")),rD=(e,t)=>t1(e,"table",t),rO=e=>ry(e,"tr"),rk=e=>rD(e).fold(y([]),e=>tq(e,"colgroup")),rE=(e,t)=>L(e,e=>{if("colgroup"===eR(e)){let t=L(rR(e),e=>{let t=rf(e,"span",1);return ty(e,1,t)});return tx(e,t,"colgroup")}{let r=L(rS(e),e=>{let t=rf(e,"rowspan",1),r=rf(e,"colspan",1);return ty(e,t,r)});return tx(e,r,t(e))}}),rA=e=>e1(e).map(e=>{let t=eR(e);return tb(t)?t:"tbody"}).getOr("tbody"),rB=e=>{let t=rO(e),r=rk(e),l=[...r,...t];return rE(l,rA)},rN=(e,t)=>rE(e,()=>t),rz=e=>{let t,r=!1;return(...l)=>(r||(r=!0,t=e.apply(null,l)),t)},r_=(e,t,r,l)=>{let o=e.isiOS()&&!0===/ipad/i.test(r),n=e.isiOS()&&!o,s=e.isiOS()||e.isAndroid(),a=s||l("(pointer:coarse)"),i=o||!n&&s&&l("(min-device-width:768px)"),m=n||s&&!i,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r),d=!m&&!i&&!c;return{isiPad:y(o),isiPhone:y(n),isTablet:y(i),isPhone:y(m),isTouch:y(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:y(c),isDesktop:y(d)}},rj=(e,t)=>{for(let r=0;r<e.length;r++){let l=e[r];if(l.test(t))return l}},rW=(e,t)=>{let r=rj(e,t);if(!r)return{major:0,minor:0};let l=e=>Number(t.replace(r,"$"+e));return rM(l(1),l(2))},rL=()=>rM(0,0),rM=(e,t)=>({major:e,minor:t}),rI={nu:rM,detect:(e,t)=>{let r=String(t).toLowerCase();return 0===e.length?rL():rW(e,r)},unknown:rL},rP=(e,t)=>er(t.brands,t=>{let r=t.brand.toLowerCase();return q(e,e=>{var t;return r===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:rI.nu(parseInt(t.version,10),0)}))}),rF=(e,t)=>{let r=String(t).toLowerCase();return q(e,e=>e.search(r))},rH=(e,t)=>rF(e,t).map(e=>{let r=rI.detect(e.versionRegexes,t);return{current:e.name,version:r}}),r$=(e,t)=>rF(e,t).map(e=>{let r=rI.detect(e.versionRegexes,t);return{current:e.name,version:r}}),rV=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,rq=e=>t=>t4(t,e),rU=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>t4(e,"edge/")&&t4(e,"chrome")&&t4(e,"safari")&&t4(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,rV],search:e=>t4(e,"chrome")&&!t4(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>t4(e,"msie")||t4(e,"trident")},{name:"Opera",versionRegexes:[rV,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:rq("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:rq("firefox")},{name:"Safari",versionRegexes:[rV,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(t4(e,"safari")||t4(e,"mobile/"))&&t4(e,"applewebkit")}],rG=[{name:"Windows",search:rq("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>t4(e,"iphone")||t4(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:rq("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:rq("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:rq("linux"),versionRegexes:[]},{name:"Solaris",search:rq("sunos"),versionRegexes:[]},{name:"FreeBSD",search:rq("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:rq("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],rK={browsers:y(rU),oses:y(rG)},rY="Edge",rJ="Chromium",rQ="Opera",rX="Firefox",rZ="Safari",r0=e=>{let t=e.current,r=e.version,l=e=>()=>t===e;return{current:t,version:r,isEdge:l(rY),isChromium:l(rJ),isIE:l("IE"),isOpera:l(rQ),isFirefox:l(rX),isSafari:l(rZ)}},r1={unknown:()=>r0({current:void 0,version:rI.unknown()}),nu:r0,edge:y(rY),chromium:y(rJ),ie:y("IE"),opera:y(rQ),firefox:y(rX),safari:y(rZ)},r9="Windows",r3="Android",r2="Linux",r5="macOS",r7="Solaris",r4="FreeBSD",r6="ChromeOS",r8=e=>{let t=e.current,r=e.version,l=e=>()=>t===e;return{current:t,version:r,isWindows:l(r9),isiOS:l("iOS"),isAndroid:l(r3),isMacOS:l(r5),isLinux:l(r2),isSolaris:l(r7),isFreeBSD:l(r4),isChromeOS:l(r6)}},le={unknown:()=>r8({current:void 0,version:rI.unknown()}),nu:r8,windows:y(r9),ios:y("iOS"),android:y(r3),linux:y(r2),macos:y(r5),solaris:y(r7),freebsd:y(r4),chromeos:y(r6)},lt={detect:(e,t,r)=>{let l=rK.browsers(),o=rK.oses(),n=t.bind(e=>rP(l,e)).orThunk(()=>rH(l,e)).fold(r1.unknown,r1.nu),s=r$(o,e).fold(le.unknown,le.nu),a=r_(s,n,e,r);return{browser:n,os:s,deviceType:a}}},lr=e=>window.matchMedia(e).matches,ll=rz(()=>lt.detect(navigator.userAgent,E.from(navigator.userAgentData),lr)),lo=()=>ll(),ln=(e,t)=>{let r=r=>{let l=t(r);if(l<=0||null===l){let t=ri(r,e);return parseFloat(t)||0}return l},l=(e,t)=>$(t,(t,r)=>{let l=ri(e,r),o=void 0===l?0:parseInt(l,10);return isNaN(o)?t:t+o},0);return{set:(t,r)=>{if(!p(r)&&!r.match(/^[0-9]+$/))throw Error(e+".set accepts only positive integer values. Value was "+r);let l=t.dom;rl(l)&&(l.style[e]=r+"px")},get:r,getOuter:r,aggregate:l,max:(e,t,r)=>{let o=l(e,r);return t>o?t-o:0}}},ls=(e,t)=>rr(e).getOr(t),la=(e,t,r)=>ls(ri(e,t),r),li=(e,t,r,l)=>{let o=la(e,`padding-${r}`,0),n=la(e,`padding-${l}`,0),s=la(e,`border-${r}-width`,0),a=la(e,`border-${l}-width`,0);return t-o-n-s-a},lm=(e,t)=>{let r=e.dom,l=r.getBoundingClientRect().width||r.offsetWidth;return"border-box"===t?l:li(e,l,"left","right")},lc=ln("width",e=>e.dom.offsetWidth),ld=e=>lc.get(e),lu=e=>lc.getOuter(e),lf=e=>lm(e,"content-box"),lg=e=>la(e,"width",e.dom.offsetWidth),lh=(e,t,r)=>{let l=e.cells,o=l.slice(0,t),n=l.slice(t),s=o.concat(r).concat(n);return lw(e,s)},lp=(e,t,r)=>lh(e,t,[r]),lb=(e,t,r)=>{let l=e.cells;l[t]=r},lw=(e,t)=>tD(e.element,t,e.section,e.isNew),lv=(e,t)=>{let r=e.cells,l=L(r,t);return tD(e.element,l,e.section,e.isNew)},ly=(e,t)=>e.cells[t],lC=(e,t)=>ly(e,t).element,lT=e=>e.cells.length,lx=e=>{let t=P(e,e=>"colgroup"===e.section);return{rows:t.fail,cols:t.pass}},lS=(e,t,r)=>{let l=L(e.cells,r);return tD(t(e.element),l,e.section,!0)},lR="data-snooker-locked-cols",lD=e=>eP(e,lR).bind(e=>E.from(e.match(/\d+/g))).map(e=>Q(e,k)),lO=e=>{let t=$(lx(e).rows,(e,t)=>(M(t.cells,(t,r)=>{t.isLocked&&(e[r]=!0)}),e),{}),r=ed(t,(e,t)=>parseInt(t,10));return X(r)},lk=(e,t)=>e+","+t,lE=(e,t)=>{let r=K(e.all,e=>e.cells);return F(r,t)},lA=e=>{let t={},r=0;return M(e.cells,e=>{let l=e.colspan;W(l,o=>{let n=r+o;t[n]=tk(e.element,l,n)}),r+=l}),t},lB=e=>{let t={},r=[],l=ee(e).map(e=>e.element).bind(rD),o=l.bind(lD).getOr({}),n=0,s=0,a=0,{pass:i,fail:m}=P(e,e=>"colgroup"===e.section);M(m,e=>{let l=[];M(e.cells,e=>{let r=0;for(;void 0!==t[lk(a,r)];)r++;let n=eh(o,r.toString()),i=tT(e.element,e.rowspan,e.colspan,a,r,n);for(let l=0;l<e.colspan;l++)for(let o=0;o<e.rowspan;o++){let e=a+o,n=r+l,m=lk(e,n);t[m]=i,s=Math.max(s,n+1)}l.push(i)}),n++,r.push(tx(e.element,l,e.section)),a++});let{columns:c,colgroups:d}=et(i).map(e=>{let t=lA(e),r=tE(e.element,eu(t));return{colgroups:[r],columns:t}}).getOrThunk(()=>({colgroups:[],columns:{}})),u=tw(n,s);return{grid:u,access:t,all:r,columns:c,colgroups:d}},lN={fromTable:e=>{let t=rB(e);return lB(t)},generate:lB,getAt:(e,t,r)=>E.from(e.access[lk(t,r)]),findItem:(e,t,r)=>{let l=lE(e,e=>r(t,e.element));return l.length>0?E.some(l[0]):E.none()},filterItems:lE,justCells:e=>K(e.all,e=>e.cells),justColumns:e=>eu(e.columns),hasColumns:e=>el(e.columns).length>0,getColumnAt:(e,t)=>E.from(e.columns[t])},lz=(e,t=k)=>{let r=e.grid,l=W(r.columns,C),o=W(r.rows,C);return L(l,r=>l_(()=>K(o,t=>lN.getAt(e,t,r).filter(e=>e.column===r).toArray()),e=>1===e.colspan&&t(e.element),()=>lN.getAt(e,0,r)))},l_=(e,t,r)=>{let l=e(),o=q(l,t),n=o.orThunk(()=>E.from(l[0]).orThunk(r));return n.map(e=>e.element)},lj=e=>{let t=e.grid,r=W(t.rows,C),l=W(t.columns,C);return L(r,t=>l_(()=>K(l,r=>lN.getAt(e,t,r).filter(e=>e.row===t).fold(y([]),e=>[e])),e=>1===e.rowspan,()=>lN.getAt(e,t,0)))},lW=(e,t)=>{if(t<0||t>=e.length-1)return E.none();let r=e[t].fold(()=>{let r=J(e.slice(0,t));return er(r,(e,t)=>e.map(e=>({value:e,delta:t+1})))},e=>E.some({value:e,delta:0})),l=e[t+1].fold(()=>{let r=e.slice(t+1);return er(r,(e,t)=>e.map(e=>({value:e,delta:t+1})))},e=>E.some({value:e,delta:1}));return r.bind(e=>l.map(t=>{let r=t.delta+e.delta;return Math.abs(t.value-e.value)/r}))},lL=(e,t)=>r=>"rtl"===lM(r)?t:e,lM=e=>"rtl"===ri(e,"direction")?"rtl":"ltr",lI=ln("height",e=>{let t=e.dom;return tM(e)?t.getBoundingClientRect().height:t.offsetHeight}),lP=e=>lI.get(e),lF=e=>lI.getOuter(e),lH=e=>la(e,"height",e.dom.offsetHeight),l$=(e,t)=>({left:e,top:t,translate:(r,l)=>l$(e+r,t+l)}),lV=e=>{let t=e.getBoundingClientRect();return l$(t.left,t.top)},lq=(e,t)=>void 0!==e?e:void 0!==t?t:0,lU=e=>{let t=e.dom.ownerDocument,r=t.body,l=t.defaultView,o=t.documentElement;if(r===e.dom)return l$(r.offsetLeft,r.offsetTop);let n=lq(null==l?void 0:l.pageYOffset,o.scrollTop),s=lq(null==l?void 0:l.pageXOffset,o.scrollLeft),a=lq(o.clientTop,r.clientTop),i=lq(o.clientLeft,r.clientLeft);return lG(e).translate(s-i,n-a)},lG=e=>{let t=e.dom,r=t.ownerDocument,l=r.body;return l===t?l$(l.offsetLeft,l.offsetTop):tM(e)?lV(t):l$(0,0)},lK=(e,t)=>({row:e,y:t}),lY=(e,t)=>({col:e,x:t}),lJ=e=>{let t=lU(e);return t.left+lu(e)},lQ=e=>lU(e).left,lX=(e,t)=>lY(e,lQ(t)),lZ=(e,t)=>lY(e,lJ(t)),l0=e=>lU(e).top,l1=(e,t)=>lK(e,l0(t)),l9=(e,t)=>lK(e,l0(t)+lF(t)),l3=(e,t,r)=>{if(0===r.length)return[];let l=L(r.slice(1),(t,r)=>t.map(t=>e(r,t))),o=r[r.length-1].map(e=>t(r.length-1,e));return l.concat([o])},l2={delta:C,positions:e=>l3(l1,l9,e),edge:l0},l5=lL({delta:C,edge:lQ,positions:e=>l3(lX,lZ,e)},{delta:e=>-e,edge:lJ,positions:e=>l3(lZ,lX,e)}),l7={delta:(e,t)=>l5(t).delta(e,t),positions:(e,t)=>l5(t).positions(e,t),edge:e=>l5(e).edge(e)},l4={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},l6=(()=>{let e="[0-9]+",t="[+-]?"+e,r="[eE]"+t,l=e=>`(?:${e})?`,o=["Infinity",e+"\\."+l(e)+l(r),"\\."+e+l(r),e+l(r)].join("|"),n=`[+-]?(?:${o})`;return RegExp(`^(${n})(.*)$`)})(),l8=(e,t)=>j(t,t=>j(l4[t],t=>e===t)),oe=(e,t)=>{let r=E.from(l6.exec(e));return r.bind(e=>{let r=Number(e[1]),l=e[2];return l8(l,t)?E.some({value:r,unit:l}):E.none()})},ot=/(\d+(\.\d+)?)%/,or=/(\d+(\.\d+)?)px|em/,ol=e_("col"),oo=(e,t,r)=>{let l=e9(e).getOrThunk(()=>tP(eQ(e)));return t(e)/r(l)*100},on=(e,t)=>{rs(e,"width",t+"px")},os=(e,t)=>{rs(e,"width",t+"%")},oa=(e,t)=>{rs(e,"height",t+"px")},oi=e=>lH(e)+"px",om=(e,t,r,l)=>{let o=rD(e).map(e=>{let l=r(e);return Math.floor(t/100*l)}).getOr(t);return l(e,o),o},oc=(e,t,r,l)=>{let o=parseFloat(e);return t8(e,"%")&&"table"!==eR(t)?om(t,o,r,l):o},od=e=>{let t=oi(e);return t?oc(t,e,lP,oa):lP(e)},ou=(e,t,r)=>{let l=r(e),o=rg(e,t);return l/o},of=(e,t)=>rc(e,t).orThunk(()=>eP(e,t).map(e=>e+"px")),og=e=>of(e,"width"),oh=e=>of(e,"height"),op=e=>oo(e,ld,lf),ob=e=>ol(e)?ld(e):lg(e),ow=e=>ou(e,"rowspan",od),ov=e=>{let t=og(e);return t.bind(e=>oe(e,["fixed","relative","empty"]))},oy=(e,t,r)=>{rs(e,"width",t+r)},oC=e=>ld(e)+"px",oT=e=>oo(e,ld,lf)+"%",ox=y(ot),oS=e_("col"),oR=e=>og(e).getOrThunk(()=>ob(e)+"px"),oD=e=>oh(e).getOrThunk(()=>ow(e)+"px"),oO=e=>L(lN.justColumns(e),e=>E.from(e.element)),ok=e=>{let t=lo().browser,r=t.isChromium()||t.isFirefox();return!oS(e)||r},oE=(e,t,r,l,o,n)=>e.filter(l).fold(()=>n(lW(r,t)),e=>o(e)),oA=(e,t,r,l)=>{let o=lz(e),n=lN.hasColumns(e)?oO(e):o,s=[E.some(l7.edge(t))].concat(L(l7.positions(o,t),e=>e.map(e=>e.x))),a=S(rh);return L(n,(e,t)=>oE(e,t,s,a,e=>{if(ok(e))return r(e);{let e=t2(o[t],C);return oE(e,t,s,a,e=>l(E.some(ld(e))),l)}},l))},oB=e=>e.map(e=>e+"px").getOr(""),oN=(e,t)=>oA(e,t,oR,oB),oz=(e,t,r)=>oA(e,t,op,e=>e.fold(()=>r.minCellWidth(),e=>e/r.pixelWidth()*100)),o_=(e,t,r)=>oA(e,t,ob,e=>e.getOrThunk(r.minCellWidth)),oj=(e,t,r,l,o)=>{let n=lj(e),s=[E.some(r.edge(t))].concat(L(r.positions(n,t),e=>e.map(e=>e.y)));return L(n,(e,t)=>oE(e,t,s,S(rp),l,o))},oW=(e,t,r)=>oj(e,t,r,ow,e=>e.getOrThunk(rv)),oL=(e,t,r)=>oj(e,t,r,oD,oB),oM=(e,t)=>()=>tM(e)?t(e):parseFloat(rc(e,"width").getOr("0")),oI=e=>{let t=oM(e,ld),r=y(0);return{width:t,pixelWidth:t,getWidths:(t,r)=>o_(t,e,r),getCellDelta:r,singleColumnWidth:y([0]),minCellWidth:r,setElementWidth:b,adjustTableWidth:b,isRelative:!0,label:"none"}},oP=e=>{let t=oM(e,e=>parseFloat(oT(e))),r=oM(e,ld);return{width:t,pixelWidth:r,getWidths:(t,r)=>oz(t,e,r),getCellDelta:e=>e/r()*100,singleColumnWidth:(e,t)=>[100-e],minCellWidth:()=>rw()/r()*100,setElementWidth:os,adjustTableWidth:r=>{let l=t();os(e,l+r/100*l)},isRelative:!0,label:"percent"}},oF=e=>{let t=oM(e,ld);return{width:t,pixelWidth:t,getWidths:(t,r)=>o_(t,e,r),getCellDelta:C,singleColumnWidth:(e,t)=>{let r=Math.max(rw(),e+t);return[r-e]},minCellWidth:rw,setElementWidth:on,adjustTableWidth:r=>{let l=t()+r;on(e,l)},isRelative:!1,label:"pixel"}},oH=(e,t)=>{let r=ox().exec(t);return null!==r?oP(e):oF(e)},o$={getTableSize:e=>{let t=og(e);return t.fold(()=>oI(e),t=>oH(e,t))},pixelSize:oF,percentageSize:oP,noneSize:oI},oV=(e,t,r,l,o,n)=>({minRow:e,minCol:t,maxRow:r,maxCol:l,allCells:o,selectedCells:n}),oq=(e,t)=>{let r=e.grid.columns,l=e.grid.rows,o=l,n=r,s=0,a=0,i=[],m=[];return en(e.access,e=>{if(i.push(e),t(e)){m.push(e);let t=e.row,r=t+e.rowspan-1,l=e.column,i=l+e.colspan-1;t<o?o=t:r>s&&(s=r),l<n?n=l:i>a&&(a=i)}}),oV(o,n,s,a,i,m)},oU=(e,t,r)=>{let l=e[r].element,o=eV.fromTag("td");tr(o,eV.fromTag("br"));let n=t?tr:tt;n(l,o)},oG=(e,t,r,l)=>{let o=F(e,e=>"colgroup"!==e.section),n=t.grid.columns,s=t.grid.rows;for(let e=0;e<s;e++){let s=!1;for(let a=0;a<n;a++)if(!(e<r.minRow||e>r.maxRow||a<r.minCol||a>r.maxCol)){let r=lN.getAt(t,e,a).filter(l).isNone();r?oU(o,s,e):s=!0}}},oK=(e,t,r,l)=>{en(r.columns,e=>{(e.column<t.minCol||e.column>t.maxCol)&&ti(e.element)});let o=F(ry(e,"tr"),e=>0===e.dom.childElementCount);M(o,ti),(t.minCol===t.maxCol||t.minRow===t.maxRow)&&M(ry(e,"th,td"),e=>{eF(e,"rowspan"),eF(e,"colspan")}),eF(e,lR),eF(e,"data-snooker-col-series");let n=o$.getTableSize(e);n.adjustTableWidth(l)},oY=(e,t,r,l)=>{if(0===l.minCol&&t.grid.columns===l.maxCol+1)return 0;let o=o_(t,e,r),n=$(o,(e,t)=>e+t,0),s=$(o.slice(l.minCol,l.maxCol+1),(e,t)=>e+t,0),a=s/n*r.pixelWidth(),i=a-r.pixelWidth();return r.getCellDelta(i)},oJ=(e,t)=>{let r=e=>eq(e.element,t),l=tu(e),o=rB(l),n=o$.getTableSize(e),s=lN.generate(o),a=oq(s,r),i="th:not("+t+"),td:not("+t+")",m=rC(l,"th,td",e=>eq(e,i));M(m,ti),oG(o,s,a,r);let c=lN.fromTable(e),d=oY(e,c,n,a);return oK(l,a,s,d),l},oQ=((e,t)=>{let r=t=>e(t)?E.from(t.dom.nodeValue):E.none();return{get:l=>{if(!e(l))throw Error("Can only get "+t+" value of a "+t+" node");return r(l).getOr("")},getOption:r,set:(r,l)=>{if(!e(r))throw Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=l}}})(eB,"text"),oX=e=>oQ.get(e),oZ=e=>oQ.getOption(e),o0=(e,t)=>oQ.set(e,t),o1=e=>"img"===eR(e)?1:oZ(e).fold(()=>e7(e).length,e=>e.length),o9=e=>oZ(e).filter(e=>0!==e.trim().length||e.indexOf("\xa0")>-1).isSome(),o3=e=>eE(e)&&"false"===eI(e,"contenteditable"),o2=["img","br"],o5=e=>{let t=o9(e);return t||_(o2,eR(e))||o3(e)},o7=e=>tQ(e,o5),o4=e=>o6(e,o5),o6=(e,t)=>{let r=e=>{let l=e7(e);for(let e=l.length-1;e>=0;e--){let o=l[e];if(t(o))return E.some(o);let n=r(o);if(n.isSome())return n}return E.none()};return r(e)},o8={scope:["row","col"]},ne=e=>()=>{let t=eV.fromTag("td",e.dom);return tr(t,eV.fromTag("br",e.dom)),t},nt=e=>()=>eV.fromTag("col",e.dom),nr=e=>()=>eV.fromTag("colgroup",e.dom),nl=e=>()=>eV.fromTag("tr",e.dom),no=(e,t,r)=>{let l=tg(e,t);return en(r,(e,t)=>{null===e?eF(l,t):eW(l,t,e)}),l},nn=e=>e,ns=(e,t,r)=>{let l=o7(e);return l.map(l=>{let o=r.join(","),n=tV(l,o,t=>eY(t,e));return H(n,(e,t)=>{let r=td(t);return tr(e,r),r},t)}).getOr(t)},na=(e,t)=>{en(o8,(r,l)=>eP(e,l).filter(e=>_(r,e)).each(e=>eW(t,l,e)))},ni=(e,t,r)=>{let l=(e,t)=>{ru(e.element,t),rd(t,"height"),1!==e.colspan&&rd(t,"width")};return{col:r=>{let o=eV.fromTag(eR(r.element),t.dom);return l(r,o),e(r.element,o),o},colgroup:nr(t),row:nl(t),cell:o=>{let n=eV.fromTag(eR(o.element),t.dom),s=r.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),a=s.length>0?ns(o.element,n,s):n;return tr(a,eV.fromTag("br")),l(o,n),na(o.element,n),e(o.element,n),n},replace:no,colGap:nt(t),gap:ne(t)}},nm=e=>({col:nt(e),colgroup:nr(e),row:nl(e),cell:ne(e),replace:nn,colGap:nt(e),gap:ne(e)}),nc=(e,t)=>{let r=t||document,l=r.createElement("div");return l.innerHTML=e,e7(eV.fromDom(l))},nd=e=>L(e,eV.fromDom),nu=e=>t=>t.options.get(e),nf="100%",ng=e=>{var t;let r=e.dom,l=null!==(t=r.getParent(e.selection.getStart(),r.isBlock))&&void 0!==t?t:e.getBody();return lf(eV.fromDom(l))+"px"},nh=(e,t)=>nO(e)||!nE(e)?t:nD(e)?{...t,width:ng(e)}:{...t,width:nf},np=(e,t)=>nO(e)||nE(e)?t:nD(e)?{...t,width:ng(e)}:{...t,width:nf},nb=e=>{let t=e.options.register;t("table_clone_elements",{processor:"string[]"}),t("table_use_colgroups",{processor:"boolean",default:!0}),t("table_header_type",{processor:e=>{let t=_(["section","cells","sectionCells","auto"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),t("table_sizing_mode",{processor:"string",default:"auto"}),t("table_default_attributes",{processor:"object",default:{border:"1"}}),t("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),t("table_column_resizing",{processor:e=>{let t=_(["preservetable","resizetable"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),t("table_resize_bars",{processor:"boolean",default:!0}),t("table_style_by_css",{processor:"boolean",default:!0}),t("table_merge_content_on_paste",{processor:"boolean",default:!0})},nw=e=>E.from(e.options.get("table_clone_elements")),nv=e=>{let t=e.options.get("object_resizing");return _(t.split(","),"table")},ny=nu("table_header_type"),nC=nu("table_column_resizing"),nT=e=>"preservetable"===nC(e),nx=e=>"resizetable"===nC(e),nS=nu("table_sizing_mode"),nR=e=>"relative"===nS(e),nD=e=>"fixed"===nS(e),nO=e=>"responsive"===nS(e),nk=nu("table_resize_bars"),nE=nu("table_style_by_css"),nA=nu("table_merge_content_on_paste"),nB=e=>{let t=e.options,r=t.get("table_default_attributes");return t.isSet("table_default_attributes")?r:np(e,r)},nN=e=>{let t=e.options,r=t.get("table_default_styles");return t.isSet("table_default_styles")?r:nh(e,r)},nz=nu("table_use_colgroups"),n_=e=>t1(e,"[contenteditable]"),nj=(e,t=!1)=>tM(e)?e.dom.isContentEditable:n_(e).fold(y(t),e=>"true"===nW(e)),nW=e=>e.dom.contentEditable,nL=e=>eV.fromDom(e.getBody()),nM=e=>t=>eY(t,nL(e)),nI=e=>{eF(e,"data-mce-style");let t=e=>eF(e,"data-mce-style");M(rS(e),t),M(rR(e),t),M(rO(e),t)},nP=e=>eV.fromDom(e.selection.getStart()),nF=e=>e.getBoundingClientRect().width,nH=e=>e.getBoundingClientRect().height,n$=(e,t)=>{let r=e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width");return E.from(r).filter(rt)},nV=e=>/^(\d+(\.\d+)?)%$/.test(e),nq=e=>/^(\d+(\.\d+)?)px$/.test(e),nU=e=>tY(e,e_("table")).exists(nj),nG=(e,t)=>{let r=t.column,l=t.column+t.colspan-1,o=t.row,n=t.row+t.rowspan-1;return r<=e.finishCol&&l>=e.startCol&&o<=e.finishRow&&n>=e.startRow},nK=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,nY=(e,t)=>{let r=!0,l=x(nK,t);for(let o=t.startRow;o<=t.finishRow;o++)for(let n=t.startCol;n<=t.finishCol;n++)r=r&&lN.getAt(e,o,n).exists(l);return r?E.some(t):E.none()},nJ=(e,t)=>tO(Math.min(e.row,t.row),Math.min(e.column,t.column),Math.max(e.row+e.rowspan-1,t.row+t.rowspan-1),Math.max(e.column+e.colspan-1,t.column+t.colspan-1)),nQ=(e,t,r)=>{let l=lN.findItem(e,t,eY),o=lN.findItem(e,r,eY);return l.bind(e=>o.map(t=>nJ(e,t)))},nX=(e,t,r)=>nQ(e,t,r).bind(t=>nY(e,t)),nZ=(e,t,r,l)=>lN.findItem(e,t,eY).bind(t=>{let o=r>0?t.row+t.rowspan-1:t.row,n=l>0?t.column+t.colspan-1:t.column,s=lN.getAt(e,o+r,n+l);return s.map(e=>e.element)}),n0=(e,t,r)=>nQ(e,t,r).map(t=>{let r=lN.filterItems(e,x(nG,t));return L(r,e=>e.element)}),n1=(e,t)=>lN.findItem(e,t,(e,t)=>eJ(t,e)).map(e=>e.element),n9=(e,t,r)=>rD(e).bind(l=>{let o=n7(l);return nZ(o,e,t,r)}),n3=(e,t,r)=>{let l=n7(e);return n0(l,t,r)},n2=(e,t,r,l,o)=>{let n=n7(e),s=eY(e,r)?E.some(t):n1(n,t),a=eY(e,o)?E.some(l):n1(n,l);return s.bind(e=>a.bind(t=>n0(n,e,t)))},n5=(e,t,r)=>{let l=n7(e);return nX(l,t,r)},n7=lN.fromTable;var n4=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],n6=()=>({up:y({selector:tX,closest:t1,predicate:tK,all:e3}),down:y({selector:tU,predicate:t$}),styles:y({get:ri,getRaw:rc,set:rs,remove:rd}),attrs:y({get:eI,set:eW,remove:eF,copyTo:(e,t)=>{let r=eH(e);eL(t,r)}}),insert:y({before:e8,after:te,afterAll:tn,append:tr,appendAll:ts,prepend:tt,wrap:to}),remove:y({unwrap:tm,remove:ti}),create:y({nu:eV.fromTag,clone:e=>eV.fromDom(e.dom.cloneNode(!1)),text:eV.fromText}),query:y({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:e2,nextSibling:e5}),property:y({children:e7,name:eR,parent:e1,document:e=>eX(e).dom,isText:eB,isComment:ek,isElement:eA,isSpecial:e=>{let t=eR(e);return _(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>eA(e)?eP(e,"lang"):E.none(),getText:oX,setText:o0,isBoundary:e=>!!eA(e)&&("body"===eR(e)||_(n4,eR(e))),isEmptyTag:e=>!!eA(e)&&_(["br","img","hr","input"],eR(e)),isNonEditable:e=>eA(e)&&"false"===eI(e,"contenteditable")}),eq:eY,is:eq});let n8=(e,t,r,l)=>{let o=r[0],n=r.slice(1);return l(e,t,o,n)},se=(e,t,r,l)=>{let o=t(e,r);return H(l,(r,l)=>{let o=t(e,l);return st(e,r,o)},o)},st=(e,t,r)=>t.bind(t=>r.filter(x(e.eq,t))),sr=(e,t)=>x(e.eq,t),sl=(e,t,r)=>r.length>0?n8(e,t,r,se):E.none(),so=(e,t,r,l=O)=>{let o=[t].concat(e.up().all(t)),n=[r].concat(e.up().all(r)),s=e=>{let t=U(e,l);return t.fold(()=>e,t=>e.slice(0,t+1))},a=s(o),i=s(n),m=q(a,t=>j(i,sr(e,t)));return{firstpath:a,secondpath:i,shared:m}},sn=n6(),ss=(e,t)=>sl(sn,(t,r)=>e(r),t),sa=(e,t,r)=>so(sn,e,t,r),si=e=>tX(e,"table"),sm=(e,t,r)=>{let l=e=>t=>void 0!==r&&r(t)||eY(t,e);return eY(e,t)?E.some({boxes:E.some([e]),start:e,finish:t}):si(e).bind(o=>si(t).bind(n=>{if(eY(o,n))return E.some({boxes:n3(o,e,t),start:e,finish:t});if(eJ(o,n)){let r=tV(t,"td,th",l(o)),s=r.length>0?r[r.length-1]:t;return E.some({boxes:n2(o,e,o,t,n),start:e,finish:s})}if(!eJ(n,o))return sa(e,t).shared.bind(s=>t1(s,"table",r).bind(r=>{let s=tV(t,"td,th",l(r)),a=s.length>0?s[s.length-1]:t,i=tV(e,"td,th",l(r)),m=i.length>0?i[i.length-1]:e;return E.some({boxes:n2(r,e,o,t,n),start:m,finish:a})}));{let r=tV(e,"td,th",l(n)),s=r.length>0?r[r.length-1]:e;return E.some({boxes:n2(n,e,o,t,n),start:e,finish:s})}}))},sc=(e,t)=>{let r=tU(e,t);return r.length>0?E.some(r):E.none()},sd=(e,t)=>q(e,e=>eq(e,t)),su=(e,t,r)=>t0(e,t).bind(t=>t0(e,r).bind(e=>ss(si,[t,e]).map(r=>({first:t,last:e,table:r})))),sf=(e,t)=>tX(e,"table").bind(r=>t0(r,t).bind(t=>sm(t,e).bind(e=>e.boxes.map(t=>({boxes:t,start:e.start,finish:e.finish}))))),sg=(e,t,r,l,o)=>sd(e,o).bind(e=>n9(e,t,r).bind(e=>sf(e,l))),sh=(e,t)=>sc(e,t),sp=(e,t,r)=>su(e,t,r).bind(t=>{let r=t=>eY(e,t),l="thead,tfoot,tbody,table",o=tX(t.first,l,r),n=tX(t.last,l,r);return o.bind(e=>n.bind(r=>eY(e,r)?n5(t.table,t.first,t.last):E.none()))}),sb=e=>{let t=(e,t)=>eP(e,t).exists(e=>parseInt(e,10)>1);return e.length>0&&Y(e,e=>t(e,"rowspan")||t(e,"colspan"))?E.some(e):E.none()},sw=(e,t,r)=>t.length<=1?E.none():sp(e,r.firstSelectedSelector,r.lastSelectedSelector).map(e=>({bounds:e,cells:t})),sv="data-mce-selected",sy="data-mce-first-selected",sC="data-mce-last-selected",sT="["+sv+"]",sx={selected:sv,selectedSelector:"td["+sv+"],th["+sv+"]",firstSelected:sy,firstSelectedSelector:"td["+sy+"],th["+sy+"]",lastSelected:sC,lastSelectedSelector:"td["+sC+"],th["+sC+"]"},sS=(e,t,r)=>({element:r,mergable:sw(t,e,sx),unmergable:sb(e),selection:C(e)}),sR=(e,t,r)=>({element:e,clipboard:t,generators:r}),sD=(e,t,r,l)=>({selection:C(e),clipboard:r,generators:l}),sO=e=>rD(e).bind(e=>sh(e,sx.firstSelectedSelector)).fold(y(e),e=>e[0]),sk=e=>(t,r)=>{let l=eR(t),o="col"===l||"colgroup"===l?sO(t):t;return t1(o,e,r)},sE=sk("th,td,caption"),sA=sk("th,td"),sB=e=>nd(e.model.table.getSelectedCells()),sN=e=>F(sB(e),e=>eq(e,sx.selectedSelector)),sz=e=>rD(e[0]).map(e=>{let t=oJ(e,sT);return nI(t),[t]}),s_=(e,t)=>L(t,t=>e.selection.serializer.serialize(t.dom,{})).join(""),sj=e=>L(e,e=>e.dom.innerText).join(""),sW=(e,t)=>{e.on("BeforeGetContent",t=>{if(!0===t.selection){let r=sN(e);r.length>=1&&(t.preventDefault(),sz(r).each(r=>{t.content="text"===t.format?sj(r):s_(e,r)}))}}),e.on("BeforeSetContent",r=>{if(!0===r.selection&&!0===r.paste){let l=sB(e);ee(l).each(l=>{rD(l).each(o=>{let n=F(nc(r.content),e=>"meta"!==eR(e)),s=e_("table");if(nA(e)&&1===n.length&&s(n[0])){r.preventDefault();let s=eV.fromDom(e.getDoc()),a=nm(s),i=sR(l,n[0],a);t.pasteCells(o,i).each(()=>{e.focus()})}})})}})},sL=(e,t)=>({element:e,offset:t}),sM=(e,t,r)=>e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?r(t).bind(t=>sM(e,t,r).orThunk(()=>E.some(t))):E.none(),sI=(e,t)=>{if(e.property().isText(t))return e.property().getText(t).length;let r=e.property().children(t);return r.length},sP=(e,t)=>{let r=sM(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(r))return sL(r,sI(e,r));let l=e.property().children(r);return l.length>0?sP(e,l[l.length-1]):sL(r,sI(e,r))},sF=n6(),sH=e=>sP(sF,e),s$=(e,t)=>{if(!rh(e)){let r=ov(e);r.each(r=>{let l=r.value/2;oy(e,l,r.unit),oy(t,l,r.unit)})}},sV=e=>L(e,y(0)),sq=(e,t,r,l,o)=>o(e.slice(0,t)).concat(l).concat(o(e.slice(r))),sU=e=>(t,r,l,o)=>{if(!e(l))return l;{let e=Math.max(o,t[r]-Math.abs(l)),n=Math.abs(e-t[r]);return l>=0?n:-n}},sG=sU(e=>e<0),sK=sU(k),sY=()=>{let e=(e,t,r,l,o)=>{let n=sG(e,t,l,o);return sq(e,t,r+1,[n,0],sV)},t=(e,t,r,l)=>{let o=(100+r)/100,n=Math.max(l,(e[t]+r)/o);return L(e,(e,r)=>(r===t?n:e/o)-e)},r=(r,l,o,n,s,a)=>a?t(r,l,n,s):e(r,l,o,n,s);return{resizeTable:(e,t)=>e(t),clampTableDelta:sG,calcLeftEdgeDeltas:r,calcMiddleDeltas:(e,t,l,o,n,s,a)=>r(e,l,o,n,s,a),calcRightEdgeDeltas:(e,r,l,o,n,s)=>{if(s)return t(e,l,o,n);{let t=sG(e,l,o,n);return sV(e.slice(0,l)).concat([t])}},calcRedestributedWidths:(e,t,r,l)=>{if(!l)return{delta:r,newSizes:e};{let l=(t+r)/t,o=L(e,e=>e/l);return{delta:100*l-100,newSizes:o}}}}},sJ=()=>{let e=(e,t,r,l,o)=>{let n=l>=0?r:t,s=sK(e,n,l,o);return sq(e,t,r+1,[s,-s],sV)};return{resizeTable:(e,t,r)=>{r&&e(t)},clampTableDelta:(e,t,r,l,o)=>{if(!o)return sG(e,t,r,l);if(r>=0)return r;{let t=$(e,(e,t)=>e+t-l,0);return Math.max(-t,r)}},calcLeftEdgeDeltas:e,calcMiddleDeltas:(t,r,l,o,n,s)=>e(t,l,o,n,s),calcRightEdgeDeltas:(e,t,r,l,o,n)=>{if(n)return sV(e);{let t=l/e.length;return L(e,y(t))}},calcRedestributedWidths:(e,t,r,l)=>({delta:0,newSizes:e})}},sQ=e=>{let t=lN.fromTable(e);return t.grid},sX=e_("th"),sZ=e=>Y(e,e=>sX(e.element)),s0=(e,t)=>e&&t?"sectionCells":e?"section":"cells",s1=e=>{let t="thead"===e.section,r=t9(s9(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||r?{type:"header",subType:s0(t,r)}:{type:"body"}},s9=e=>{let t=F(e,e=>sX(e.element));return 0===t.length?E.some("td"):t.length===e.length?E.some("th"):E.none()},s3=e=>{let t=L(e,e=>s1(e).type),r=_(t,"header"),l=_(t,"footer");if(!r&&!l)return E.some("body");{let e=_(t,"body");return!r||e||l?r||e||!l?E.none():E.some("footer"):E.some("header")}},s2=e=>er(e.all,e=>{let t=s1(e);return"header"===t.type?E.from(t.subType):E.none()}),s5=(e,t,r)=>tR(r(e.element,t),!0,e.isLocked),s7=(e,t)=>e.section!==t?tD(e.element,e.cells,t,e.isNew):e,s4=()=>({transformRow:s7,transformCell:(e,t,r)=>{let l=r(e.element,t),o="td"!==eR(l)?th(l,"td"):l;return tR(o,e.isNew,e.isLocked)}}),s6=()=>({transformRow:s7,transformCell:s5}),s8=()=>({transformRow:(e,t)=>{let r="thead"===t?"tbody":t;return s7(e,r)},transformCell:s5}),ae={getTableSectionType:(e,t)=>{let r=lN.fromTable(e),l=s2(r).getOr(t);switch(l){case"section":return s4();case"sectionCells":return s6();case"cells":return s8()}},section:s4,sectionCells:s6,cells:s8,fallback:()=>({transformRow:C,transformCell:s5})},at=(e,t,r,l)=>{r===l?eF(e,t):eW(e,t,r)},ar=(e,t,r)=>{et(tq(e,t)).fold(()=>tt(e,r),e=>te(e,r))},al=(e,t)=>{let r=tZ(e,t).getOrThunk(()=>{let r=eV.fromTag(t,eQ(e).dom);return"thead"===t?ar(e,"caption,colgroup",r):"colgroup"===t?ar(e,"caption",r):tr(e,r),r});return ta(r),r},ao=(e,t)=>{let r=[],l=[],o=e=>L(e,e=>{e.isNew&&r.push(e.element);let t=e.element;return ta(t),M(e.cells,e=>{e.isNew&&l.push(e.element),at(e.element,"colspan",e.colspan,1),at(e.element,"rowspan",e.rowspan,1),tr(t,e.element)}),t}),n=e=>K(e,e=>L(e.cells,e=>(at(e.element,"span",e.colspan,1),e.element))),s=(t,r)=>{let l=al(e,r),s="colgroup"===r?n:o,a=s(t);ts(l,a)},a=t=>{tZ(e,t).each(ti)},i=(e,t)=>{e.length>0?s(e,t):a(t)},m=[],c=[],d=[],u=[];return M(t,e=>{switch(e.section){case"thead":m.push(e);break;case"tbody":c.push(e);break;case"tfoot":d.push(e);break;case"colgroup":u.push(e)}}),i(u,"colgroup"),i(m,"thead"),i(c,"tbody"),i(d,"tfoot"),{newRows:r,newCells:l}},an=e=>L(e,e=>{let t=td(e.element);return M(e.cells,e=>{let r=tu(e.element);at(r,"colspan",e.colspan,1),at(r,"rowspan",e.rowspan,1),tr(t,r)}),t}),as=(e,t)=>L(e,e=>ly(e,t)),aa=(e,t)=>e[t],ai=(e,t)=>{if(0===e.length)return 0;let r=e[0],l=U(e,e=>!t(r.element,e.element));return l.getOr(e.length)},am=(e,t,r,l)=>{let o=aa(e,t),n="colgroup"===o.section,s=ai(o.cells.slice(r),l),a=n?1:ai(as(e.slice(t),r),l);return{colspan:s,rowspan:a}},ac=(e,t)=>{let r=L(e,e=>L(e.cells,O)),l=(e,t,l,o)=>{for(let n=e;n<e+l;n++)for(let e=t;e<t+o;e++)r[n][e]=!0};return L(e,(o,n)=>{let s=K(o.cells,(o,s)=>{if(!1!==r[n][s])return[];{let r=am(e,n,s,t);return l(n,s,r.rowspan,r.colspan),[tC(o.element,r.rowspan,r.colspan,o.isNew)]}});return tS(o.element,s,o.section,o.isNew)})},ad=(e,t,r)=>{let l=[];M(e.colgroups,o=>{let n=[];for(let l=0;l<e.grid.columns;l++){let o=lN.getColumnAt(e,l).map(e=>tR(e.element,r,!1)).getOrThunk(()=>tR(t.colGap(),!0,!1));n.push(o)}l.push(tD(o.element,n,"colgroup",r))});for(let o=0;o<e.grid.rows;o++){let n=[];for(let l=0;l<e.grid.columns;l++){let s=lN.getAt(e,o,l).map(e=>tR(e.element,r,e.isLocked)).getOrThunk(()=>tR(t.gap(),!0,!1));n.push(s)}let s=e.all[o],a=tD(s.element,n,s.section,r);l.push(a)}return l},au=(e,t)=>ad(e,t,!1),af=e=>ac(e,eY),ag=(e,t)=>er(e.all,e=>q(e.cells,e=>eY(t,e.element))),ah=(e,t,r)=>{let l=L(t.selection,t=>rx(t).bind(t=>ag(e,t)).filter(r)),o=t3(l);return t5(o.length>0,o)},ap=(e,t,r,l,o)=>(n,s,a,i)=>{let m=lN.fromTable(n),c=E.from(null==i?void 0:i.section).getOrThunk(ae.fallback),d=t(m,s).map(t=>{let r=au(m,a),l=e(r,t,eY,o(a),c),n=lO(l.grid),s=af(l.grid);return{info:t,grid:s,cursor:l.cursor,lockedColumns:n}});return d.bind(e=>{let t=ao(n,e.grid),o=E.from(null==i?void 0:i.sizing).getOrThunk(()=>o$.getTableSize(n)),s=E.from(null==i?void 0:i.resize).getOrThunk(sJ);return r(n,e.grid,e.info,{sizing:o,resize:s,section:c}),l(n),eF(n,lR),e.lockedColumns.length>0&&eW(n,lR,e.lockedColumns.join(",")),E.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})},ab=(e,t)=>ah(e,t,k).map(e=>({cells:e,generators:t.generators,clipboard:t.clipboard})),aw=(e,t)=>t.mergable,av=(e,t)=>t.unmergable,ay=(e,t)=>ah(e,t,k),aC=(e,t)=>ah(e,t,e=>!e.isLocked),aT=(e,t)=>ag(e,t).exists(e=>!e.isLocked),ax=(e,t)=>Y(t,t=>aT(e,t)),aS=(e,t,r,l)=>{let o=lx(e).rows;if(0===o.length)return e;for(let e=t.startRow;e<=t.finishRow;e++)for(let r=t.startCol;r<=t.finishCol;r++){let t=o[e],n=ly(t,r).isLocked;lb(t,r,tR(l(),!1,n))}return e},aR=(e,t,r,l)=>{let o=lx(e).rows,n=!0;for(let e=0;e<o.length;e++)for(let s=0;s<lT(o[0]);s++){let a=o[e],i=ly(a,s),m=i.element,c=r(m,t);c&&!n?lb(a,s,tR(l(),!0,i.isLocked)):c&&(n=!1)}return e},aD=(e,t)=>$(e,(e,r)=>j(e,e=>t(e.element,r.element))?e:e.concat([r]),[]),aO=(e,t,r,l)=>(t>0&&t<e[0].cells.length&&M(e,e=>{let o=e.cells[t-1],n=0,s=l();for(;e.cells.length>t+n&&r(o.element,e.cells[t+n].element);)lb(e,t+n,tR(s,!0,e.cells[t+n].isLocked)),n++}),e),ak=(e,t,r,l)=>{let o=lx(e).rows;if(t>0&&t<o.length){let e=o[t-1].cells,n=aD(e,r);M(n,e=>{let n=E.none();for(let s=t;s<o.length;s++)for(let t=0;t<lT(o[0]);t++){let a=o[s],i=ly(a,t),m=r(i.element,e.element);m&&(n.isNone()&&(n=E.some(l())),n.each(e=>{lb(a,t,tR(e,!0,i.isLocked))}))}})}return e},aE=e=>{let t=t=>t(e),r=y(e),l={tag:!0,inner:e,fold:(t,r)=>r(e),isValue:k,isError:O,map:t=>aB.value(t(e)),mapError:()=>l,bind:t,exists:t,forall:t,getOr:r,or:()=>l,getOrThunk:r,orThunk:()=>l,getOrDie:r,each:t=>{t(e)},toOptional:()=>E.some(e)};return l},aA=e=>{let t={tag:!1,inner:e,fold:(t,r)=>t(e),isValue:O,isError:k,map:()=>t,mapError:t=>aB.error(t(e)),bind:()=>t,exists:O,forall:k,getOr:C,or:C,getOrThunk:D,orThunk:D,getOrDie:R(String(e)),each:b,toOptional:E.none};return t},aB={value:aE,error:aA,fromOption:(e,t)=>e.fold(()=>aA(t),aE)},aN=(e,t,r)=>{if(e.row>=t.length||e.column>lT(t[0]))return aB.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);let l=t.slice(e.row),o=l[0].cells.slice(e.column),n=lT(r[0]),s=r.length;return aB.value({rowDelta:l.length-s,colDelta:o.length-n})},az=(e,t)=>{let r=lT(e[0]),l=lT(t[0]);return{rowDelta:0,colDelta:r-l}},a_=(e,t)=>{let r=e.length,l=t.length;return{rowDelta:r-l,colDelta:0}},aj=(e,t,r,l)=>{let o="colgroup"===t.section?r.col:r.cell;return W(e,e=>tR(o(),!0,l(e)))},aW=(e,t,r,l)=>{let o=e[e.length-1];return e.concat(W(t,()=>{let e="colgroup"===o.section?r.colgroup:r.row,t=lS(o,e,C),n=aj(t.cells.length,t,r,e=>eg(l,e.toString()));return lw(t,n)}))},aL=(e,t,r,l)=>L(e,e=>{let o=aj(t,e,r,O);return lh(e,l,o)}),aM=(e,t,r)=>L(e,e=>$(r,(r,l)=>{let o=aj(1,e,t,k)[0];return lp(r,l,o)},e)),aI=(e,t,r)=>{let l=t.colDelta<0?aL:C,o=t.rowDelta<0?aW:C,n=lO(e),s=lT(e[0]),a=j(n,e=>e===s-1),i=l(e,Math.abs(t.colDelta),r,a?s-1:s),m=lO(i);return o(i,Math.abs(t.rowDelta),r,Q(m,k))},aP=(e,t,r,l)=>{let o=ly(e[t],r),n=x(l,o.element),s=e[t];return e.length>1&&lT(s)>1&&(r>0&&n(lC(s,r-1))||r<s.cells.length-1&&n(lC(s,r+1))||t>0&&n(lC(e[t-1],r))||t<e.length-1&&n(lC(e[t+1],r)))},aF=(e,t,r,l,o,n)=>{let s=e.row,a=e.column,i=r.length,m=lT(r[0]),c=s+i,d=a+m+n.length,u=Q(n,k);for(let e=s;e<c;e++){let n=0;for(let i=a;i<d;i++){if(u[i]){n++;continue}aP(t,e,i,o)&&aR(t,lC(t[e],i),o,l.cell);let m=i-a-n,c=ly(r[e-s],m),d=c.element,f=l.replace(d);lb(t[e],i,tR(f,!0,c.isLocked))}}return t},aH=(e,t,r)=>{let l=lT(t[0]),o=lx(t).cols.length+e.row,n=W(l-e.column,t=>t+e.column),s=q(n,e=>Y(r,t=>t!==e)).getOr(l-1);return{row:o,column:s}},a$=(e,t,r)=>F(r,r=>r>=e.column&&r<=lT(t[0])+e.column),aV=(e,t,r,l,o)=>{let n=lO(t),s=aH(e,t,n),a=lx(r).rows,i=a$(s,a,n),m=aN(s,t,a);return m.map(e=>{let r={...e,colDelta:e.colDelta-i.length},n=aI(t,r,l),m=lO(n),c=a$(s,a,m);return aF(s,n,a,l,o,c)})},aq=(e,t,r,l,o)=>{aO(t,e,o,l.cell);let n=a_(r,t),s=aI(r,n,l),a=a_(t,s),i=aI(t,a,l);return L(i,(t,r)=>lh(t,e,s[r].cells))},aU=(e,t,r,l,o)=>{ak(t,e,o,l.cell);let n=lO(t),s=az(t,r),a={...s,colDelta:s.colDelta-n.length},i=aI(t,a,l),{cols:m,rows:c}=lx(i),d=lO(i),u=az(r,t),f={...u,colDelta:u.colDelta+d.length},g=aM(r,l,d),h=aI(g,f,l);return[...m,...c.slice(0,e),...h,...c.slice(e,c.length)]},aG=(e,t,r,l)=>lS(e,e=>l(e,r),t),aK=(e,t,r,l,o)=>{let{rows:n,cols:s}=lx(e),a=n.slice(0,t),i=n.slice(t),m=aG(n[r],(e,r)=>{let s=t>0&&t<n.length&&l(lC(n[t-1],r),lC(n[t],r)),a=s?ly(n[t],r):tR(o(e.element,l),!0,e.isLocked);return a},l,o);return[...s,...a,m,...i]},aY=(e,t,r,l,o,n,s)=>{if("colgroup"!==r&&l)return ly(e,t);{let t=ly(e,o);return tR(s(t.element,n),!0,!1)}},aJ=(e,t,r,l,o)=>L(e,e=>{let n=t>0&&t<lT(e)&&l(lC(e,t-1),lC(e,t)),s=aY(e,t,e.section,n,r,l,o);return lp(e,t,s)}),aQ=(e,t)=>K(e,e=>{let r=e.cells,l=H(t,(e,t)=>t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e,r);return l.length>0?[tD(e.element,l,e.section,e.isNew)]:[]}),aX=(e,t,r)=>{let{rows:l,cols:o}=lx(e);return[...o,...l.slice(0,t),...l.slice(r+1)]},aZ=(e,t,r,l)=>void 0!==lC(e[t],r)&&t>0&&l(lC(e[t-1],r),lC(e[t],r)),a0=(e,t,r)=>t>0&&r(lC(e,t-1),lC(e,t)),a1=(e,t,r,l)=>aZ(e,t,r,l)||a0(e[t],r,l),a9=(e,t)=>{let r=Y(t,C)&&sZ(e.cells);return r?k:(e,r,l)=>{let o=eR(e.element);return!("th"===o&&t[l])}},a3=(e,t)=>{let r=Y(t,C)&&sZ(e);return r?k:(e,r,l)=>{let o=eR(e.element);return!("th"===o&&t[r])}},a2=(e,t,r,l)=>{let o=e=>"row"===e?rp(t):rh(t),n=e=>o(e)?`${e}group`:e;if(e)return sX(t)?n(r):null;if(!(l&&sX(t)))return null;{let e="row"===r?"col":"row";return n(e)}},a5=(e,t)=>(r,l,o)=>E.some(a2(e,r.element,"col",t[o])),a7=(e,t)=>(r,l)=>E.some(a2(e,r.element,"row",t[l])),a4=(e,t,r)=>tR(r(e.element,t),!0,e.isLocked),a6=(e,t,r,l,o,n,s)=>{let a=e=>j(t,t=>r(e.element,t.element));return L(e,(e,t)=>lv(e,(e,i)=>{if(!a(e))return e;{let a=s(e,t,i)?o(e,r,l):e;return n(a,t,i).each(e=>{eM(a.element,{scope:E.from(e)})}),a}}))},a8=(e,t,r)=>K(e,(l,o)=>a1(e,o,t,r)?[]:[ly(l,t)]),ie=(e,t,r)=>{let l=e[t];return K(l.cells,(l,o)=>a1(e,t,o,r)?[]:[l])},it=(e,t,r,l,o)=>{let n=lx(e).rows,s=K(t,e=>a8(n,e,l)),a=L(n,e=>sZ(e.cells)),i=a3(s,a),m=a7(r,a);return a6(e,s,l,o,a4,m,i)},ir=(e,t,r,l,o,n,s)=>{let{cols:a,rows:i}=lx(e),m=i[t[0]],c=K(t,e=>ie(i,e,o)),d=L(m.cells,(e,t)=>sZ(a8(i,t,o))),u=[...i];M(t,e=>{u[e]=s.transformRow(i[e],r)});let f=[...a,...u],g=a9(m,d),h=a5(l,d);return a6(f,c,o,n,s.transformCell,h,g)},il=(e,t,r,l)=>{let o=lx(e).rows,n=L(t,e=>ly(o[e.row],e.column));return a6(e,n,r,l,a4,E.none,k)},io={generate:e=>{if(!m(e))throw Error("cases must be an array");if(0===e.length)throw Error("there must be at least one case");let t=[],r={};return M(e,(l,o)=>{let n=el(l);if(1!==n.length)throw Error("one and only one name per case");let s=n[0],a=l[s];if(void 0!==r[s])throw Error("duplicate key detected:"+s);if("cata"===s)throw Error("cannot have a case named cata (sorry)");if(!m(a))throw Error("case arguments must be an array");t.push(s),r[s]=(...r)=>{let l=r.length;if(l!==a.length)throw Error("Wrong number of arguments to case "+s+". Expected "+a.length+" ("+a+"), got "+l);return{fold:(...t)=>{if(t.length!==e.length)throw Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);let l=t[o];return l.apply(null,r)},match:e=>{let l=el(e);if(t.length!==l.length)throw Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+l.join(","));let o=Y(t,e=>_(l,e));if(!o)throw Error("Not all branches were specified when using match. Specified: "+l.join(", ")+"\nRequired: "+t.join(", "));return e[s].apply(null,r)},log:e=>{console.log(e,{constructors:t,constructor:s,params:r})}}}}),r}},is=io.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),ia={...is},ii=(e,t)=>0===e.length?ia.none():1===e.length?ia.only(0):0===t?ia.left(0,1):t===e.length-1?ia.right(t-1,t):t>0&&t<e.length-1?ia.middle(t-1,t,t+1):ia.none(),im=(e,t,r,l,o)=>{let n=e.slice(0),s=ii(e,t),a=y(L(n,y(0)));return s.fold(a,e=>l.singleColumnWidth(n[e],r),(e,t)=>o.calcLeftEdgeDeltas(n,e,t,r,l.minCellWidth(),l.isRelative),(e,t,s)=>o.calcMiddleDeltas(n,e,t,s,r,l.minCellWidth(),l.isRelative),(e,t)=>o.calcRightEdgeDeltas(n,e,t,r,l.minCellWidth(),l.isRelative))},ic=(e,t,r)=>{let l=0;for(let o=e;o<t;o++)l+=void 0!==r[o]?r[o]:0;return l},id=(e,t)=>{let r=lN.justCells(e);return L(r,e=>{let r=ic(e.column,e.column+e.colspan,t);return{element:e.element,width:r,colspan:e.colspan}})},iu=(e,t)=>{let r=lN.justColumns(e);return L(r,(e,r)=>({element:e.element,width:t[r],colspan:e.colspan}))},ig=(e,t)=>{let r=lN.justCells(e);return L(r,e=>{let r=ic(e.row,e.row+e.rowspan,t);return{element:e.element,height:r,rowspan:e.rowspan}})},ih=(e,t)=>L(e.all,(e,r)=>({element:e.element,height:t[r]})),ip=e=>H(e,(e,t)=>e+t,0),ib=(e,t)=>lN.hasColumns(e)?iu(e,t):id(e,t),iw=(e,t,r)=>{let l=ib(e,t);M(l,e=>{r.setElementWidth(e.element,e.width)})},iv=(e,t,r,l,o)=>{let n=lN.fromTable(e),s=o.getCellDelta(t),a=o.getWidths(n,o),i=r===n.grid.columns-1,m=l.clampTableDelta(a,r,s,o.minCellWidth(),i),c=im(a,r,m,o,l),d=L(c,(e,t)=>e+a[t]);iw(n,d,o),l.resizeTable(o.adjustTableWidth,m,i)},iy=(e,t,r,l)=>{let o=lN.fromTable(e),n=oW(o,e,l),s=L(n,(e,l)=>r===l?Math.max(t+e,rv()):e),a=ig(o,s),i=ih(o,s);M(i,e=>{oa(e.element,e.height)}),M(a,e=>{oa(e.element,e.height)});let m=ip(s);oa(e,m)},iC=(e,t,r,l,o)=>{let n=lN.generate(t),s=l.getWidths(n,l),a=l.pixelWidth(),{newSizes:i,delta:m}=o.calcRedestributedWidths(s,a,r.pixelDelta,l.isRelative);iw(n,i,l),l.adjustTableWidth(m)},iT=(e,t,r,l)=>{let o=lN.generate(t),n=l.getWidths(o,l);iw(o,n,l)},ix=e=>$(e,(e,t)=>{let r=j(e,e=>e.column===t.column);return r?e:e.concat([t])},[]).sort((e,t)=>e.column-t.column),iS=e_("col"),iR=e_("colgroup"),iD=e=>"tr"===eR(e)||iR(e),iO=e=>{let t=rf(e,"colspan",1),r=rf(e,"rowspan",1);return{element:e,colspan:t,rowspan:r}},ik=e=>eP(e,"scope").map(e=>e.substr(0,3)),iE={modification:(e,t=iO)=>{let r=t=>iS(t.element)?e.col(t):e.cell(t),l=t=>iR(t.element)?e.colgroup(t):e.row(t),o=e=>{if(iD(e))return l({element:e});{let l=r(t(e));return n=E.some({item:e,replacement:l}),l}},n=E.none();return{getOrInit:(e,t)=>n.fold(()=>o(e),r=>t(e,r.item)?r.replacement:o(e))}},transform:e=>t=>{let r=[],l=(e,t)=>q(r,r=>t(r.item,e)),o=l=>{let o="td"===e?{scope:null}:{},n=t.replace(l,e,o);return r.push({item:l,sub:n}),n};return{replaceOrInit:(e,t)=>iD(e)||iS(e)?e:l(e,t).fold(()=>o(e),r=>t(e,r.item)?r.sub:o(e))}},merging:e=>({unmerge:t=>{let r=ik(t);return r.each(e=>eW(t,"scope",e)),()=>{let l=e.cell({element:t,colspan:1,rowspan:1});return rd(l,"width"),rd(t,"width"),r.each(e=>eW(l,"scope",e)),l}},merge:e=>(rd(e[0],"width"),(()=>{let t=t3(L(e,ik));if(0===t.length)return E.none();{let e=t[0],r=["row","col"],l=j(t,t=>t!==e&&_(r,t));return l?E.none():E.from(e)}})().fold(()=>eF(e[0],"scope"),t=>eW(e[0],"scope",t+"group")),y(e[0]))})},iA=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],iB=(e,t)=>{let r=e.property().name(t);return _(["ol","ul"],r)},iN=(e,t)=>{let r=e.property().name(t);return _(iA,r)},iz=(e,t)=>_(["br","img","hr","input"],e.property().name(t)),i_=n6(),ij=e=>iN(i_,e),iW=e=>iB(i_,e),iL=e=>iz(i_,e),iM=e=>{let t=e_("br"),r=e=>Y(e,e=>t(e)||eB(e)&&0===oX(e).trim().length),l=e=>"li"===eR(e)||tK(e,iW).isSome(),o=e=>e5(e).map(e=>!!ij(e)||!!iL(e)&&"img"!==eR(e)).getOr(!1),n=e=>o4(e).bind(r=>{let n=o(r);return e1(r).map(o=>!0===n||l(o)||t(r)||ij(o)&&!eY(e,o)?[]:[eV.fromTag("br")])}).getOr([]),s=(()=>{let t=K(e,e=>{let t=e7(e);return r(t)?[]:t.concat(n(e))});return 0===t.length?[eV.fromTag("br")]:t})();ta(e[0]),ts(e[0],s)},iI=e=>nj(e,!0),iP=e=>{let t=rS(e);0===t.length&&ti(e)},iF=(e,t)=>({grid:e,cursor:t}),iH=e=>er(e,e=>er(e.cells,e=>{let t=e.element;return t5(iI(t),t)})),i$=(e,t,r)=>{var l,o;let n=lx(e).rows;return E.from(null===(o=null===(l=n[t])||void 0===l?void 0:l.cells[r])||void 0===o?void 0:o.element).filter(iI).orThunk(()=>iH(n))},iV=(e,t,r)=>{let l=i$(e,t,r);return iF(e,l)},iq=e=>$(e,(e,t)=>{let r=j(e,e=>e.row===t.row);return r?e:e.concat([t])},[]).sort((e,t)=>e.row-t.row),iU=(e,t)=>(r,l,o,n,s)=>{let a=iq(l),i=L(a,e=>e.row),m=ir(r,i,e,t,o,n.replaceOrInit,s);return iV(m,l[0].row,l[0].column)},iG=iU("thead",!0),iK=iU("tbody",!1),iY=iU("tfoot",!1),iJ=(e,t,r)=>{let l=rN(e,r.section),o=lN.generate(l);return ad(o,t,!0)},iQ=(e,t,r,l)=>iT(e,t,r,l.sizing),iX=(e,t,r,l)=>iC(e,t,r,l.sizing,l.resize),iZ=(e,t)=>j(t,e=>0===e.column&&e.isLocked),i0=(e,t)=>j(t,t=>t.column+t.colspan>=e.grid.columns&&t.isLocked),i1=(e,t)=>{let r=lz(e),l=ix(t);return $(l,(e,t)=>{let l=r[t.column],o=l.map(lu).getOr(0);return e+o},0)},i9=e=>(t,r)=>ay(t,r).filter(r=>!(e?iZ:i0)(t,r)).map(e=>({details:e,pixelDelta:i1(t,e)})),i3=e=>(t,r)=>ab(t,r).filter(r=>!(e?iZ:i0)(t,r.cells)),i2=iE.transform("th"),i5=iE.transform("td"),i7=ap((e,t,r,l)=>{let o=t[0].row,n=iq(t),s=H(n,(e,t)=>{let n=aK(e.grid,o,t.row+e.delta,r,l.getOrInit);return{grid:n,delta:e.delta+1}},{grid:e,delta:0}).grid;return iV(s,o,t[0].column)},ay,b,b,iE.modification),i4=ap((e,t,r,l)=>{let o=iq(t),n=o[o.length-1],s=n.row+n.rowspan,a=H(o,(e,t)=>aK(e,s,t.row,r,l.getOrInit),e);return iV(a,s,t[0].column)},ay,b,b,iE.modification),i6=ap((e,t,r,l)=>{let o=t.details,n=ix(o),s=n[0].column,a=H(n,(e,t)=>{let o=aJ(e.grid,s,t.column+e.delta,r,l.getOrInit);return{grid:o,delta:e.delta+1}},{grid:e,delta:0}).grid;return iV(a,o[0].row,s)},i9(!0),iX,b,iE.modification),i8=ap((e,t,r,l)=>{let o=t.details,n=o[o.length-1],s=n.column+n.colspan,a=ix(o),i=H(a,(e,t)=>aJ(e,s,t.column,r,l.getOrInit),e);return iV(i,o[0].row,s)},i9(!1),iX,b,iE.modification),me=ap((e,t,r,l)=>{let o=ix(t.details),n=aQ(e,L(o,e=>e.column)),s=n.length>0?n[0].cells.length-1:0;return iV(n,o[0].row,Math.min(o[0].column,s))},(e,t)=>aC(e,t).map(t=>({details:t,pixelDelta:-i1(e,t)})),iX,iP,iE.modification),mt=ap((e,t,r,l)=>{let o=iq(t),n=aX(e,o[0].row,o[o.length-1].row),s=n.length>0?n.length-1:0;return iV(n,Math.min(t[0].row,s),t[0].column)},ay,b,iP,iE.modification),mr=ap((e,t,r,l)=>{let o=ix(t),n=L(o,e=>e.column),s=it(e,n,!0,r,l.replaceOrInit);return iV(s,t[0].row,t[0].column)},aC,b,b,i2),ml=ap((e,t,r,l)=>{let o=ix(t),n=L(o,e=>e.column),s=it(e,n,!1,r,l.replaceOrInit);return iV(s,t[0].row,t[0].column)},aC,b,b,i5),mo=ap(iG,aC,b,b,i2),mn=ap(iK,aC,b,b,i5),ms=ap(iY,aC,b,b,i5),ma=ap((e,t,r,l)=>{let o=il(e,t,r,l.replaceOrInit);return iV(o,t[0].row,t[0].column)},aC,b,b,i2),mi=ap((e,t,r,l)=>{let o=il(e,t,r,l.replaceOrInit);return iV(o,t[0].row,t[0].column)},aC,b,b,i5),mm=ap((e,t,r,l)=>{let o=t.cells;iM(o);let n=aS(e,t.bounds,r,l.merge(o));return iF(n,E.from(o[0]))},(e,t)=>aw(e,t).filter(t=>ax(e,t.cells)),iQ,b,iE.merging),mc=ap((e,t,r,l)=>{let o=H(t,(e,t)=>aR(e,t,r,l.unmerge(t)),e);return iF(o,E.from(t[0]))},(e,t)=>av(e,t).filter(t=>ax(e,t)),iQ,b,iE.merging),md=ap((e,t,r,l)=>{let o=((e,t)=>{let r=lN.fromTable(e);return ad(r,t,!0)})(t.clipboard,t.generators),n=tv(t.row,t.column),s=aV(n,e,o,t.generators,r);return s.fold(()=>iF(e,E.some(t.element)),e=>iV(e,t.row,t.column))},(e,t)=>rx(t.element).bind(r=>ag(e,r).map(e=>{let r={...e,generators:t.generators,clipboard:t.clipboard};return r})),iQ,b,iE.modification),mu=ap((e,t,r,l)=>{let o=lx(e).rows,n=t.cells[0].column,s=o[t.cells[0].row],a=iJ(t.clipboard,t.generators,s),i=aq(n,e,a,t.generators,r);return iV(i,t.cells[0].row,t.cells[0].column)},i3(!0),b,b,iE.modification),mf=ap((e,t,r,l)=>{let o=lx(e).rows,n=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,s=o[t.cells[0].row],a=iJ(t.clipboard,t.generators,s),i=aq(n,e,a,t.generators,r);return iV(i,t.cells[0].row,t.cells[0].column)},i3(!1),b,b,iE.modification),mg=ap((e,t,r,l)=>{let o=lx(e).rows,n=t.cells[0].row,s=o[n],a=iJ(t.clipboard,t.generators,s),i=aU(n,e,a,t.generators,r);return iV(i,t.cells[0].row,t.cells[0].column)},ab,b,b,iE.modification),mh=ap((e,t,r,l)=>{let o=lx(e).rows,n=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,s=o[t.cells[0].row],a=iJ(t.clipboard,t.generators,s),i=aU(n,e,a,t.generators,r);return iV(i,t.cells[0].row,t.cells[0].column)},ab,b,b,iE.modification),mp=(e,t)=>{let r=lN.fromTable(e),l=ay(r,t);return l.bind(e=>{let t=e[e.length-1],l=e[0].column,o=t.column+t.colspan,n=G(L(r.all,e=>F(e.cells,e=>e.column>=l&&e.column<o)));return s9(n)}).getOr("")},mb=(e,t)=>{let r=lN.fromTable(e),l=ay(r,t);return l.bind(s9).getOr("")},mw=(e,t)=>{let r=lN.fromTable(e),l=ay(r,t);return l.bind(e=>{let t=e[e.length-1],l=e[0].row,o=t.row+t.rowspan,n=r.all.slice(l,o);return s3(n)}).getOr("")},mv=(e,t)=>e.dispatch("NewRow",{node:t}),my=(e,t)=>e.dispatch("NewCell",{node:t}),mC=(e,t,r)=>{e.dispatch("TableModified",{...r,table:t})},mT=(e,t,r,l,o)=>{e.dispatch("TableSelectionChange",{cells:t,start:r,finish:l,otherCells:o})},mx=e=>{e.dispatch("TableSelectionClear")},mS=(e,t,r,l,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:r,height:l,origin:o})},mR=(e,t,r,l,o)=>{e.dispatch("ObjectResized",{target:t,width:r,height:l,origin:o})},mD={structure:!1,style:!0},mO={structure:!0,style:!1},mk={structure:!0,style:!0},mE=(e,t)=>nR(e)?o$.percentageSize(t):nD(e)?o$.pixelSize(t):o$.getTableSize(t),mA=(e,t,r)=>{let l=e=>"table"===eR(nL(e)),o=nw(e),n=nx(e)?b:s$,s=t=>{switch(ny(e)){case"section":return ae.section();case"sectionCells":return ae.sectionCells();case"cells":return ae.cells();default:return ae.getTableSectionType(t,"section")}},a=(t,l)=>l.cursor.fold(()=>{let l=rS(t);return ee(l).filter(tM).map(l=>{r.clearSelectedCells(t.dom);let o=e.dom.createRng();return o.selectNode(l.dom),e.selection.setRng(o),eW(l,"data-mce-selected","1"),o})},l=>{let o=sH(l),n=e.dom.createRng();return n.setStart(o.element.dom,o.offset),n.setEnd(o.element.dom,o.offset),e.selection.setRng(n),r.clearSelectedCells(t.dom),E.some(n)}),i=(r,l,n,i)=>(m,c,d=!1)=>{nI(m);let u=eV.fromDom(e.getDoc()),f=ni(n,u,o),g={sizing:mE(e,m),resize:nx(e)?sY():sJ(),section:s(m)};return l(m)?r(m,c,f,g).bind(r=>{t.refresh(m.dom),M(r.newRows,t=>{mv(e,t.dom)}),M(r.newCells,t=>{my(e,t.dom)});let l=a(m,r);return tM(m)&&(nI(m),d||mC(e,m.dom,i)),l.map(e=>({rng:e,effect:i}))}):E.none()},m=i(mt,t=>!l(e)||sQ(t).rows>1,b,mO),c=i(me,t=>!l(e)||sQ(t).columns>1,b,mO),d=i(i7,k,b,mO),u=i(i4,k,b,mO),f=i(i6,k,n,mO),g=i(i8,k,n,mO),h=i(mm,k,b,mO),p=i(mc,k,b,mO),w=i(mu,k,b,mO),v=i(mf,k,b,mO),y=i(mg,k,b,mO),C=i(mh,k,b,mO),T=i(md,k,b,mk),x=i(ma,k,b,mO),S=i(mi,k,b,mO),R=i(mr,k,b,mO),D=i(ml,k,b,mO),O=i(mo,k,b,mO),A=i(mn,k,b,mO),B=i(ms,k,b,mO);return{deleteRow:m,deleteColumn:c,insertRowsBefore:d,insertRowsAfter:u,insertColumnsBefore:f,insertColumnsAfter:g,mergeCells:h,unmergeCells:p,pasteColsBefore:w,pasteColsAfter:v,pasteRowsBefore:y,pasteRowsAfter:C,pasteCells:T,makeCellsHeader:x,unmakeCellsHeader:S,makeColumnsHeader:R,unmakeColumnsHeader:D,makeRowsHeader:O,makeRowsBody:A,makeRowsFooter:B,getTableRowType:mw,getTableCellType:mb,getTableColType:mp}},mB=(e,t,r)=>{let l=rf(e,t,1);1===r||l<=1?eF(e,t):eW(e,t,Math.min(r,l))},mN=(e,t)=>r=>{let l=r.column+r.colspan-1,o=r.column;return l>=e&&o<t},mz=(e,t,r)=>{if(!lN.hasColumns(e))return[];{let l=F(lN.justColumns(e),mN(t,r)),o=L(l,e=>{let l=tu(e.element);return mB(l,"span",r-t),l}),n=eV.fromTag("colgroup");return ts(n,o),[n]}},m_=(e,t,r)=>L(e.all,e=>{let l=F(e.cells,mN(t,r)),o=L(l,e=>{let l=tu(e.element);return mB(l,"colspan",r-t),l}),n=eV.fromTag("tr");return ts(n,o),n}),mj=(e,t)=>{let r=lN.fromTable(e),l=aC(r,t);return l.map(e=>{let t=e[e.length-1],l=e[0].column,o=t.column+t.colspan,n=mz(r,l,o),s=m_(r,l,o);return[...n,...s]})},mW=(e,t,r)=>{let l=lN.fromTable(e),o=ay(l,t);return o.bind(e=>{let t=ad(l,r,!1),o=lx(t).rows,n=o.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),s=K(n,e=>{let t=F(e.cells,e=>!e.isLocked);return t.length>0?[{...e,cells:t}]:[]}),a=af(s);return t5(a.length>0,a)}).map(e=>an(e))},mL=io.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),mM=(e,t,r)=>{let l=r.substring(0,r.length-e.length),o=parseFloat(l);return l===o.toString()?t(o):mL.invalid(r)},mI={...mL,from:e=>t8(e,"%")?mM("%",mL.percent,e):t8(e,"px")?mM("px",mL.pixels,e):mL.invalid(e)},mP=(e,t)=>L(e,e=>{let r=mI.from(e);return r.fold(()=>e,e=>e/t*100+"%",e=>e+"%")}),mF=(e,t,r)=>{let l=r/t;return L(e,e=>{let t=mI.from(e);return t.fold(()=>e,e=>e*l+"px",e=>e/100*r+"px")})},mH=(e,t)=>{let r=e.fold(()=>y(""),e=>{let r=e/t;return y(r+"px")},()=>{let e=100/t;return y(e+"%")});return W(t,r)},m$=(e,t,r)=>e.fold(()=>t,e=>mF(t,r,e),e=>mP(t,r)),mV=(e,t,r)=>{let l=mI.from(r),o=Y(e,e=>"0px"===e)?mH(l,e.length):m$(l,e,t);return mK(o)},mq=(e,t)=>0===e.length?t:H(e,(e,t)=>mI.from(t).fold(y(0),C,C)+e,0),mU=(e,t)=>{let r=Math.floor(e);return{value:r+t,remainder:e-r}},mG=(e,t)=>mI.from(e).fold(y(e),e=>e+t+"px",e=>e+t+"%"),mK=e=>{if(0===e.length)return e;let t=H(e,(e,t)=>{let r=mI.from(t).fold(()=>({value:t,remainder:0}),e=>mU(e,"px"),e=>({value:e+"%",remainder:0}));return{output:[r.value].concat(e.output),remainder:e.remainder+r.remainder}},{output:[],remainder:0}),r=t.output;return r.slice(0,r.length-1).concat([mG(r[r.length-1],Math.round(t.remainder))])},mY=mI.from,mJ=(e,t,r)=>{M(t,t=>{let l=e.slice(t.column,t.colspan+t.column),o=mq(l,rw());rs(t.element,"width",o+r)})},mQ=(e,t,r)=>{M(t,(t,l)=>{let o=mq([e[l]],rw());rs(t.element,"width",o+r)})},mX=(e,t,r,l)=>{M(r,t=>{let r=e.slice(t.row,t.rowspan+t.row),o=mq(r,rv());rs(t.element,"height",o+l)}),M(t,(t,r)=>{rs(t.element,"height",e[r])})},mZ=e=>mY(e).fold(y("px"),y("px"),y("%")),m0=(e,t,r)=>{let l=lN.fromTable(e),o=l.all,n=lN.justCells(l),s=lN.justColumns(l);t.each(t=>{let r=mZ(t),o=ld(e),a=oN(l,e),i=mV(a,o,t);lN.hasColumns(l)?mQ(i,s,r):mJ(i,n,r),rs(e,"width",t)}),r.each(t=>{let r=mZ(t),s=lP(e),a=oL(l,e,l2),i=mV(a,s,t);mX(i,o,n,r),rs(e,"height",t)})},m1=e=>og(e).exists(e=>ot.test(e)),m9=e=>og(e).exists(e=>or.test(e)),m3=e=>og(e).isNone(),m2=e=>{eF(e,"width")},m5=e=>{let t=oT(e);m0(e,E.some(t),E.none()),m2(e)},m7=e=>{let t=oC(e);m0(e,E.some(t),E.none()),m2(e)},m4=e=>{rd(e,"width");let t=rR(e),r=t.length>0?t:rS(e);M(r,e=>{rd(e,"width"),m2(e)}),m2(e)},m6={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},m8=()=>eV.fromTag("th"),ce=()=>eV.fromTag("td"),ct=()=>eV.fromTag("col"),cr=(e,t,r,l)=>{let o=eV.fromTag("tr");for(let n=0;n<e;n++){let e=l<t||n<r?m8():ce();n<r&&eW(e,"scope","row"),l<t&&eW(e,"scope","col"),tr(e,eV.fromTag("br")),tr(o,e)}return o},cl=e=>{let t=eV.fromTag("colgroup");return W(e,()=>tr(t,ct())),t},co=(e,t,r,l)=>W(e,e=>cr(t,r,l,e)),cn=(e,t,r,l,o,n=m6)=>{let s=eV.fromTag("table"),a="cells"!==o;ra(s,n.styles),eL(s,n.attributes),n.colGroups&&tr(s,cl(t));let i=Math.min(e,r);if(a&&r>0){let e=eV.fromTag("thead");tr(s,e);let n=co(r,t,"sectionCells"===o?i:0,l);ts(e,n)}let m=eV.fromTag("tbody");tr(s,m);let c=a?0:r,d=co(a?e-i:e,t,c,l);return ts(m,d),s},cs=e=>e.dom.innerHTML,ca=e=>{let t=eV.fromTag("div"),r=eV.fromDom(e.dom.cloneNode(!0));return tr(t,r),cs(t)},ci=(e,t)=>{e.selection.select(t.dom,!0),e.selection.collapse(!0)},cm=(e,t)=>{t0(t,"td,th").each(x(ci,e))},cc=(e,t)=>{M(tU(t,"tr"),t=>{mv(e,t.dom),M(tU(t,"th,td"),t=>{my(e,t.dom)})})},cd=e=>a(e)&&-1!==e.indexOf("%"),cu=(e,t,r,l,o)=>{let n=nN(e),s={styles:n,attributes:nB(e),colGroups:nz(e)};return e.undoManager.ignore(()=>{let n=cn(r,t,o,l,ny(e),s);eW(n,"data-mce-id","__mce");let a=ca(n);e.insertContent(a),e.addVisual()}),t0(nL(e),'table[data-mce-id="__mce"]').map(t=>(nD(e)?m7(t):nO(e)?m4(t):(nR(e)||cd(n.width))&&m5(t),nI(t),eF(t,"data-mce-id"),cc(e,t),cm(e,t),t.dom)).getOrNull()},cf=(e,t,r,l={})=>{let o=e=>p(e)&&e>0;if(!(o(t)&&o(r)))return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null;{let o=l.headerRows||0,n=l.headerColumns||0;return cu(e,r,t,n,o)}};var cg=tinymce.util.Tools.resolve("tinymce.FakeClipboard");let ch="x-tinymce/dom-table-",cp=ch+"rows",cb=ch+"columns",cw=e=>{let t=cg.FakeClipboardItem(e);cg.write([t])},cv=e=>{var t;let r=null!==(t=cg.read())&&void 0!==t?t:[];return er(r,t=>E.from(t.getType(e)))},cy=e=>{cv(e).isSome()&&cg.clear()},cC=e=>{e.fold(cx,e=>cw({[cp]:e}))},cT=()=>cv(cp),cx=()=>cy(cp),cS=e=>{e.fold(cD,e=>cw({[cb]:e}))},cR=()=>cv(cb),cD=()=>cy(cb),cO=e=>sE(nP(e),nM(e)).filter(nU),ck=e=>sA(nP(e),nM(e)).filter(nU),cE=(e,t)=>{let r=nM(e),l=t=>cO(e).each(l=>{let o=nO(e)||nD(e)||nR(e);o||rD(l,r).each(r=>{"relative"!==t||m1(r)?"fixed"!==t||m9(r)?"responsive"!==t||m3(r)||m4(r):m7(r):m5(r),nI(r),mC(e,r.dom,mO)})}),o=e=>rD(e,r),n=t=>ck(e).bind(e=>o(e).map(r=>t(r,e))),s=t=>{e.focus()},m=(t,r=!1)=>n((l,o)=>{let n=sS(sB(e),l,o);t(l,n,r).each(s)}),c=()=>n((t,r)=>{let l=sS(sB(e),t,r),o=ni(b,eV.fromDom(e.getDoc()),E.none());return mW(t,l,o)}),d=()=>n((t,r)=>{let l=sS(sB(e),t,r);return mj(t,l)}),u=(t,r)=>r().each(r=>{let l=L(r,e=>tu(e));n((r,o)=>{let n=nm(eV.fromDom(e.getDoc())),a=sD(sB(e),o,l,n);t(r,a).each(s)})}),f=e=>(t,r)=>ef(r,"type").each(t=>{m(e(t),r.no_events)});en({mceTableSplitCells:()=>m(t.unmergeCells),mceTableMergeCells:()=>m(t.mergeCells),mceTableInsertRowBefore:()=>m(t.insertRowsBefore),mceTableInsertRowAfter:()=>m(t.insertRowsAfter),mceTableInsertColBefore:()=>m(t.insertColumnsBefore),mceTableInsertColAfter:()=>m(t.insertColumnsAfter),mceTableDeleteCol:()=>m(t.deleteColumn),mceTableDeleteRow:()=>m(t.deleteRow),mceTableCutCol:()=>d().each(e=>{cS(e),m(t.deleteColumn)}),mceTableCutRow:()=>c().each(e=>{cC(e),m(t.deleteRow)}),mceTableCopyCol:()=>d().each(e=>cS(e)),mceTableCopyRow:()=>c().each(e=>cC(e)),mceTablePasteColBefore:()=>u(t.pasteColsBefore,cR),mceTablePasteColAfter:()=>u(t.pasteColsAfter,cR),mceTablePasteRowBefore:()=>u(t.pasteRowsBefore,cT),mceTablePasteRowAfter:()=>u(t.pasteRowsAfter,cT),mceTableDelete:()=>cO(e).each(t=>{rD(t,r).filter(S(r)).each(t=>{let r=eV.fromText("");if(te(t,r),ti(t),e.dom.isEmpty(e.getBody()))e.setContent(""),e.selection.setCursorLocation();else{let t=e.dom.createRng();t.setStart(r.dom,0),t.setEnd(r.dom,0),e.selection.setRng(t),e.nodeChanged()}})}),mceTableCellToggleClass:(t,r)=>{n(t=>{let l=sB(e),o=Y(l,t=>e.formatter.match("tablecellclass",{value:r},t.dom)),n=o?e.formatter.remove:e.formatter.apply;M(l,e=>n("tablecellclass",{value:r},e.dom)),mC(e,t.dom,mD)})},mceTableToggleClass:(t,r)=>{n(t=>{e.formatter.toggle("tableclass",{value:r},t.dom),mC(e,t.dom,mD)})},mceTableToggleCaption:()=>{cO(e).each(t=>{rD(t,r).each(r=>{tZ(r,"caption").fold(()=>{let t=eV.fromTag("caption");tr(t,eV.fromText("Caption")),tl(r,t,0),e.selection.setCursorLocation(t.dom,0)},l=>{e_("caption")(t)&&eK("td",r).each(t=>e.selection.setCursorLocation(t.dom,0)),ti(l)}),mC(e,r.dom,mO)})})},mceTableSizingMode:(e,t)=>l(t),mceTableCellType:f(e=>"th"===e?t.makeCellsHeader:t.unmakeCellsHeader),mceTableColType:f(e=>"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader),mceTableRowType:f(e=>{switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}})},(t,r)=>e.addCommand(r,t)),e.addCommand("mceInsertTable",(t,r)=>{cf(e,r.rows,r.columns,r.options)}),e.addCommand("mceTableApplyCellStyle",(t,r)=>{let l=e=>"tablecell"+e.toLowerCase().replace("-","");if(!i(r))return;let n=F(sB(e),nU);if(0===n.length)return;let s=ec(r,(t,r)=>e.formatter.has(l(r))&&a(t));ep(s)||(en(s,(t,r)=>{let o=l(r);M(n,r=>{""===t?e.formatter.remove(o,{value:null},r.dom,!0):e.formatter.apply(o,{value:t},r.dom)})}),o(n[0]).each(t=>mC(e,t.dom,mD)))})},cA=(e,t)=>{let r=nM(e),l=t=>sA(nP(e)).bind(l=>rD(l,r).map(r=>{let o=sS(sB(e),r,l);return t(r,o)})).getOr("");en({mceTableRowType:()=>l(t.getTableRowType),mceTableCellType:()=>l(t.getTableCellType),mceTableColType:()=>l(t.getTableColType)},(t,r)=>e.addQueryValueHandler(r,t))},cB=io.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),cN=cB.before,cz=cB.on,c_=cB.after,cj={before:cN,on:cz,after:c_,cata:(e,t,r,l)=>e.fold(t,r,l),getStart:e=>e.fold(C,C,C)},cW={create:(e,t)=>({selection:e,kill:t})},cL=(e,t)=>{let r=e.document.createRange();return r.selectNode(t.dom),r},cM=(e,t)=>{let r=e.document.createRange();return cI(r,t),r},cI=(e,t)=>e.selectNodeContents(t.dom),cP=(e,t)=>{t.fold(t=>{e.setStartBefore(t.dom)},(t,r)=>{e.setStart(t.dom,r)},t=>{e.setStartAfter(t.dom)})},cF=(e,t)=>{t.fold(t=>{e.setEndBefore(t.dom)},(t,r)=>{e.setEnd(t.dom,r)},t=>{e.setEndAfter(t.dom)})},cH=(e,t,r)=>{let l=e.document.createRange();return cP(l,t),cF(l,r),l},c$=(e,t,r,l,o)=>{let n=e.document.createRange();return n.setStart(t.dom,r),n.setEnd(l.dom,o),n},cV=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),cq=e=>{let t=e.getClientRects(),r=t.length>0?t[0]:e.getBoundingClientRect();return r.width>0||r.height>0?E.some(r).map(cV):E.none()},cU=io.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),cG=(e,t,r)=>t(eV.fromDom(r.startContainer),r.startOffset,eV.fromDom(r.endContainer),r.endOffset),cK=(e,t)=>t.match({domRange:e=>({ltr:y(e),rtl:E.none}),relative:(t,r)=>({ltr:rz(()=>cH(e,t,r)),rtl:rz(()=>E.some(cH(e,r,t)))}),exact:(t,r,l,o)=>({ltr:rz(()=>c$(e,t,r,l,o)),rtl:rz(()=>E.some(c$(e,l,o,t,r)))})}),cY=(e,t)=>{let r=t.ltr();if(!r.collapsed)return cG(e,cU.ltr,r);{let l=t.rtl().filter(e=>!1===e.collapsed);return l.map(e=>cU.rtl(eV.fromDom(e.endContainer),e.endOffset,eV.fromDom(e.startContainer),e.startOffset)).getOrThunk(()=>cG(e,cU.ltr,r))}},cJ=(e,t)=>{let r=cK(e,t);return cY(e,r)},cQ=(e,t)=>{let r=cJ(e,t);return r.match({ltr:(t,r,l,o)=>{let n=e.document.createRange();return n.setStart(t.dom,r),n.setEnd(l.dom,o),n},rtl:(t,r,l,o)=>{let n=e.document.createRange();return n.setStart(l.dom,o),n.setEnd(t.dom,r),n}})};cU.ltr,cU.rtl;let cX={create:(e,t,r,l)=>({start:e,soffset:t,finish:r,foffset:l})},cZ={create:(e,t,r,l)=>({start:cj.on(e,t),finish:cj.on(r,l)})},c0=(e,t)=>{let r=cQ(e,t);return cX.create(eV.fromDom(r.startContainer),r.startOffset,eV.fromDom(r.endContainer),r.endOffset)},c1=cZ.create,c9=(e,t,r,l,o,n,s)=>eY(r,o)&&l===n?E.none():t1(r,"td,th",t).bind(r=>t1(o,"td,th",t).bind(l=>c3(e,t,r,l,s))),c3=(e,t,r,l,o)=>eY(r,l)?E.none():sm(r,l,t).bind(t=>{let l=t.boxes.getOr([]);return l.length>1?(o(e,l,t.start,t.finish),E.some(cW.create(E.some(c1(r,0,r,o1(r))),!0))):E.none()}),c2=(e,t,r,l,o)=>sg(l,e,t,o.firstSelectedSelector,o.lastSelectedSelector).map(e=>(o.clearBeforeUpdate(r),o.selectRange(r,e.boxes,e.start,e.finish),e.boxes)),c5=(e,t)=>({item:e,mode:t}),c7=(e,t,r,l=c4)=>e.property().parent(t).map(e=>c5(e,l)),c4=(e,t,r,l=c6)=>r.sibling(e,t).map(e=>c5(e,l)),c6=(e,t,r,l=c6)=>{let o=e.property().children(t),n=r.first(o);return n.map(e=>c5(e,l))},c8=[{current:c7,next:c4,fallback:E.none()},{current:c4,next:c6,fallback:E.some(c7)},{current:c6,next:c6,fallback:E.some(c4)}],de=(e,t,r,l,o=c8)=>{let n=q(o,e=>e.current===r);return n.bind(r=>r.current(e,t,l,r.next).orThunk(()=>r.fallback.bind(r=>de(e,t,r,l))))},dt=(e,t,r,l,o,n)=>{let s=de(e,t,l,o);return s.bind(t=>n(t.item)?E.none():r(t.item)?E.some(t.item):dt(e,t.item,r,t.mode,o,n))},dr=e=>t=>0===e.property().children(t).length,dl=(e,t,r)=>ds(e,t,dr(e),r),dn=(e,t,r)=>da(e,t,dr(e),r),ds=(e,t,r,l)=>dt(e,t,r,c4,{sibling:(e,t)=>e.query().prevSibling(t),first:e=>e.length>0?E.some(e[e.length-1]):E.none()},l),da=(e,t,r,l)=>dt(e,t,r,c4,{sibling:(e,t)=>e.query().nextSibling(t),first:e=>e.length>0?E.some(e[0]):E.none()},l),di=n6(),dm=(e,t)=>dl(di,e,t),dc=(e,t)=>dn(di,e,t),dd=(e,t,r)=>ds(di,e,t,r),du=(e,t,r)=>da(di,e,t,r),df=(e,t,r)=>tK(e,t,r).isSome(),dg=io.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),dh=(e,t,r)=>{let l=e.getRect(t),o=e.getRect(r);return o.right>l.left&&o.left<l.right},dp=e=>t1(e,"tr"),db={...dg,verify:(e,t,r,l,o,n,s)=>t1(l,"td,th",s).bind(r=>t1(t,"td,th",s).map(t=>eY(r,t)?eY(l,r)&&o1(r)===o?n(t):dg.none("in same cell"):ss(dp,[r,t]).fold(()=>dh(e,t,r)?dg.success():n(t),e=>n(t)))).getOr(dg.none("default")),cata:(e,t,r,l,o)=>e.fold(t,r,l,o)},dw=(e,t,r,l)=>({parent:e,children:t,element:r,index:l}),dv=e=>e1(e).bind(t=>{let r=e7(t);return dy(r,e).map(l=>dw(t,r,e,l))}),dy=(e,t)=>U(e,x(eY,t)),dC=e_("br"),dT=(e,t,r)=>t(e,r).bind(e=>eB(e)&&0===oX(e).trim().length?dT(e,t,r):E.some(e)),dx=(e,t,r)=>r.traverse(t).orThunk(()=>dT(t,r.gather,e)).map(r.relative),dS=(e,t)=>e4(e,t).filter(dC).orThunk(()=>e4(e,t-1).filter(dC)),dR=(e,t,r,l)=>dS(t,r).bind(t=>l.traverse(t).fold(()=>dT(t,l.gather,e).map(l.relative),e=>dv(e).map(e=>cj.on(e.parent,e.index)))),dD=(e,t,r,l)=>{let o=dC(t)?dx(e,t,l):dR(e,t,r,l);return o.map(e=>({start:e,finish:e}))},dO=e=>db.cata(e,e=>E.none(),()=>E.none(),e=>E.some(sL(e,0)),e=>E.some(sL(e,o1(e)))),dk=(e,t)=>({left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}),dE=(e,t)=>({left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}),dA=(e,t,r)=>({left:e.left+t,top:e.top+r,right:e.right+t,bottom:e.bottom+r}),dB=(e,t,r)=>r>=0&&r<o1(t)?e.getRangedRect(t,r,t,r+1):r>0?e.getRangedRect(t,r-1,t,r):E.none(),dN=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom}),dz=(e,t)=>E.some(e.getRect(t)),d_=(e,t,r)=>eA(t)?dz(e,t).map(dN):eB(t)?dB(e,t,r).map(dN):E.none(),dj=(e,t)=>eA(t)?dz(e,t).map(dN):eB(t)?e.getRangedRect(t,0,t,o1(t)).map(dN):E.none(),dW=io.generate([{none:[]},{retry:["caret"]}]),dL=(e,t)=>e.left<t.left||1>Math.abs(t.right-e.left)||e.left>t.right,dM=(e,t,r)=>tY(t,ij).fold(O,t=>dj(e,t).exists(e=>dL(r,e))),dI=(e,t,r)=>e.elementFromPoint(t,r).filter(e=>"table"===eR(e)).isSome(),dP=(e,t,r,l,o)=>dF(e,t,r,t.move(l,5),o),dF=(e,t,r,l,o)=>0===o?E.some(l):dI(e,l.left,t.point(l))?dP(e,t,r,l,o-1):e.situsFromPoint(l.left,t.point(l)).bind(n=>n.start.fold(E.none,n=>dj(e,n).bind(s=>t.adjuster(e,n,s,r,l).fold(E.none,l=>dF(e,t,r,l,o-1))).orThunk(()=>E.some(l)),E.none)),dH=(e,t,r)=>e.point(t)>r.getInnerHeight()?E.some(e.point(t)-r.getInnerHeight()):0>e.point(t)?E.some(-e.point(t)):E.none(),d$=(e,t,r)=>{let l=e.move(r,5),o=dF(t,e,r,l,100).getOr(l);return dH(e,o,t).fold(()=>t.situsFromPoint(o.left,e.point(o)),r=>(t.scrollBy(0,r),t.situsFromPoint(o.left,e.point(o)-r)))},dV={tryUp:x(d$,{point:e=>e.top,adjuster:(e,t,r,l,o)=>{let n=dE(o,5);return 1>Math.abs(r.top-l.top)||r.bottom<o.top?dW.retry(n):r.bottom===o.top?dW.retry(dE(o,1)):dM(e,t,o)?dW.retry(dA(n,5,0)):dW.none()},move:dE,gather:dm}),tryDown:x(d$,{point:e=>e.bottom,adjuster:(e,t,r,l,o)=>{let n=dk(o,5);return 1>Math.abs(r.bottom-l.bottom)||r.top>o.bottom?dW.retry(n):r.top===o.bottom?dW.retry(dk(o,1)):dM(e,t,o)?dW.retry(dA(n,5,0)):dW.none()},move:dk,gather:dc}),getJumpSize:y(5)},dq=(e,t,r)=>e.getSelection().bind(l=>dD(t,l.finish,l.foffset,r).fold(()=>E.some(sL(l.finish,l.foffset)),o=>{let n=e.fromSitus(o),s=db.verify(e,l.finish,l.foffset,n.finish,n.foffset,r.failure,t);return dO(s)})),dU=(e,t,r,l,o,n)=>0===n?E.none():dY(e,t,r,l,o).bind(s=>{let a=e.fromSitus(s),i=db.verify(e,r,l,a.finish,a.foffset,o.failure,t);return db.cata(i,()=>E.none(),()=>E.some(s),s=>eY(r,s)&&0===l?dG(e,r,l,dE,o):dU(e,t,s,0,o,n-1),s=>eY(r,s)&&l===o1(s)?dG(e,r,l,dk,o):dU(e,t,s,o1(s),o,n-1))}),dG=(e,t,r,l,o)=>d_(e,t,r).bind(t=>dK(e,o,l(t,dV.getJumpSize()))),dK=(e,t,r)=>{let l=lo().browser;return l.isChromium()||l.isSafari()||l.isFirefox()?t.retry(e,r):E.none()},dY=(e,t,r,l,o)=>d_(e,r,l).bind(t=>dK(e,o,t)),dJ=(e,t,r)=>dq(e,t,r).bind(l=>dU(e,t,l.element,l.offset,r,20).map(e.fromSitus)),dQ=(e,t)=>df(e,e=>e1(e).exists(e=>eY(e,t))),dX=(e,t,r,l,o)=>t1(l,"td,th",t).bind(l=>t1(l,"table",t).bind(n=>dQ(o,n)?dJ(e,t,r).bind(e=>t1(e.finish,"td,th",t).map(t=>({start:l,finish:t,range:e}))):E.none())),dZ=(e,t,r,l,o,n)=>n(l,t).orThunk(()=>dX(e,t,r,l,o).map(e=>{let t=e.range;return cW.create(E.some(c1(t.start,t.soffset,t.finish,t.foffset)),!0)})),d0=(e,t)=>t1(e,"tr",t).bind(e=>t1(e,"table",t).bind(r=>{let l=tU(r,"tr");return eY(e,l[0])?dd(r,e=>o4(e).isSome(),t).map(e=>{let t=o1(e);return cW.create(E.some(c1(e,t,e,t)),!0)}):E.none()})),d1=(e,t)=>t1(e,"tr",t).bind(e=>t1(e,"table",t).bind(r=>{let l=tU(r,"tr");return eY(e,l[l.length-1])?du(r,e=>o7(e).isSome(),t).map(e=>cW.create(E.some(c1(e,0,e,0)),!0)):E.none()})),d9=(e,t,r,l,o,n,s)=>dX(e,r,l,o,n).bind(e=>c3(t,r,e.start,e.finish,s)),d3=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},d2=e=>{let t=d3(E.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(E.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(E.some(e))}}},d5=()=>{let e=d2(b);return{...e,on:t=>e.get().each(t)}},d7=(e,t)=>t1(e,"td,th",t),d4=e=>e9(e).exists(nj),d6=(e,t,r,l)=>{let o=d5(),n=o.clear,s=n=>{o.on(o=>{l.clearBeforeUpdate(t),d7(n.target,r).each(s=>{sm(o,s,r).each(r=>{let o=r.boxes.getOr([]);if(1===o.length){let r=o[0],s="false"===nW(r),a=t9(n_(n.target),r,eY);s&&a&&(l.selectRange(t,o,r,r),e.selectContents(r))}else o.length>1&&(l.selectRange(t,o,r.start,r.finish),e.selectContents(s))})})})};return{clearstate:n,mousedown:e=>{l.clear(t),d7(e.target,r).filter(d4).each(o.set)},mouseover:e=>{s(e)},mouseup:e=>{s(e),n()}}},d8={traverse:e5,gather:dc,relative:cj.before,retry:dV.tryDown,failure:db.failedDown},ue={traverse:e2,gather:dm,relative:cj.before,retry:dV.tryUp,failure:db.failedUp},ut=e=>t=>t===e,ur=ut(38),ul=ut(40),uo=e=>e>=37&&e<=40,un={isBackward:ut(37),isForward:ut(39)},us={isBackward:ut(39),isForward:ut(37)},ua=e=>{let t=void 0!==e?e.dom:document,r=t.body.scrollLeft||t.documentElement.scrollLeft,l=t.body.scrollTop||t.documentElement.scrollTop;return l$(r,l)},ui=(e,t,r)=>{let l=void 0!==r?r.dom:document,o=l.defaultView;o&&o.scrollBy(e,t)},um=io.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),uc=e=>e.match({domRange:e=>eV.fromDom(e.startContainer),relative:(e,t)=>cj.getStart(e),exact:(e,t,r,l)=>e}),ud=um.domRange,uu=um.relative,uf=um.exact,ug=cX.create,uh={domRange:ud,relative:uu,exact:uf,exactFromRange:e=>um.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{let t=uc(e);return e0(t)},range:ug},up=document.caretPositionFromPoint?(e,t,r)=>{var l,o;return E.from(null===(o=(l=e.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(l,t,r)).bind(t=>{if(null===t.offsetNode)return E.none();let r=e.dom.createRange();return r.setStart(t.offsetNode,t.offset),r.collapse(),E.some(r)})}:document.caretRangeFromPoint?(e,t,r)=>{var l,o;return E.from(null===(o=(l=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(l,t,r))}:E.none,ub=(e,t,r)=>{let l=eV.fromDom(e.document);return up(l,t,r).map(e=>cX.create(eV.fromDom(e.startContainer),e.startOffset,eV.fromDom(e.endContainer),e.endOffset))},uw=(e,t)=>{let r=eR(e);return"input"===r?cj.after(e):_(["br","img"],r)?0===t?cj.before(e):cj.after(e):cj.on(e,t)},uv=(e,t)=>{let r=e.fold(cj.before,uw,cj.after),l=t.fold(cj.before,uw,cj.after);return uh.relative(r,l)},uy=(e,t,r,l)=>{let o=uw(e,t),n=uw(r,l);return uh.relative(o,n)},uC=(e,t,r,l)=>{let o=eQ(e),n=o.dom.createRange();return n.setStart(e.dom,t),n.setEnd(r.dom,l),n},uT=(e,t,r,l)=>{let o=uC(e,t,r,l),n=eY(e,r)&&t===l;return o.collapsed&&!n},ux=e=>E.from(e.getSelection()),uS=(e,t)=>{ux(e).each(e=>{e.removeAllRanges(),e.addRange(t)})},uR=(e,t,r,l,o)=>{let n=c$(e,t,r,l,o);uS(e,n)},uD=(e,t,r,l,o,n)=>{t.collapse(r.dom,l),t.extend(o.dom,n)},uO=(e,t)=>cJ(e,t).match({ltr:(t,r,l,o)=>{uR(e,t,r,l,o)},rtl:(t,r,l,o)=>{ux(e).each(n=>{if(n.setBaseAndExtent)n.setBaseAndExtent(t.dom,r,l.dom,o);else if(n.extend)try{uD(e,n,t,r,l,o)}catch(n){uR(e,l,o,t,r)}else uR(e,l,o,t,r)})}}),uk=(e,t,r,l,o)=>{let n=uy(t,r,l,o);uO(e,n)},uE=(e,t,r)=>{let l=uv(t,r);uO(e,l)},uA=e=>{if(!(e.rangeCount>0))return E.none();{let t=e.getRangeAt(0),r=e.getRangeAt(e.rangeCount-1);return E.some(cX.create(eV.fromDom(t.startContainer),t.startOffset,eV.fromDom(r.endContainer),r.endOffset))}},uB=e=>{if(null===e.anchorNode||null===e.focusNode)return uA(e);{let t=eV.fromDom(e.anchorNode),r=eV.fromDom(e.focusNode);return uT(t,e.anchorOffset,r,e.focusOffset)?E.some(cX.create(t,e.anchorOffset,r,e.focusOffset)):uA(e)}},uN=(e,t,r=!0)=>{let l=(r?cM:cL)(e,t);uS(e,l)},uz=e=>ux(e).filter(e=>e.rangeCount>0).bind(uB),u_=e=>uz(e).map(e=>uh.exact(e.start,e.soffset,e.finish,e.foffset)),uj=(e,t)=>{let r=cQ(e,t);return cq(r)},uW=(e,t,r)=>ub(e,t,r),uL=e=>{ux(e).each(e=>e.removeAllRanges())},uM=e=>({elementFromPoint:(t,r)=>eV.fromPoint(eV.fromDom(e.document),t,r),getRect:e=>e.dom.getBoundingClientRect(),getRangedRect:(t,r,l,o)=>{let n=uh.exact(t,r,l,o);return uj(e,n)},getSelection:()=>u_(e).map(t=>c0(e,t)),fromSitus:t=>{let r=uh.relative(t.start,t.finish);return c0(e,r)},situsFromPoint:(t,r)=>uW(e,t,r).map(e=>cZ.create(e.start,e.soffset,e.finish,e.foffset)),clearSelection:()=>{uL(e)},collapseSelection:(t=!1)=>{u_(e).each(r=>r.fold(e=>e.collapse(t),(r,l)=>{let o=t?r:l;uE(e,o,o)},(r,l,o,n)=>{let s=t?r:o,a=t?l:n;uk(e,s,a,s,a)}))},setSelection:t=>{uk(e,t.start,t.soffset,t.finish,t.foffset)},setRelativeSelection:(t,r)=>{uE(e,t,r)},selectNode:t=>{uN(e,t,!1)},selectContents:t=>{uN(e,t)},getInnerHeight:()=>e.innerHeight,getScrollY:()=>{let t=ua(eV.fromDom(e.document));return t.top},scrollBy:(t,r)=>{ui(t,r,eV.fromDom(e.document))}}),uI=(e,t)=>({rows:e,cols:t}),uP=(e,t,r,l)=>{let o=uM(e),n=d6(o,t,r,l);return{clearstate:n.clearstate,mousedown:n.mousedown,mouseover:n.mouseover,mouseup:n.mouseup}},uF=e=>tY(e,eE).exists(nj),uH=(e,t)=>uF(e)||uF(t),u$=(e,t,r,l)=>{let o=uM(e),n=()=>(l.clear(t),E.none());return{keydown:(e,s,a,i,m,c)=>{let d=e.raw,u=d.which,f=!0===d.shiftKey,g=sc(t,l.selectedSelector).fold(()=>(uo(u)&&!f&&l.clearBeforeUpdate(t),uo(u)&&f&&!uH(s,i))?E.none:ul(u)&&f?x(d9,o,t,r,d8,i,s,l.selectRange):ur(u)&&f?x(d9,o,t,r,ue,i,s,l.selectRange):ul(u)?x(dZ,o,r,d8,i,s,d1):ur(u)?x(dZ,o,r,ue,i,s,d0):E.none,e=>{let r=r=>()=>{let n=er(r,r=>c2(r.rows,r.cols,t,e,l));return n.fold(()=>su(t,l.firstSelectedSelector,l.lastSelectedSelector).map(e=>{let r=ul(u)||c.isForward(u)?cj.after:cj.before;return o.setRelativeSelection(cj.on(e.first,0),r(e.table)),l.clear(t),cW.create(E.none(),!0)}),e=>E.some(cW.create(E.none(),!0)))};return uo(u)&&f&&!uH(s,i)?E.none:ul(u)&&f?r([uI(1,0)]):ur(u)&&f?r([uI(-1,0)]):c.isBackward(u)&&f?r([uI(0,-1),uI(-1,0)]):c.isForward(u)&&f?r([uI(0,1),uI(1,0)]):uo(u)&&!f?n:E.none});return g()},keyup:(e,o,n,s,a)=>sc(t,l.selectedSelector).fold(()=>{let i=e.raw,m=i.which,c=!0===i.shiftKey;return c&&uo(m)&&uH(o,s)?c9(t,r,o,n,s,a,l.selectRange):E.none()},E.none)}},uV=(e,t,r,l)=>{let o=uM(e);return(e,n)=>{l.clearBeforeUpdate(t),sm(e,n,r).each(e=>{let r=e.boxes.getOr([]);l.selectRange(t,r,e.start,e.finish),o.selectContents(n),o.collapseSelection()})}},uq=(e,t)=>{let r=eI(e,t);return void 0===r||""===r?[]:r.split(" ")},uU=(e,t,r)=>{let l=uq(e,t),o=l.concat([r]);return eW(e,t,o.join(" ")),!0},uG=(e,t,r)=>{let l=F(uq(e,t),e=>e!==r);return l.length>0?eW(e,t,l.join(" ")):eF(e,t),!1},uK=e=>void 0!==e.dom.classList,uY=e=>uq(e,"class"),uJ=(e,t)=>uU(e,"class",t),uQ=(e,t)=>uG(e,"class",t),uX=(e,t)=>{uK(e)?e.dom.classList.add(t):uJ(e,t)},uZ=e=>{let t=uK(e)?e.dom.classList:uY(e);0===t.length&&eF(e,"class")},u0=(e,t)=>{if(uK(e)){let r=e.dom.classList;r.remove(t)}else uQ(e,t);uZ(e)},u1=(e,t)=>uK(e)&&e.dom.classList.contains(t),u9=(e,t)=>{M(t,t=>{u0(e,t)})},u3=e=>t=>{uX(t,e)},u2=e=>t=>{u9(t,e)},u5={byClass:e=>{let t=u3(e.selected),r=u2([e.selected,e.lastSelected,e.firstSelected]),l=t=>{let l=tU(t,e.selectedSelector);M(l,r)};return{clearBeforeUpdate:l,clear:l,selectRange:(r,o,n,s)=>{l(r),M(o,t),uX(n,e.firstSelected),uX(s,e.lastSelected)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},byAttr:(e,t,r)=>{let l=t=>{eF(t,e.selected),eF(t,e.firstSelected),eF(t,e.lastSelected)},o=t=>{eW(t,e.selected,"1")},n=e=>{s(e),r()},s=t=>{let r=tU(t,`${e.selectedSelector},${e.firstSelectedSelector},${e.lastSelectedSelector}`);M(r,l)};return{clearBeforeUpdate:s,clear:n,selectRange:(r,l,s,a)=>{n(r),M(l,o),eW(s,e.firstSelected,"1"),eW(a,e.lastSelected,"1"),t(l,s,a)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}}},u7=(e,t,r,l)=>{switch(e.tag){case"none":return t();case"single":return l(e.element);case"multiple":return r(e.elements)}},u4=()=>({tag:"none"}),u6=e=>({tag:"multiple",elements:e}),u8=e=>({tag:"single",element:e}),fe=(e,t,r)=>({get:()=>sh(e(),r).fold(()=>t().fold(u4,u8),u6)}),ft=(e,t)=>{let r=e.slice(0,t[t.length-1].row+1),l=af(r);return K(l,e=>{let r=e.cells.slice(0,t[t.length-1].column+1);return L(r,e=>e.element)})},fr=(e,t)=>{let r=e.slice(t[0].row+t[0].rowspan-1,e.length),l=af(r);return K(l,e=>{let r=e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length);return L(r,e=>e.element)})},fl=(e,t,r)=>{let l=lN.fromTable(e),o=ay(l,t);return o.map(e=>{let t=ad(l,r,!1),{rows:o}=lx(t),n=ft(o,e),s=fr(o,e);return{upOrLeftCells:n,downOrRightCells:s}})},fo=(e,t,r,l,o,n,s)=>({target:e,x:t,y:r,stop:l,prevent:o,kill:n,raw:s}),fn=e=>{let t=eV.fromDom(tW(e).getOr(e.target)),r=()=>e.stopPropagation(),l=()=>e.preventDefault(),o=w(l,r);return fo(t,e.clientX,e.clientY,r,l,o,e)},fs=(e,t)=>r=>{e(r)&&t(fn(r))},fa=(e,t,r,l,o)=>{let n=fs(r,l);return e.dom.addEventListener(t,n,o),{unbind:x(fm,e,t,n,o)}},fi=(e,t,r,l)=>fa(e,t,r,l,!1),fm=(e,t,r,l)=>{e.dom.removeEventListener(t,r,l)},fc=(e,t,r)=>fi(e,t,k,r),fd=e=>!u1(eV.fromDom(e.target),"ephox-snooker-resizer-bar"),fu=(e,t)=>{let r=fe(()=>eV.fromDom(e.getBody()),()=>sA(nP(e),nM(e)),sx.selectedSelector),l=u5.byAttr(sx,(t,r,l)=>{let o=rD(r);o.each(o=>{let n=nw(e),s=ni(b,eV.fromDom(e.getDoc()),n),a=sB(e),i=fl(o,{selection:a},s);mT(e,t,r,l,i)})},()=>mx(e));return e.on("init",r=>{let o=e.getWin(),n=nL(e),s=nM(e),a=uP(o,n,s,l),i=u$(o,n,s,l),m=uV(o,n,s,l),c=e=>!0===e.raw.shiftKey;e.on("TableSelectorChange",e=>m(e.start,e.finish));let d=(t,r)=>{c(t)&&(r.kill&&t.kill(),r.selection.each(t=>{let r=uh.relative(t.start,t.finish),l=cQ(o,r);e.selection.setRng(l)}))},u=e=>0===e.button,f=e=>void 0===e.buttons||(1&e.buttons)!=0,g=(()=>{let e=d3(eV.fromDom(n)),t=d3(0);return{touchEnd:r=>{let l=eV.fromDom(r.target);if(e_("td")(l)||e_("th")(l)){let o=e.get(),n=t.get();eY(o,l)&&r.timeStamp-n<300&&(r.preventDefault(),m(l,l))}e.set(l),t.set(r.timeStamp)}}})();e.on("dragstart",e=>{a.clearstate()}),e.on("mousedown",e=>{u(e)&&fd(e)&&a.mousedown(fn(e))}),e.on("mouseover",e=>{f(e)&&fd(e)&&a.mouseover(fn(e))}),e.on("mouseup",e=>{u(e)&&fd(e)&&a.mouseup(fn(e))}),e.on("touchend",g.touchEnd),e.on("keyup",t=>{let r=fn(t);if(r.raw.shiftKey&&uo(r.raw.which)){let t=e.selection.getRng(),l=eV.fromDom(t.startContainer),o=eV.fromDom(t.endContainer);i.keyup(r,l,t.startOffset,o,t.endOffset).each(e=>{d(r,e)})}}),e.on("keydown",r=>{let l=fn(r);t.hide();let o=e.selection.getRng(),n=eV.fromDom(o.startContainer),s=eV.fromDom(o.endContainer),a=lL(un,us)(eV.fromDom(e.selection.getStart()));i.keydown(l,n,o.startOffset,s,o.endOffset,a).each(e=>{d(l,e)}),t.show()}),e.on("NodeChange",()=>{let t=e.selection,r=eV.fromDom(t.getStart()),o=eV.fromDom(t.getEnd()),s=ss(rD,[r,o]);s.fold(()=>l.clear(n),b)})}),e.on("PreInit",()=>{e.serializer.addTempAttr(sx.firstSelected),e.serializer.addTempAttr(sx.lastSelected)}),{getSelectedCells:()=>u7(r.get(),y([]),e=>L(e,e=>e.dom),e=>[e.dom]),clearSelectedCells:e=>l.clear(eV.fromDom(e))}},ff=e=>{let t=[];return{bind:e=>{if(void 0===e)throw Error("Event bind error: undefined handler");t.push(e)},unbind:e=>{t=F(t,t=>t!==e)},trigger:(...r)=>{let l={};M(e,(e,t)=>{l[e]=r[t]}),M(t,e=>{e(l)})}}},fg=e=>{let t=es(e,e=>({bind:e.bind,unbind:e.unbind})),r=es(e,e=>e.trigger);return{registry:t,trigger:r}},fh=(e,t)=>{let r=null,l=()=>{c(r)||(clearTimeout(r),r=null)};return{cancel:l,throttle:(...o)=>{l(),r=setTimeout(()=>{r=null,e.apply(null,o)},t)}}},fp=e=>e.slice(0).sort(),fb=(e,t)=>{throw Error("All required keys ("+fp(e).join(", ")+") were not specified. Specified keys were: "+fp(t).join(", ")+".")},fw=e=>{throw Error("Unsupported keys for object: "+fp(e).join(", "))},fv=(e,t)=>{if(!m(t))throw Error("The "+e+" fields must be an array. Was: "+t+".");M(t,t=>{if(!a(t))throw Error("The value "+t+" in the "+e+" fields was not a string.")})},fy=(e,t)=>{throw Error("All values need to be of type: "+t+". Keys ("+fp(e).join(", ")+") were not.")},fC=e=>{let t=fp(e),r=q(t,(e,r)=>r<t.length-1&&e===t[r+1]);r.each(e=>{throw Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})},fT=(e,t)=>fx(e,t,{validate:h,label:"function"}),fx=(e,t,r)=>{if(0===t.length)throw Error("You must specify at least one required field.");return fv("required",t),fC(t),l=>{let o=el(l),n=Y(t,e=>_(o,e));n||fb(t,o),e(t,o);let s=F(t,e=>!r.validate(l[e],e));return s.length>0&&fy(s,r.label),l}},fS=(e,t)=>{let r=F(t,t=>!_(e,t));r.length>0&&fw(r)},fR=e=>fT(fS,e),fD=fR(["compare","extract","mutate","sink"]),fO=fR(["element","start","stop","destroy"]),fk=fR(["forceDrop","drop","move","delayDrop"]),fE=()=>{let e=E.none(),t=(t,r)=>{let l=e.map(e=>t.compare(e,r));return e=E.some(r),l},r=fg({move:ff(["info"])});return{onEvent:(e,l)=>{let o=l.extract(e);o.each(e=>{let o=t(l,e);o.each(e=>{r.trigger.move(e)})})},reset:()=>{e=E.none()},events:r.registry}},fA=()=>{let e=fg({move:ff(["info"])});return{onEvent:b,reset:b,events:e.registry}},fB=()=>{let e=fA(),t=fE(),r=e;return{on:()=>{r.reset(),r=t},off:()=>{r.reset(),r=e},isOn:()=>r===t,onEvent:(e,t)=>{r.onEvent(e,t)},events:t.events}},fN=(e,t,r)=>{let l=!1,o=fg({start:ff([]),stop:ff([])}),n=fB(),s=()=>{m.stop(),n.isOn()&&(n.off(),o.trigger.stop())},a=fh(s,200);n.events.move.bind(r=>{t.mutate(e,r.info)});let i=e=>(...t)=>{l&&e.apply(null,t)},m=t.sink(fk({forceDrop:s,drop:i(s),move:i(e=>{a.cancel(),n.onEvent(e,t)}),delayDrop:i(a.throttle)}),r);return{element:m.element,go:e=>{m.start(e),n.on(),o.trigger.start()},on:()=>{l=!0},off:()=>{l=!1},isActive:()=>l,destroy:()=>{m.destroy()},events:o.registry}},fz=e=>{let t=e.replace(/\./g,"-");return{resolve:e=>t+"-"+e}},f_=fz("ephox-dragster"),fj=f_.resolve,fW=e=>{let t={layerClass:fj("blocker"),...e},r=eV.fromTag("div");eW(r,"role","presentation"),ra(r,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),uX(r,fj("blocker")),uX(r,t.layerClass);let l=y(r);return{element:l,destroy:()=>{ti(r)}}};var fL=fD({compare:(e,t)=>l$(t.left-e.left,t.top-e.top),extract:e=>E.some(l$(e.x,e.y)),sink:(e,t)=>{let r=fW(t),l=fc(r.element(),"mousedown",e.forceDrop),o=fc(r.element(),"mouseup",e.drop),n=fc(r.element(),"mousemove",e.move),s=fc(r.element(),"mouseout",e.delayDrop);return fO({element:r.element,start:e=>{tr(e,r.element())},stop:()=>{ti(r.element())},destroy:()=>{r.destroy(),o.unbind(),n.unbind(),s.unbind(),l.unbind()}})},mutate:(e,t)=>{e.mutate(t.left,t.top)}});let fM=(e,t={})=>{var r;let l=null!==(r=t.mode)&&void 0!==r?r:fL;return fN(e,l,t)},fI=fz("ephox-snooker"),fP=fI.resolve,fF=()=>{let e=fg({drag:ff(["xDelta","yDelta"])});return{mutate:(t,r)=>{e.trigger.drag(t,r)},events:e.registry}},fH=()=>{let e=fg({drag:ff(["xDelta","yDelta","target"])}),t=E.none(),r=fF();return r.events.drag.bind(r=>{t.each(t=>{e.trigger.drag(r.xDelta,r.yDelta,t)})}),{assign:e=>{t=E.some(e)},get:()=>t,mutate:r.mutate,events:e.registry}},f$=(e,t,r,l,o)=>{let n=eV.fromTag("div");return ra(n,{position:"absolute",left:t-l/2+"px",top:r+"px",height:o+"px",width:l+"px"}),eL(n,{"data-column":e,role:"presentation"}),n},fV=(e,t,r,l,o)=>{let n=eV.fromTag("div");return ra(n,{position:"absolute",left:t+"px",top:r-o/2+"px",height:o+"px",width:l+"px"}),eL(n,{"data-row":e,role:"presentation"}),n},fq=fP("resizer-bar"),fU=fP("resizer-rows"),fG=fP("resizer-cols"),fK=(e,t)=>K(e.all,(e,r)=>t(e.element)?[r]:[]),fY=(e,t)=>{let r=[];return W(e.grid.columns,l=>{let o=lN.getColumnAt(e,l).map(e=>e.element);o.forall(t)&&r.push(l)}),F(r,r=>{let l=lN.filterItems(e,e=>e.column===r);return Y(l,e=>t(e.element))})},fJ=e=>{let t=tU(e.parent(),"."+fq);M(t,ti)},fQ=(e,t,r)=>{let l=e.origin();M(t,t=>{t.each(t=>{let o=r(l,t);uX(o,fq),tr(e.parent(),o)})})},fX=(e,t,r,l)=>{fQ(e,t,(e,t)=>{let o=f$(t.col,t.x-e.left,r.top-e.top,7,l);return uX(o,fG),o})},fZ=(e,t,r,l)=>{fQ(e,t,(e,t)=>{let o=fV(t.row,r.left-e.left,t.y-e.top,l,7);return uX(o,fU),o})},f0=(e,t,r,l,o)=>{let n=lU(r),s=t.isResizable,a=l.length>0?l2.positions(l,r):[],i=a.length>0?fK(e,s):[],m=F(a,(e,t)=>j(i,e=>t===e));fZ(t,m,n,lu(r));let c=o.length>0?l7.positions(o,r):[],d=c.length>0?fY(e,s):[],u=F(c,(e,t)=>j(d,e=>t===e));fX(t,u,n,lF(r))},f1=(e,t)=>{if(fJ(e),e.isResizable(t)){let r=lN.fromTable(t),l=lj(r),o=lz(r);f0(r,e,t,l,o)}},f9=(e,t)=>{let r=tU(e.parent(),"."+fq);M(r,t)},f3=e=>{f9(e,e=>{rs(e,"display","none")})},f2=e=>{f9(e,e=>{rs(e,"display","block")})},f5=e=>u1(e,fU),f7=e=>u1(e,fG),f4=fP("resizer-bar-dragging"),f6=e=>{let t=fH(),r=fM(t,{}),l=E.none(),o=(e,t)=>E.from(eI(e,t));t.events.drag.bind(e=>{o(e.target,"data-row").each(t=>{let r=rb(e.target,"top");rs(e.target,"top",r+e.yDelta+"px")}),o(e.target,"data-column").each(t=>{let r=rb(e.target,"left");rs(e.target,"left",r+e.xDelta+"px")})});let n=(e,t)=>{let r=rb(e,t),l=rf(e,"data-initial-"+t,0);return r-l};r.events.stop.bind(()=>{t.get().each(t=>{l.each(r=>{o(t,"data-row").each(e=>{let l=n(t,"top");eF(t,"data-initial-top"),d.trigger.adjustHeight(r,l,parseInt(e,10))}),o(t,"data-column").each(e=>{let l=n(t,"left");eF(t,"data-initial-left"),d.trigger.adjustWidth(r,l,parseInt(e,10))}),f1(e,r)})})});let s=(l,o)=>{d.trigger.startAdjust(),t.assign(l),eW(l,"data-initial-"+o,rb(l,o)),uX(l,f4),rs(l,"opacity","0.2"),r.go(e.parent())},a=fc(e.parent(),"mousedown",e=>{f5(e.target)&&s(e.target,"top"),f7(e.target)&&s(e.target,"left")}),i=t=>eY(t,e.view()),m=e=>t1(e,"table",i).filter(nj),c=fc(e.view(),"mouseover",t=>{m(t.target).fold(()=>{tM(t.target)&&fJ(e)},t=>{r.isActive()&&(l=E.some(t),f1(e,t))})}),d=fg({adjustHeight:ff(["table","delta","row"]),adjustWidth:ff(["table","delta","column"]),startAdjust:ff([])});return{destroy:()=>{a.unbind(),c.unbind(),r.destroy(),fJ(e)},refresh:t=>{f1(e,t)},on:r.on,off:r.off,hideBars:x(f3,e),showBars:x(f2,e),events:d.registry}},f8={create:(e,t,r)=>{let l=f6(e),o=fg({beforeResize:ff(["table","type"]),afterResize:ff(["table","type"]),startDrag:ff([])});return l.events.adjustHeight.bind(e=>{let t=e.table;o.trigger.beforeResize(t,"row");let r=l2.delta(e.delta,t);iy(t,r,e.row,l2),o.trigger.afterResize(t,"row")}),l.events.startAdjust.bind(e=>{o.trigger.startDrag()}),l.events.adjustWidth.bind(e=>{let l=e.table;o.trigger.beforeResize(l,"col");let n=l7.delta(e.delta,l),s=r(l);iv(l,n,e.column,t,s),o.trigger.afterResize(l,"col")}),{on:l.on,off:l.off,refreshBars:l.refresh,hideBars:l.hideBars,showBars:l.showBars,destroy:l.destroy,events:o.registry}}},ge={only:(e,t)=>{let r=eN(e)?eZ(e):e;return{parent:y(r),view:y(e),origin:y(l$(0,0)),isResizable:t}},detached:(e,t,r)=>({parent:y(t),view:y(e),origin:()=>lU(t),isResizable:r}),body:(e,t,r)=>({parent:y(t),view:y(e),origin:y(l$(0,0)),isResizable:r})},gt=()=>{let e=eV.fromTag("div");return ra(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),tr(tI(),e),e},gr=(e,t)=>e.inline?ge.body(eV.fromDom(e.getBody()),gt(),t):ge.only(eV.fromDom(e.getDoc()),t),gl=(e,t)=>{e.inline&&ti(t.parent())},go=e=>g(e)&&"TABLE"===e.nodeName,gn="bar-",gs=e=>"false"!==eI(e,"data-mce-resize"),ga=e=>{let t=lN.fromTable(e);lN.hasColumns(t)||M(rS(e),e=>{let t=ri(e,"width");rs(e,"width",t),eF(e,"width")})},gi=e=>{let t,r;let l=d5(),o=d5(),n=d5(),s=t=>mE(e,t),a=()=>nT(e)?sJ():sY(),i=e=>sQ(e).columns,m=(l,o,n)=>{let m=t8(o,"e");if(""===r&&m5(l),n!==t&&""!==r){rs(l,"width",r);let o=a(),c=s(l),d=nT(e)||m?i(l)-1:0;iv(l,n-t,d,o,c)}else if(nV(r)){let e=parseFloat(r.replace("%","")),o=n*e/t;rs(l,"width",o+"%")}nq(r)&&ga(l)},c=()=>{o.on(e=>{e.destroy()}),n.on(t=>{gl(e,t)})};return e.on("init",()=>{let t=gr(e,gs);if(n.set(t),nv(e)&&nk(e)){let r=a(),n=f8.create(t,r,s);n.on(),n.events.startDrag.bind(t=>{l.set(e.selection.getRng())}),n.events.beforeResize.bind(t=>{let r=t.table.dom;mS(e,r,nF(r),nH(r),gn+t.type)}),n.events.afterResize.bind(t=>{let r=t.table,o=r.dom;nI(r),l.on(t=>{e.selection.setRng(t),e.focus()}),mR(e,o,nF(o),nH(o),gn+t.type),e.undoManager.add()}),o.set(n)}}),e.on("ObjectResizeStart",l=>{let o=l.target;if(go(o)){let n=eV.fromDom(o);M(e.dom.select(".mce-clonedresizable"),t=>{e.dom.addClass(t,"mce-"+nC(e)+"-columns")}),!m9(n)&&nD(e)?m7(n):!m1(n)&&nR(e)&&m5(n),m3(n)&&t6(l.origin,gn)&&m5(n),t=l.width,r=nO(e)?"":n$(e,o).getOr("")}}),e.on("ObjectResized",t=>{let r=t.target;if(go(r)){let l=eV.fromDom(r),o=t.origin;t6(o,"corner-")&&m(l,o,t.width),nI(l),mC(e,l.dom,mD)}}),e.on("SwitchMode",()=>{o.on(t=>{e.mode.isReadOnly()?t.hideBars():t.showBars()})}),e.on("dragstart dragend",e=>{o.on(t=>{"dragstart"===e.type?(t.hideBars(),t.off()):(t.on(),t.showBars())})}),e.on("remove",()=>{c()}),{refresh:e=>{o.on(t=>t.refreshBars(eV.fromDom(e)))},hide:()=>{o.on(e=>e.hideBars())},show:()=>{o.on(e=>e.showBars())}}},gm=e=>{nb(e);let t=gi(e),r=fu(e,t),l=mA(e,t,r);return cE(e,l),cA(e,l),sW(e,l),{getSelectedCells:r.getSelectedCells,clearSelectedCells:r.clearSelectedCells}};t.add("dom",e=>{let t=gm(e);return{table:t}})}();